/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={69:function(t){t.exports=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e,i){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var r=[null];r.push.apply(r,e);var s=new(Function.bind.apply(t,r));return i&&n(s,i.prototype),s}).apply(null,arguments)}function o(t){var e="function"==typeof Map?new Map:void 0;return(o=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return a(t,arguments,s(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),n(i,t)})(t)}function h(t,e){try{var i=t()}catch(t){return e(t)}return i&&i.then?i.then(void 0,e):i}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var l;!function(t){t[t.off=0]="off",t[t.error=1]="error",t[t.warning=2]="warning",t[t.info=3]="info",t[t.debug=4]="debug"}(l||(l={}));var u=l.off,c=function(){function t(t){this.t=t}t.getLevel=function(){return u},t.setLevel=function(t){return u=l[t]};var e=t.prototype;return e.error=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.i(console.error,l.error,e)},e.warn=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.i(console.warn,l.warning,e)},e.info=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.i(console.info,l.info,e)},e.debug=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.i(console.log,l.debug,e)},e.i=function(e,i,r){i<=t.getLevel()&&e.apply(console,["["+this.t+"] "].concat(r))},t}(),d=C,p=D,f=v,m=y,g=E,_=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function v(t,e){for(var i,r=[],s=0,n=0,a="",o=e&&e.delimiter||"/",h=e&&e.whitelist||void 0,l=!1;null!==(i=_.exec(t));){var u=i[0],c=i[1],d=i.index;if(a+=t.slice(n,d),n=d+u.length,c)a+=c[1],l=!0;else{var p="",f=i[2],m=i[3],g=i[4],v=i[5];if(!l&&a.length){var D=a.length-1,y=a[D];(!h||h.indexOf(y)>-1)&&(p=y,a=a.slice(0,D))}a&&(r.push(a),a="",l=!1);var w=m||g,E=p||o;r.push({name:f||s++,prefix:p,delimiter:E,optional:"?"===v||"*"===v,repeat:"+"===v||"*"===v,pattern:w?b(w):"[^"+x(E===o?E:E+o)+"]+?"})}}return(a||n<t.length)&&r.push(a+t.substr(n)),r}function D(t,e){return function(i,r){var s=t.exec(i);if(!s)return!1;for(var n=s[0],a=s.index,o={},h=r&&r.decode||decodeURIComponent,l=1;l<s.length;l++)if(void 0!==s[l]){var u=e[l-1];o[u.name]=u.repeat?s[l].split(u.delimiter).map((function(t){return h(t,u)})):h(s[l],u)}return{path:n,index:a,params:o}}}function y(t,e){for(var i=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(i[r]=new RegExp("^(?:"+t[r].pattern+")$",w(e)));return function(e,r){for(var s="",n=r&&r.encode||encodeURIComponent,a=!r||!1!==r.validate,o=0;o<t.length;o++){var h=t[o];if("string"!=typeof h){var l,u=e?e[h.name]:void 0;if(Array.isArray(u)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but got array');if(0===u.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var c=0;c<u.length;c++){if(l=n(u[c],h),a&&!i[o].test(l))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'"');s+=(0===c?h.prefix:h.delimiter)+l}}else if("string"!=typeof u&&"number"!=typeof u&&"boolean"!=typeof u){if(!h.optional)throw new TypeError('Expected "'+h.name+'" to be '+(h.repeat?"an array":"a string"))}else{if(l=n(String(u),h),a&&!i[o].test(l))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but got "'+l+'"');s+=h.prefix+l}}else s+=h}return s}}function x(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function b(t){return t.replace(/([=!:$/()])/g,"\\$1")}function w(t){return t&&t.sensitive?"":"i"}function E(t,e,i){for(var r=(i=i||{}).strict,s=!1!==i.start,n=!1!==i.end,a=i.delimiter||"/",o=[].concat(i.endsWith||[]).map(x).concat("$").join("|"),h=s?"^":"",l=0;l<t.length;l++){var u=t[l];if("string"==typeof u)h+=x(u);else{var c=u.repeat?"(?:"+u.pattern+")(?:"+x(u.delimiter)+"(?:"+u.pattern+"))*":u.pattern;e&&e.push(u),h+=u.optional?u.prefix?"(?:"+x(u.prefix)+"("+c+"))?":"("+c+")?":x(u.prefix)+"("+c+")"}}if(n)r||(h+="(?:"+x(a)+")?"),h+="$"===o?"$":"(?="+o+")";else{var d=t[t.length-1],p="string"==typeof d?d[d.length-1]===a:void 0===d;r||(h+="(?:"+x(a)+"(?="+o+"))?"),p||(h+="(?="+x(a)+"|"+o+")")}return new RegExp(h,w(i))}function C(t,e,i){return t instanceof RegExp?function(t,e){if(!e)return t;var i=t.source.match(/\((?!\?)/g);if(i)for(var r=0;r<i.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,i){for(var r=[],s=0;s<t.length;s++)r.push(C(t[s],e,i).source);return new RegExp("(?:"+r.join("|")+")",w(i))}(t,e,i):function(t,e,i){return E(v(t,i),e,i)}(t,e,i)}d.match=function(t,e){var i=[];return D(C(t,i,e),i)},d.regexpToFunction=p,d.parse=f,d.compile=function(t,e){return y(v(t,e),e)},d.tokensToFunction=m,d.tokensToRegExp=g;var T={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},S=new(function(){function t(){this.o=T,this.u=new DOMParser}var e=t.prototype;return e.toString=function(t){return t.outerHTML},e.toDocument=function(t){return this.u.parseFromString(t,"text/html")},e.toElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e},e.getHtml=function(t){return void 0===t&&(t=document),this.toString(t.documentElement)},e.getWrapper=function(t){return void 0===t&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},e.getContainer=function(t){return void 0===t&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},e.removeContainer=function(t){document.body.contains(t)&&t.parentNode.removeChild(t)},e.addContainer=function(t,e){var i=this.getContainer();i?this.s(t,i):e.appendChild(t)},e.getNamespace=function(t){void 0===t&&(t=document);var e=t.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return e?e.getAttribute(this.o.prefix+"-"+this.o.namespace):null},e.getHref=function(t){if(t.tagName&&"a"===t.tagName.toLowerCase()){if("string"==typeof t.href)return t.href;var e=t.getAttribute("href")||t.getAttribute("xlink:href");if(e)return this.resolveUrl(e.baseVal||e)}return null},e.resolveUrl=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r=e.length;if(0===r)throw new Error("resolveUrl requires at least one argument; got none.");var s=document.createElement("base");if(s.href=arguments[0],1===r)return s.href;var n=document.getElementsByTagName("head")[0];n.insertBefore(s,n.firstChild);for(var a,o=document.createElement("a"),h=1;h<r;h++)o.href=arguments[h],s.href=a=o.href;return n.removeChild(s),a},e.s=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},t}()),F=new(function(){function t(){this.h=[],this.v=-1}var r=t.prototype;return r.init=function(t,e){this.l="barba";var i={ns:e,scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(i),this.v=0;var r={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(r,"",t)},r.change=function(t,e,i){if(i&&i.state){var r=i.state,s=r.index;e=this.m(this.v-s),this.replace(r.states),this.v=s}else this.add(t,e);return e},r.add=function(t,e){var i=this.size,r=this.p(e),s={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(s),this.v=i;var n={from:this.l,index:i,states:[].concat(this.h)};switch(r){case"push":window.history&&window.history.pushState(n,"",t);break;case"replace":window.history&&window.history.replaceState(n,"",t)}},r.update=function(t,e){var r=e||this.v,s=i({},this.get(r),{},t);this.set(r,s)},r.remove=function(t){t?this.h.splice(t,1):this.h.pop(),this.v--},r.clear=function(){this.h=[],this.v=-1},r.replace=function(t){this.h=t},r.get=function(t){return this.h[t]},r.set=function(t,e){return this.h[t]=e},r.p=function(t){var e="push",i=t,r=T.prefix+"-"+T.history;return i.hasAttribute&&i.hasAttribute(r)&&(e=i.getAttribute(r)),e},r.m=function(t){return Math.abs(t)>1?t>0?"forward":"back":0===t?"popstate":t>0?"back":"forward"},e(t,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),t}()),P=function(t,e){try{var i=function(){if(!e.next.html)return Promise.resolve(t).then((function(t){var i=e.next;if(t){var r=S.toElement(t);i.namespace=S.getNamespace(r),i.container=S.getContainer(r),i.html=t,F.update({ns:i.namespace});var s=S.toDocument(t);document.title=s.title}}))}();return Promise.resolve(i&&i.then?i.then((function(){})):void 0)}catch(t){return Promise.reject(t)}},R=d,k={__proto__:null,update:P,nextTick:function(){return new Promise((function(t){window.requestAnimationFrame(t)}))},pathToRegexp:R},A=function(){return window.location.origin},M=function(t){return void 0===t&&(t=window.location.href),O(t).port},O=function(t){var e,i=t.match(/:\d+/);if(null===i)/^http/.test(t)&&(e=80),/^https/.test(t)&&(e=443);else{var r=i[0].substring(1);e=parseInt(r,10)}var s,n=t.replace(A(),""),a={},o=n.indexOf("#");o>=0&&(s=n.slice(o+1),n=n.slice(0,o));var h=n.indexOf("?");return h>=0&&(a=B(n.slice(h+1)),n=n.slice(0,h)),{hash:s,path:n,port:e,query:a}},B=function(t){return t.split("&").reduce((function(t,e){var i=e.split("=");return t[i[0]]=i[1],t}),{})},L=function(t){return void 0===t&&(t=window.location.href),t.replace(/(\/#.*|\/|#.*)$/,"")},z={__proto__:null,getHref:function(){return window.location.href},getOrigin:A,getPort:M,getPath:function(t){return void 0===t&&(t=window.location.href),O(t).path},parse:O,parseQuery:B,clean:L};function I(t,e,i){return void 0===e&&(e=2e3),new Promise((function(r,s){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE)if(200===n.status)r(n.responseText);else if(n.status){var e={status:n.status,statusText:n.statusText};i(t,e),s(e)}},n.ontimeout=function(){var r=new Error("Timeout error ["+e+"]");i(t,r),s(r)},n.onerror=function(){var e=new Error("Fetch error");i(t,e),s(e)},n.open("GET",t),n.timeout=e,n.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),n.setRequestHeader("x-barba","yes"),n.send()}))}var N=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then};function U(t,e){return void 0===e&&(e={}),function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var n=!1;return new Promise((function(i,s){e.async=function(){return n=!0,function(t,e){t?s(t):i(e)}};var a=t.apply(e,r);n||(N(a)?a.then(i,s):i(a))}))}}var V=new(function(t){function e(){var e;return(e=t.call(this)||this).logger=new c("@barba/core"),e.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],e.registered=new Map,e.init(),e}r(e,t);var i=e.prototype;return i.init=function(){var t=this;this.registered.clear(),this.all.forEach((function(e){t[e]||(t[e]=function(i,r){t.registered.has(e)||t.registered.set(e,new Set),t.registered.get(e).add({ctx:r||{},fn:i})})}))},i.do=function(t){for(var e=this,i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];if(this.registered.has(t)){var n=Promise.resolve();return this.registered.get(t).forEach((function(t){n=n.then((function(){return U(t.fn,t.ctx).apply(void 0,r)}))})),n.catch((function(i){e.logger.debug("Hook error ["+t+"]"),e.logger.error(i)}))}return Promise.resolve()},i.clear=function(){var t=this;this.all.forEach((function(e){delete t[e]})),this.init()},i.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var t=[];this.registered.forEach((function(e,i){return t.push(i)})),this.logger.info("Registered hooks: "+t.join(","))},e}((function(){}))),j=function(){function t(t){if(this.P=[],"boolean"==typeof t)this.g=t;else{var e=Array.isArray(t)?t:[t];this.P=e.map((function(t){return R(t)}))}}return t.prototype.checkHref=function(t){if("boolean"==typeof this.g)return this.g;var e=O(t).path;return this.P.some((function(t){return null!==t.exec(e)}))},t}(),X=function(t){function e(e){var i;return(i=t.call(this,e)||this).k=new Map,i}r(e,t);var s=e.prototype;return s.set=function(t,e,i){return this.k.set(t,{action:i,request:e}),{action:i,request:e}},s.get=function(t){return this.k.get(t)},s.getRequest=function(t){return this.k.get(t).request},s.getAction=function(t){return this.k.get(t).action},s.has=function(t){return!this.checkHref(t)&&this.k.has(t)},s.delete=function(t){return this.k.delete(t)},s.update=function(t,e){var r=i({},this.k.get(t),{},e);return this.k.set(t,r),r},e}(j),H=function(){return!window.history.pushState},W=function(t){return!t.el||!t.href},Y=function(t){var e=t.event;return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey},q=function(t){var e=t.el;return e.hasAttribute("target")&&"_blank"===e.target},G=function(t){var e=t.el;return void 0!==e.protocol&&window.location.protocol!==e.protocol||void 0!==e.hostname&&window.location.hostname!==e.hostname},K=function(t){var e=t.el;return void 0!==e.port&&M()!==M(e.href)},Q=function(t){var e=t.el;return e.getAttribute&&"string"==typeof e.getAttribute("download")},Z=function(t){return t.el.hasAttribute(T.prefix+"-"+T.prevent)},$=function(t){return Boolean(t.el.closest("["+T.prefix+"-"+T.prevent+'="all"]'))},J=function(t){var e=t.href;return L(e)===L()&&M(e)===M()},tt=function(t){function e(e){var i;return(i=t.call(this,e)||this).suite=[],i.tests=new Map,i.init(),i}r(e,t);var i=e.prototype;return i.init=function(){this.add("pushState",H),this.add("exists",W),this.add("newTab",Y),this.add("blank",q),this.add("corsDomain",G),this.add("corsPort",K),this.add("download",Q),this.add("preventSelf",Z),this.add("preventAll",$),this.add("sameUrl",J,!1)},i.add=function(t,e,i){void 0===i&&(i=!0),this.tests.set(t,e),i&&this.suite.push(t)},i.run=function(t,e,i,r){return this.tests.get(t)({el:e,event:i,href:r})},i.checkLink=function(t,e,i){var r=this;return this.suite.some((function(s){return r.run(s,t,e,i)}))},e}(j),et=function(t){function e(i,r){var s;void 0===r&&(r="Barba error");for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];return(s=t.call.apply(t,[this].concat(a))||this).error=i,s.label=r,Error.captureStackTrace&&Error.captureStackTrace(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(s),e),s.name="BarbaError",s}return r(e,t),e}(o(Error)),it=function(){function t(t){void 0===t&&(t=[]),this.logger=new c("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],t&&(this.all=this.all.concat(t)),this.update()}var e=t.prototype;return e.add=function(t,e){switch(t){case"rule":this.A.splice(e.position||0,0,e.value);break;case"transition":default:this.all.push(e)}this.update()},e.resolve=function(t,e){var i=this;void 0===e&&(e={});var r=e.once?this.once:this.page;r=r.filter(e.self?function(t){return t.name&&"self"===t.name}:function(t){return!t.name||"self"!==t.name});var s=new Map,n=r.find((function(r){var n=!0,a={};return!(!e.self||"self"!==r.name)||(i.A.reverse().forEach((function(e){n&&(n=i.R(r,e,t,a),r.from&&r.to&&(n=i.R(r,e,t,a,"from")&&i.R(r,e,t,a,"to")),r.from&&!r.to&&(n=i.R(r,e,t,a,"from")),!r.from&&r.to&&(n=i.R(r,e,t,a,"to")))})),s.set(r,a),n)})),a=s.get(n),o=[];if(o.push(e.once?"once":"page"),e.self&&o.push("self"),a){var h,l=[n];Object.keys(a).length>0&&l.push(a),(h=this.logger).info.apply(h,["Transition found ["+o.join(",")+"]"].concat(l))}else this.logger.info("No transition found ["+o.join(",")+"]");return n},e.update=function(){var t=this;this.all=this.all.map((function(e){return t.T(e)})).sort((function(t,e){return t.priority-e.priority})).reverse().map((function(t){return delete t.priority,t})),this.page=this.all.filter((function(t){return void 0!==t.leave||void 0!==t.enter})),this.once=this.all.filter((function(t){return void 0!==t.once}))},e.R=function(t,e,i,r,s){var n=!0,a=!1,o=t,h=e.name,l=h,u=h,c=h,d=s?o[s]:o,p="to"===s?i.next:i.current;if(s?d&&d[h]:d[h]){switch(e.type){case"strings":default:var f=Array.isArray(d[l])?d[l]:[d[l]];p[l]&&-1!==f.indexOf(p[l])&&(a=!0),-1===f.indexOf(p[l])&&(n=!1);break;case"object":var m=Array.isArray(d[u])?d[u]:[d[u]];p[u]?(p[u].name&&-1!==m.indexOf(p[u].name)&&(a=!0),-1===m.indexOf(p[u].name)&&(n=!1)):n=!1;break;case"function":d[c](i)?a=!0:n=!1}a&&(s?(r[s]=r[s]||{},r[s][h]=o[s][h]):r[h]=o[h])}return n},e.O=function(t,e,i){var r=0;return(t[e]||t.from&&t.from[e]||t.to&&t.to[e])&&(r+=Math.pow(10,i),t.from&&t.from[e]&&(r+=1),t.to&&t.to[e]&&(r+=2)),r},e.T=function(t){var e=this;t.priority=0;var i=0;return this.A.forEach((function(r,s){i+=e.O(t,r.name,s+1)})),t.priority=i,t},t}(),rt=function(){function t(t){void 0===t&&(t=[]),this.logger=new c("@barba/core"),this.S=!1,this.store=new it(t)}var i=t.prototype;return i.get=function(t,e){return this.store.resolve(t,e)},i.doOnce=function(t){var e=t.data,i=t.transition;try{var r=function(){s.S=!1},s=this,n=i||{};s.S=!0;var a=h((function(){return Promise.resolve(s.j("beforeOnce",e,n)).then((function(){return Promise.resolve(s.once(e,n)).then((function(){return Promise.resolve(s.j("afterOnce",e,n)).then((function(){}))}))}))}),(function(t){s.S=!1,s.logger.debug("Transition error [before/after/once]"),s.logger.error(t)}));return Promise.resolve(a&&a.then?a.then(r):r())}catch(t){return Promise.reject(t)}},i.doPage=function(t){var e=t.data,i=t.transition,r=t.page,s=t.wrapper;try{var n=function(t){if(a)return t;o.S=!1},a=!1,o=this,l=i||{},u=!0===l.sync||!1;o.S=!0;var c=h((function(){function t(){return Promise.resolve(o.j("before",e,l)).then((function(){function t(t){return Promise.resolve(o.remove(e)).then((function(){return Promise.resolve(o.j("after",e,l)).then((function(){}))}))}var i=function(){if(u)return h((function(){return Promise.resolve(o.add(e,s)).then((function(){return Promise.resolve(o.j("beforeLeave",e,l)).then((function(){return Promise.resolve(o.j("beforeEnter",e,l)).then((function(){return Promise.resolve(Promise.all([o.leave(e,l),o.enter(e,l)])).then((function(){return Promise.resolve(o.j("afterLeave",e,l)).then((function(){return Promise.resolve(o.j("afterEnter",e,l)).then((function(){}))}))}))}))}))}))}),(function(t){if(o.M(t))throw new et(t,"Transition error [sync]")}));var t=function(t){return h((function(){var t=function(){if(!1!==i)return Promise.resolve(o.add(e,s)).then((function(){return Promise.resolve(o.j("beforeEnter",e,l)).then((function(){return Promise.resolve(o.enter(e,l,i)).then((function(){return Promise.resolve(o.j("afterEnter",e,l)).then((function(){}))}))}))}))}();if(t&&t.then)return t.then((function(){}))}),(function(t){if(o.M(t))throw new et(t,"Transition error [before/after/enter]")}))},i=!1,n=h((function(){return Promise.resolve(o.j("beforeLeave",e,l)).then((function(){return Promise.resolve(Promise.all([o.leave(e,l),P(r,e)]).then((function(t){return t[0]}))).then((function(t){return i=t,Promise.resolve(o.j("afterLeave",e,l)).then((function(){}))}))}))}),(function(t){if(o.M(t))throw new et(t,"Transition error [before/after/leave]")}));return n&&n.then?n.then(t):t()}();return i&&i.then?i.then(t):t()}))}var i=function(){if(u)return Promise.resolve(P(r,e)).then((function(){}))}();return i&&i.then?i.then(t):t()}),(function(t){if(o.S=!1,t.name&&"BarbaError"===t.name)throw o.logger.debug(t.label),o.logger.error(t.error),t;throw o.logger.debug("Transition error [page]"),o.logger.error(t),t}));return Promise.resolve(c&&c.then?c.then(n):n(c))}catch(t){return Promise.reject(t)}},i.once=function(t,e){try{return Promise.resolve(V.do("once",t,e)).then((function(){return e.once?U(e.once,e)(t):Promise.resolve()}))}catch(t){return Promise.reject(t)}},i.leave=function(t,e){try{return Promise.resolve(V.do("leave",t,e)).then((function(){return e.leave?U(e.leave,e)(t):Promise.resolve()}))}catch(t){return Promise.reject(t)}},i.enter=function(t,e,i){try{return Promise.resolve(V.do("enter",t,e)).then((function(){return e.enter?U(e.enter,e)(t,i):Promise.resolve()}))}catch(t){return Promise.reject(t)}},i.add=function(t,e){try{return S.addContainer(t.next.container,e),V.do("nextAdded",t),Promise.resolve()}catch(t){return Promise.reject(t)}},i.remove=function(t){try{return S.removeContainer(t.current.container),V.do("currentRemoved",t),Promise.resolve()}catch(t){return Promise.reject(t)}},i.M=function(t){return t.message?!/Timeout error|Fetch error/.test(t.message):!t.status},i.j=function(t,e,i){try{return Promise.resolve(V.do(t,e,i)).then((function(){return i[t]?U(i[t],i)(e):Promise.resolve()}))}catch(t){return Promise.reject(t)}},e(t,[{key:"isRunning",get:function(){return this.S},set:function(t){this.S=t}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some((function(t){return"self"===t.name}))}},{key:"shouldWait",get:function(){return this.store.all.some((function(t){return t.to&&!t.to.route||t.sync}))}}]),t}(),st=function(){function t(t){var e=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,0!==t.length&&(t.forEach((function(t){e.byNamespace.set(t.namespace,t)})),this.names.forEach((function(t){V[t](e.L(t))})))}return t.prototype.L=function(t){var e=this;return function(i){var r=t.match(/enter/i)?i.next:i.current,s=e.byNamespace.get(r.namespace);return s&&s[t]?U(s[t],s)(i):Promise.resolve()}},t}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var nt={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}};return new(function(){function t(){this.version="2.9.7",this.schemaPage=nt,this.Logger=c,this.logger=new c("@barba/core"),this.plugins=[],this.hooks=V,this.dom=S,this.helpers=k,this.history=F,this.request=I,this.url=z}var r=t.prototype;return r.use=function(t,e){var i=this.plugins;i.indexOf(t)>-1?this.logger.warn("Plugin ["+t.name+"] already installed."):"function"==typeof t.install?(t.install(this,e),i.push(t)):this.logger.warn("Plugin ["+t.name+'] has no "install" method.')},r.init=function(t){var e=void 0===t?{}:t,r=e.transitions,s=void 0===r?[]:r,n=e.views,a=void 0===n?[]:n,o=e.schema,h=void 0===o?T:o,l=e.requestError,u=e.timeout,d=void 0===u?2e3:u,p=e.cacheIgnore,f=void 0!==p&&p,m=e.prefetchIgnore,g=void 0!==m&&m,_=e.preventRunning,v=void 0!==_&&_,D=e.prevent,y=void 0===D?null:D,x=e.debug,b=e.logLevel;if(c.setLevel(!0===(void 0!==x&&x)?"debug":void 0===b?"off":b),this.logger.info(this.version),Object.keys(h).forEach((function(t){T[t]&&(T[t]=h[t])})),this.$=l,this.timeout=d,this.cacheIgnore=f,this.prefetchIgnore=g,this.preventRunning=v,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();var w=this.data.current;if(!w.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new X(f),this.prevent=new tt(g),this.transitions=new rt(s),this.views=new st(a),null!==y){if("function"!=typeof y)throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",y)}this.history.init(w.url.href,w.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach((function(t){return t.init()}));var E=this.data;E.trigger="barba",E.next=E.current,E.current=i({},this.schemaPage),this.hooks.do("ready",E),this.once(E),this.q()},r.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},r.force=function(t){window.location.assign(t)},r.go=function(t,e,i){var r;if(void 0===e&&(e="barba"),this.transitions.isRunning)this.force(t);else if(!(r="popstate"===e?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(t):this.prevent.run("sameUrl",null,null,t))||this.transitions.hasSelf)return e=this.history.change(t,e,i),i&&(i.stopPropagation(),i.preventDefault()),this.page(t,e,r)},r.once=function(t){try{var e=this;return Promise.resolve(e.hooks.do("beforeEnter",t)).then((function(){function i(){return Promise.resolve(e.hooks.do("afterEnter",t)).then((function(){}))}var r=function(){if(e.transitions.hasOnce){var i=e.transitions.get(t,{once:!0});return Promise.resolve(e.transitions.doOnce({transition:i,data:t})).then((function(){}))}}();return r&&r.then?r.then(i):i()}))}catch(t){return Promise.reject(t)}},r.page=function(t,e,r){try{var s=function(){var t=n.data;return Promise.resolve(n.hooks.do("page",t)).then((function(){var e=h((function(){var e=n.transitions.get(t,{once:!1,self:r});return Promise.resolve(n.transitions.doPage({data:t,page:a,transition:e,wrapper:n._})).then((function(){n.q()}))}),(function(){0===c.getLevel()&&n.force(t.current.url.href)}));if(e&&e.then)return e.then((function(){}))}))},n=this;n.data.next.url=i({href:t},n.url.parse(t)),n.data.trigger=e;var a=n.cache.has(t)?n.cache.update(t,{action:"click"}).request:n.cache.set(t,n.request(t,n.timeout,n.onRequestError.bind(n,e)),"click").request,o=function(){if(n.transitions.shouldWait)return Promise.resolve(P(a,n.data)).then((function(){}))}();return Promise.resolve(o&&o.then?o.then(s):s())}catch(t){return Promise.reject(t)}},r.onRequestError=function(t){this.transitions.isRunning=!1;for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];var s=i[0],n=i[1],a=this.cache.getAction(s);return this.cache.delete(s),!(this.$&&!1===this.$(t,a,s,n)||("click"===a&&this.force(s),1))},r.prefetch=function(t){var e=this;this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,"barba")).catch((function(t){e.logger.error(t)})),"prefetch")},r.F=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},r.H=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},r.B=function(t){var e=this,i=this.I(t);if(i){var r=this.dom.getHref(i);this.prevent.checkHref(r)||this.cache.has(r)||this.cache.set(r,this.request(r,this.timeout,this.onRequestError.bind(this,i)).catch((function(t){e.logger.error(t)})),"enter")}},r.U=function(t){var e=this.I(t);if(e)return this.transitions.isRunning&&this.preventRunning?(t.preventDefault(),void t.stopPropagation()):void this.go(this.dom.getHref(e),e,t)},r.D=function(t){this.go(this.url.getHref(),"popstate",t)},r.I=function(t){for(var e=t.target;e&&!this.dom.getHref(e);)e=e.parentNode;if(e&&!this.prevent.checkLink(e,t,this.dom.getHref(e)))return e},r.q=function(){var t=this.url.getHref(),e={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:i({href:t},this.url.parse(t))};this.C={current:e,next:i({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},e(t,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),t}())}()},264:function(t,e){var i,r,s,n;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n=function(t){"use strict";var e=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function i(t){return _.getComputedStyle(t)}function r(t,e){var i;return b(t)?t:"string"==(i=a(t))&&!e&&t?w.call(g.querySelectorAll(t),0):t&&"object"==i&&"length"in t?w.call(t,0):t?[t]:[]}function s(t){return"absolute"===t.position||!0===t.absolute}function n(t,e){for(var i,r=e.length;-1<--r;)if(i=e[r],t.substr(0,i.length)===i)return i.length}function o(t,e){void 0===t&&(t="");var i=~t.indexOf("++"),r=1;return i&&(t=t.split("++").join("")),function(){return"<"+e+" style='position:relative;display:inline-block;'"+(t?" class='"+t+(i?r++:"")+"'>":">")}}function h(t,e,i){var r=t.nodeType;if(1===r||9===r||11===r)for(t=t.firstChild;t;t=t.nextSibling)h(t,e,i);else 3!==r&&4!==r||(t.nodeValue=t.nodeValue.split(e).join(i))}function l(t,e){for(var i=e.length;-1<--i;)t.push(e[i])}function u(t,e,i){for(var r;t&&t!==e;){if(r=t._next||t.nextSibling)return r.textContent.charAt(0)===i;t=t.parentNode||t._parent}}function c(t){var e,i,s=r(t.childNodes),n=s.length;for(e=0;e<n;e++)(i=s[e])._isSplit?c(i):(e&&3===i.previousSibling.nodeType?i.previousSibling.nodeValue+=3===i.nodeType?i.nodeValue:i.firstChild.nodeValue:3!==i.nodeType&&t.insertBefore(i.firstChild,i),t.removeChild(i))}function d(t,e){return parseFloat(e[t])||0}function p(t,e,r,n,a,o,p){var f,m,_,v,D,y,x,b,w,E,C,T,S=i(t),F=d("paddingLeft",S),P=-999,R=d("borderBottomWidth",S)+d("borderTopWidth",S),k=d("borderLeftWidth",S)+d("borderRightWidth",S),A=d("paddingTop",S)+d("paddingBottom",S),M=d("paddingLeft",S)+d("paddingRight",S),O=.2*d("fontSize",S),B=S.textAlign,L=[],z=[],I=[],N=e.wordDelimiter||" ",U=e.tag?e.tag:e.span?"span":"div",V=e.type||e.split||"chars,words,lines",j=a&&~V.indexOf("lines")?[]:null,X=~V.indexOf("words"),H=~V.indexOf("chars"),W=s(e),Y=e.linesClass,q=~(Y||"").indexOf("++"),G=[];for(q&&(Y=Y.split("++").join("")),_=(m=t.getElementsByTagName("*")).length,D=[],f=0;f<_;f++)D[f]=m[f];if(j||W)for(f=0;f<_;f++)((y=(v=D[f]).parentNode===t)||W||H&&!X)&&(T=v.offsetTop,j&&y&&Math.abs(T-P)>O&&("BR"!==v.nodeName||0===f)&&(x=[],j.push(x),P=T),W&&(v._x=v.offsetLeft,v._y=T,v._w=v.offsetWidth,v._h=v.offsetHeight),j&&((v._isSplit&&y||!H&&y||X&&y||!X&&v.parentNode.parentNode===t&&!v.parentNode._isSplit)&&(x.push(v),v._x-=F,u(v,t,N)&&(v._wordEnd=!0)),"BR"===v.nodeName&&(v.nextSibling&&"BR"===v.nextSibling.nodeName||0===f)&&j.push([])));for(f=0;f<_;f++)y=(v=D[f]).parentNode===t,"BR"!==v.nodeName?(W&&(w=v.style,X||y||(v._x+=v.parentNode._x,v._y+=v.parentNode._y),w.left=v._x+"px",w.top=v._y+"px",w.position="absolute",w.display="block",w.width=v._w+1+"px",w.height=v._h+"px"),!X&&H?v._isSplit?(v._next=v.nextSibling,v.parentNode.appendChild(v)):v.parentNode._isSplit?(v._parent=v.parentNode,!v.previousSibling&&v.firstChild&&(v.firstChild._isFirst=!0),v.nextSibling&&" "===v.nextSibling.textContent&&!v.nextSibling.nextSibling&&G.push(v.nextSibling),v._next=v.nextSibling&&v.nextSibling._isFirst?null:v.nextSibling,v.parentNode.removeChild(v),D.splice(f--,1),_--):y||(T=!v.nextSibling&&u(v.parentNode,t,N),v.parentNode._parent&&v.parentNode._parent.appendChild(v),T&&v.parentNode.appendChild(g.createTextNode(" ")),"span"===U&&(v.style.display="inline"),L.push(v)):v.parentNode._isSplit&&!v._isSplit&&""!==v.innerHTML?z.push(v):H&&!v._isSplit&&("span"===U&&(v.style.display="inline"),L.push(v))):j||W?(v.parentNode&&v.parentNode.removeChild(v),D.splice(f--,1),_--):X||t.appendChild(v);for(f=G.length;-1<--f;)G[f].parentNode.removeChild(G[f]);if(j){for(W&&(E=g.createElement(U),t.appendChild(E),C=E.offsetWidth+"px",T=E.offsetParent===t?0:t.offsetLeft,t.removeChild(E)),w=t.style.cssText,t.style.cssText="display:none;";t.firstChild;)t.removeChild(t.firstChild);for(b=" "===N&&(!W||!X&&!H),f=0;f<j.length;f++){for(x=j[f],(E=g.createElement(U)).style.cssText="display:block;text-align:"+B+";position:"+(W?"absolute;":"relative;"),Y&&(E.className=Y+(q?f+1:"")),I.push(E),_=x.length,m=0;m<_;m++)"BR"!==x[m].nodeName&&(v=x[m],E.appendChild(v),b&&v._wordEnd&&E.appendChild(g.createTextNode(" ")),W&&(0===m&&(E.style.top=v._y+"px",E.style.left=F+T+"px"),v.style.top="0px",T&&(v.style.left=v._x-T+"px")));0===_?E.innerHTML="&nbsp;":X||H||(c(E),h(E,String.fromCharCode(160)," ")),W&&(E.style.width=C,E.style.height=v._h+"px"),t.appendChild(E)}t.style.cssText=w}W&&(p>t.clientHeight&&(t.style.height=p-A+"px",t.clientHeight<p&&(t.style.height=p+R+"px")),o>t.clientWidth&&(t.style.width=o-M+"px",t.clientWidth<o&&(t.style.width=o+k+"px"))),l(r,L),X&&l(n,z),l(a,I)}function f(t,i,r,a){var o,l,u,c,d,p,f,m,_=i.tag?i.tag:i.span?"span":"div",v=~(i.type||i.split||"chars,words,lines").indexOf("chars"),D=s(i),b=i.wordDelimiter||" ",w=" "!==b?"":D?"&#173; ":" ",E="</"+_+">",C=1,T=i.specialChars?"function"==typeof i.specialChars?i.specialChars:n:null,S=g.createElement("div"),F=t.parentNode;for(F.insertBefore(S,t),S.textContent=t.nodeValue,F.removeChild(t),f=-1!==(o=function t(e){var i=e.nodeType,r="";if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=t(e)}else if(3===i||4===i)return e.nodeValue;return r}(t=S)).indexOf("<"),!1!==i.reduceWhiteSpace&&(o=o.replace(x," ").replace(y,"")),f&&(o=o.split("<").join("{{LT}}")),d=o.length,l=(" "===o.charAt(0)?w:"")+r(),u=0;u<d;u++)if(p=o.charAt(u),T&&(m=T(o.substr(u),i.specialChars)))p=o.substr(u,m||1),l+=v&&" "!==p?a()+p+"</"+_+">":p,u+=m-1;else if(p===b&&o.charAt(u-1)!==b&&u){for(l+=C?E:"",C=0;o.charAt(u+1)===b;)l+=w,u++;u===d-1?l+=w:")"!==o.charAt(u+1)&&(l+=w+r(),C=1)}else"{"===p&&"{{LT}}"===o.substr(u,6)?(l+=v?a()+"{{LT}}</"+_+">":"{{LT}}",u+=5):55296<=p.charCodeAt(0)&&p.charCodeAt(0)<=56319||65024<=o.charCodeAt(u+1)&&o.charCodeAt(u+1)<=65039?(c=((o.substr(u,12).split(e)||[])[1]||"").length||2,l+=v&&" "!==p?a()+o.substr(u,c)+"</"+_+">":o.substr(u,c),u+=c-1):l+=v&&" "!==p?a()+p+"</"+_+">":p;t.outerHTML=l+(C?E:""),f&&h(F,"{{LT}}","<")}function m(t,e,n,a){var o,h,l=r(t.childNodes),u=l.length,c=s(e);if(3!==t.nodeType||1<u){for(e.absolute=!1,o=0;o<u;o++)3===(h=l[o]).nodeType&&!/\S+/.test(h.nodeValue)||(c&&3!==h.nodeType&&"inline"===i(h).display&&(h.style.display="inline-block",h.style.position="relative"),h._isSplit=!0,m(h,e,n,a));return e.absolute=c,void(t._isSplit=!0)}f(t,e,n,a)}var g,_,v,D,y=/(?:\r|\n|\t\t)/g,x=/(?:\s\s+)/g,b=Array.isArray,w=[].slice,E=((D=C.prototype).split=function(t){this.isSplit&&this.revert(),this.vars=t=t||this.vars,this._originals.length=this.chars.length=this.words.length=this.lines.length=0;for(var e,i,r,s=this.elements.length,n=t.tag?t.tag:t.span?"span":"div",a=o(t.wordsClass,n),h=o(t.charsClass,n);-1<--s;)r=this.elements[s],this._originals[s]=r.innerHTML,e=r.clientHeight,i=r.clientWidth,m(r,t,a,h),p(r,t,this.chars,this.words,this.lines,i,e);return this.chars.reverse(),this.words.reverse(),this.lines.reverse(),this.isSplit=!0,this},D.revert=function(){var t=this._originals;if(!t)throw"revert() call wasn't scoped properly.";return this.elements.forEach((function(e,i){return e.innerHTML=t[i]})),this.chars=[],this.words=[],this.lines=[],this.isSplit=!1,this},C.create=function(t,e){return new C(t,e)},C);function C(t,e){v||(g=document,_=window,v=1),this.elements=r(t),this.chars=[],this.words=[],this.lines=[],this._originals=[],this.vars=e||{},this.split(e)}E.version="3.0.0",t.SplitText=E,t.default=E,Object.defineProperty(t,"__esModule",{value:!0})},"object"==a(e)?n(e):(r=[e],void 0===(s="function"==typeof(i=n)?i.apply(e,r):i)||(t.exports=s))}},e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={exports:{}};return t[r].call(s.exports,s,s.exports,i),s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var r,s,n,a,o,h,l,u,c,d,p,f,m,g,_,v,D,y,x,b,w,E,C,T,S,F,P,R,k={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},A={duration:.5,overwrite:!1,delay:0},M=1e8,O=1e-8,B=2*Math.PI,L=B/4,z=0,I=Math.sqrt,N=Math.cos,U=Math.sin,V=function(t){return"string"==typeof t},j=function(t){return"function"==typeof t},X=function(t){return"number"==typeof t},H=function(t){return void 0===t},W=function(t){return"object"==typeof t},Y=function(t){return!1!==t},q=function(){return"undefined"!=typeof window},G=function(t){return j(t)||V(t)},K="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Q=Array.isArray,Z=/(?:-?\.?\d|\.)+/gi,$=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,J=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,tt=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,et=/[+-]=-?[.\d]+/,it=/[#\-+.]*\b[a-z\d-=+%.]+/gi,rt=/[\d.+\-=]+(?:e[-+]\d*)*/i,st={},nt={},at=function(t){return(nt=At(t,st))&&gi},ot=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},ht=function(t,e){return!e&&console.warn(t)},lt=function(t,e){return t&&(st[t]=e)&&nt&&(nt[t]=e)||st},ut=function(){return 0},ct={},dt=[],pt={},ft={},mt={},gt=30,_t=[],vt="",Dt=function(t){var e,i,r=t[0];if(W(r)||j(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(i=_t.length;i--&&!_t[i].targetTest(r););e=_t[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Ve(t[i],e)))||t.splice(i,1);return t},yt=function(t){return t._gsap||Dt(ae(t))[0]._gsap},xt=function(t,e,i){return(i=t[e])&&j(i)?t[e]():H(i)&&t.getAttribute&&t.getAttribute(e)||i},bt=function(t,e){return(t=t.split(",")).forEach(e)||t},wt=function(t){return Math.round(1e5*t)/1e5||0},Et=function(t,e){for(var i=e.length,r=0;t.indexOf(e[r])<0&&++r<i;);return r<i},Ct=function(t,e,i){var r,s=X(t[1]),n=(s?2:1)+(e<2?0:1),a=t[n];if(s&&(a.duration=t[1]),a.parent=i,e){for(r=a;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=Y(i.vars.inherit)&&i.parent;a.immediateRender=Y(r.immediateRender),e<2?a.runBackwards=1:a.startAt=t[n-1]}return a},Tt=function(){var t,e,i=dt.length,r=dt.slice(0);for(pt={},dt.length=0,t=0;t<i;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},St=function(t,e,i,r){dt.length&&Tt(),t.render(e,i,r),dt.length&&Tt()},Ft=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(it).length<2?e:V(t)?t.trim():t},Pt=function(t){return t},Rt=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},kt=function(t,e){for(var i in e)i in t||"duration"===i||"ease"===i||(t[i]=e[i])},At=function(t,e){for(var i in e)t[i]=e[i];return t},Mt=function t(e,i){for(var r in i)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=W(i[r])?t(e[r]||(e[r]={}),i[r]):i[r]);return e},Ot=function(t,e){var i,r={};for(i in t)i in e||(r[i]=t[i]);return r},Bt=function(t){var e=t.parent||s,i=t.keyframes?kt:Rt;if(Y(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},Lt=function(t,e,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var s=e._prev,n=e._next;s?s._next=n:t[i]===e&&(t[i]=n),n?n._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},zt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},It=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Nt=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Ut=function t(e){return!e||e._ts&&t(e.parent)},Vt=function(t){return t._repeat?jt(t._tTime,t=t.duration()+t._rDelay)*t:0},jt=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},Xt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ht=function(t){return t._end=wt(t._start+(t._tDur/Math.abs(t._ts||t._rts||O)||0))},Wt=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=wt(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ht(t),i._dirty||It(i,t)),t},Yt=function(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=Xt(t.rawTime(),e),(!e._dur||ie(0,e.totalDuration(),i)-e._tTime>O)&&e.render(i,!0)),It(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},qt=function(t,e,i,r){return e.parent&&zt(e),e._start=wt(i+e._delay),e._end=wt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,i,r,s){void 0===i&&(i="_first"),void 0===r&&(r="_last");var n,a=t[r];if(s)for(n=e[s];a&&a[s]>n;)a=a._prev;a?(e._next=a._next,a._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[r]=e,e._prev=a,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,r||Yt(t,e),t},Gt=function(t,e){return(st.ScrollTrigger||ot("scrollTrigger",e))&&st.ScrollTrigger.create(e,t)},Kt=function(t,e,i,r){return Ge(t,e),t._initted?!i&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&l!==Fe.frame?(dt.push(t),t._lazy=[e,r],1):void 0:1},Qt=function t(e){var i=e.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||t(i))},Zt=function(t,e,i,r){var s=t._repeat,n=wt(e)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=n/t._dur),t._dur=n,t._tDur=s?s<0?1e10:wt(n*(s+1)+t._rDelay*s):n,a&&!r?Wt(t,t._tTime=t._tDur*a):t.parent&&Ht(t),i||It(t.parent,t),t},$t=function(t){return t instanceof Xe?It(t):Zt(t,t._dur)},Jt={_start:0,endTime:ut},te=function t(e,i){var r,s,n=e.labels,a=e._recent||Jt,o=e.duration()>=M?a.endTime(!1):e._dur;return V(i)&&(isNaN(i)||i in n)?"<"===(r=i.charAt(0))||">"===r?("<"===r?a._start:a.endTime(a._repeat>=0))+(parseFloat(i.substr(1))||0):(r=i.indexOf("="))<0?(i in n||(n[i]=o),n[i]):(s=+(i.charAt(r-1)+i.substr(r+1)),r>1?t(e,i.substr(0,r-1))+s:o+s):null==i?o:+i},ee=function(t,e){return t||0===t?e(t):e},ie=function(t,e,i){return i<t?t:i>e?e:i},re=function(t){if("string"!=typeof t)return"";var e=rt.exec(t);return e?t.substr(e.index+e[0].length):""},se=[].slice,ne=function(t,e){return t&&W(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&W(t[0]))&&!t.nodeType&&t!==n},ae=function(t,e){return!V(t)||e||!a&&Pe()?Q(t)?function(t,e,i){return void 0===i&&(i=[]),t.forEach((function(t){var r;return V(t)&&!e||ne(t,1)?(r=i).push.apply(r,ae(t)):i.push(t)}))||i}(t,e):ne(t)?se.call(t,0):t?[t]:[]:se.call(o.querySelectorAll(t),0)},oe=function(t){return t.sort((function(){return.5-Math.random()}))},he=function(t){if(j(t))return t;var e=W(t)?t:{each:t},i=Le(e.ease),r=e.from||0,s=parseFloat(e.base)||0,n={},a=r>0&&r<1,o=isNaN(r)||a,h=e.axis,l=r,u=r;return V(r)?l=u={center:.5,edges:.5,end:1}[r]||0:!a&&o&&(l=r[0],u=r[1]),function(t,a,c){var d,p,f,m,g,_,v,D,y,x=(c||e).length,b=n[x];if(!b){if(!(y="auto"===e.grid?0:(e.grid||[1,M])[1])){for(v=-M;v<(v=c[y++].getBoundingClientRect().left)&&y<x;);y--}for(b=n[x]=[],d=o?Math.min(y,x)*l-.5:r%y,p=o?x*u/y-.5:r/y|0,v=0,D=M,_=0;_<x;_++)f=_%y-d,m=p-(_/y|0),b[_]=g=h?Math.abs("y"===h?m:f):I(f*f+m*m),g>v&&(v=g),g<D&&(D=g);"random"===r&&oe(b),b.max=v-D,b.min=D,b.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(y>x?x-1:h?"y"===h?x/y:y:Math.max(y,x/y))||0)*("edges"===r?-1:1),b.b=x<0?s-x:s,b.u=re(e.amount||e.each)||0,i=i&&x<0?Oe(i):i}return x=(b[t]-b.min)/b.max||0,wt(b.b+(i?i(x):x)*b.v)+b.u}},le=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(i){var r=Math.round(parseFloat(i)/t)*t*e;return(r-r%1)/e+(X(i)?0:re(i))}},ue=function(t,e){var i,r,s=Q(t);return!s&&W(t)&&(i=s=t.radius||M,t.values?(t=ae(t.values),(r=!X(t[0]))&&(i*=i)):t=le(t.increment)),ee(e,s?j(t)?function(e){return r=t(e),Math.abs(r-e)<=i?r:e}:function(e){for(var s,n,a=parseFloat(r?e.x:e),o=parseFloat(r?e.y:0),h=M,l=0,u=t.length;u--;)(s=r?(s=t[u].x-a)*s+(n=t[u].y-o)*n:Math.abs(t[u]-a))<h&&(h=s,l=u);return l=!i||h<=i?t[l]:e,r||l===e||X(e)?l:l+re(e)}:le(t))},ce=function(t,e,i,r){return ee(Q(t)?!e:!0===i?!!(i=0):!r,(function(){return Q(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*r)/r}))},de=function(t,e,i){return ee(i,(function(i){return t[~~e(i)]}))},pe=function(t){for(var e,i,r,s,n=0,a="";~(e=t.indexOf("random(",n));)r=t.indexOf(")",e),s="["===t.charAt(e+7),i=t.substr(e+7,r-e-7).match(s?it:Z),a+=t.substr(n,e-n)+ce(s?i:+i[0],s?0:+i[1],+i[2]||1e-5),n=r+1;return a+t.substr(n,t.length-n)},fe=function(t,e,i,r,s){var n=e-t,a=r-i;return ee(s,(function(e){return i+((e-t)/n*a||0)}))},me=function(t,e,i){var r,s,n,a=t.labels,o=M;for(r in a)(s=a[r]-e)<0==!!i&&s&&o>(s=Math.abs(s))&&(n=r,o=s);return n},ge=function(t,e,i){var r,s,n=t.vars,a=n[e];if(a)return r=n[e+"Params"],s=n.callbackScope||t,i&&dt.length&&Tt(),r?a.apply(s,r):a.call(s)},_e=function(t){return zt(t),t.progress()<1&&ge(t,"onInterrupt"),t},ve=function(t){var e=(t=!t.name&&t.default||t).name,i=j(t),r=e&&!i&&t.init?function(){this._props=[]}:t,s={init:ut,render:oi,add:Ye,kill:li,modifier:hi,rawVars:0},n={targetTest:0,get:0,getSetter:ri,aliases:{},register:0};if(Pe(),t!==r){if(ft[e])return;Rt(r,Rt(Ot(t,s),n)),At(r.prototype,At(s,Ot(t,n))),ft[r.prop=e]=r,t.targetTest&&(_t.push(r),ct[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}lt(e,r),t.register&&t.register(gi,r,di)},De=255,ye={aqua:[0,De,De],lime:[0,De,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,De],navy:[0,0,128],white:[De,De,De],olive:[128,128,0],yellow:[De,De,0],orange:[De,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[De,0,0],pink:[De,192,203],cyan:[0,De,De],transparent:[De,De,De,0]},xe=function(t,e,i){return(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*De+.5|0},be=function(t,e,i){var r,s,n,a,o,h,l,u,c,d,p=t?X(t)?[t>>16,t>>8&De,t&De]:0:ye.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),ye[t])p=ye[t];else if("#"===t.charAt(0)){if(t.length<6&&(r=t.charAt(1),s=t.charAt(2),n=t.charAt(3),t="#"+r+r+s+s+n+n+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(p=parseInt(t.substr(1,6),16))>>16,p>>8&De,p&De,parseInt(t.substr(7),16)/255];p=[(t=parseInt(t.substr(1),16))>>16,t>>8&De,t&De]}else if("hsl"===t.substr(0,3))if(p=d=t.match(Z),e){if(~t.indexOf("="))return p=t.match($),i&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,o=+p[1]/100,r=2*(h=+p[2]/100)-(s=h<=.5?h*(o+1):h+o-h*o),p.length>3&&(p[3]*=1),p[0]=xe(a+1/3,r,s),p[1]=xe(a,r,s),p[2]=xe(a-1/3,r,s);else p=t.match(Z)||ye.transparent;p=p.map(Number)}return e&&!d&&(r=p[0]/De,s=p[1]/De,n=p[2]/De,h=((l=Math.max(r,s,n))+(u=Math.min(r,s,n)))/2,l===u?a=o=0:(c=l-u,o=h>.5?c/(2-l-u):c/(l+u),a=l===r?(s-n)/c+(s<n?6:0):l===s?(n-r)/c+2:(r-s)/c+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*o+.5),p[2]=~~(100*h+.5)),i&&p.length<4&&(p[3]=1),p},we=function(t){var e=[],i=[],r=-1;return t.split(Ce).forEach((function(t){var s=t.match(J)||[];e.push.apply(e,s),i.push(r+=s.length+1)})),e.c=i,e},Ee=function(t,e,i){var r,s,n,a,o="",h=(t+o).match(Ce),l=e?"hsla(":"rgba(",u=0;if(!h)return t;if(h=h.map((function(t){return(t=be(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),i&&(n=we(t),(r=i.c).join(o)!==n.c.join(o)))for(a=(s=t.replace(Ce,"1").split(J)).length-1;u<a;u++)o+=s[u]+(~r.indexOf(u)?h.shift()||l+"0,0,0,0)":(n.length?n:h.length?h:i).shift());if(!s)for(a=(s=t.split(Ce)).length-1;u<a;u++)o+=s[u]+h[u];return o+s[a]},Ce=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in ye)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Te=/hsl[a]?\(/,Se=function(t){var e,i=t.join(" ");if(Ce.lastIndex=0,Ce.test(i))return e=Te.test(i),t[1]=Ee(t[1],e),t[0]=Ee(t[0],e,we(t[1])),!0},Fe=(v=Date.now,D=500,y=33,x=v(),b=x,E=w=1e3/240,T=function t(e){var i,r,s,n,a=v()-b,o=!0===e;if(a>D&&(x+=a-y),((i=(s=(b+=a)-x)-E)>0||o)&&(n=++m.frame,g=s-1e3*m.time,m.time=s/=1e3,E+=i+(i>=w?4:w-i),r=1),o||(d=p(t)),r)for(_=0;_<C.length;_++)C[_](s,g,n,e)},m={time:0,frame:0,tick:function(){T(!0)},deltaRatio:function(t){return g/(1e3/(t||60))},wake:function(){h&&(!a&&q()&&(n=a=window,o=n.document||{},st.gsap=gi,(n.gsapVersions||(n.gsapVersions=[])).push(gi.version),at(nt||n.GreenSockGlobals||!n.gsap&&n||{}),f=n.requestAnimationFrame),d&&m.sleep(),p=f||function(t){return setTimeout(t,E-1e3*m.time+1|0)},c=1,T(2))},sleep:function(){(f?n.cancelAnimationFrame:clearTimeout)(d),c=0,p=ut},lagSmoothing:function(t,e){D=t||1e8,y=Math.min(e,D,0)},fps:function(t){w=1e3/(t||240),E=1e3*m.time+w},add:function(t){C.indexOf(t)<0&&C.push(t),Pe()},remove:function(t){var e;~(e=C.indexOf(t))&&C.splice(e,1)&&_>=e&&_--},_listeners:C=[]}),Pe=function(){return!c&&Fe.wake()},Re={},ke=/^[\d.\-M][\d.\-,\s]/,Ae=/["']/g,Me=function(t){for(var e,i,r,s={},n=t.substr(1,t.length-3).split(":"),a=n[0],o=1,h=n.length;o<h;o++)i=n[o],e=o!==h-1?i.lastIndexOf(","):i.length,r=i.substr(0,e),s[a]=isNaN(r)?r.replace(Ae,"").trim():+r,a=i.substr(e+1).trim();return s},Oe=function(t){return function(e){return 1-t(1-e)}},Be=function t(e,i){for(var r,s=e._first;s;)s instanceof Xe?t(s,i):!s.vars.yoyoEase||s._yoyo&&s._repeat||s._yoyo===i||(s.timeline?t(s.timeline,i):(r=s._ease,s._ease=s._yEase,s._yEase=r,s._yoyo=i)),s=s._next},Le=function(t,e){return t&&(j(t)?t:Re[t]||function(t){var e,i,r,s,n=(t+"").split("("),a=Re[n[0]];return a&&n.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[Me(n[1])]:(e=t,i=e.indexOf("(")+1,r=e.indexOf(")"),s=e.indexOf("(",i),e.substring(i,~s&&s<r?e.indexOf(")",r+1):r)).split(",").map(Ft)):Re._CE&&ke.test(t)?Re._CE("",t):a}(t))||e},ze=function(t,e,i,r){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var s,n={easeIn:e,easeOut:i,easeInOut:r};return bt(t,(function(t){for(var e in Re[t]=st[t]=n,Re[s=t.toLowerCase()]=i,n)Re[s+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Re[t+"."+e]=n[e]})),n},Ie=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Ne=function t(e,i,r){var s=i>=1?i:1,n=(r||(e?.3:.45))/(i<1?i:1),a=n/B*(Math.asin(1/s)||0),o=function(t){return 1===t?1:s*Math.pow(2,-10*t)*U((t-a)*n)+1},h="out"===e?o:"in"===e?function(t){return 1-o(1-t)}:Ie(o);return n=B/n,h.config=function(i,r){return t(e,i,r)},h},Ue=function t(e,i){void 0===i&&(i=1.70158);var r=function(t){return t?--t*t*((i+1)*t+i)+1:0},s="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:Ie(r);return s.config=function(i){return t(e,i)},s};bt("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var i=e<5?e+1:e;ze(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},(function(t){return 1-Math.pow(1-t,i)}),(function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2}))})),Re.Linear.easeNone=Re.none=Re.Linear.easeIn,ze("Elastic",Ne("in"),Ne("out"),Ne()),S=7.5625,P=1/(F=2.75),ze("Bounce",(function(t){return 1-R(1-t)}),R=function(t){return t<P?S*t*t:t<.7272727272727273?S*Math.pow(t-1.5/F,2)+.75:t<.9090909090909092?S*(t-=2.25/F)*t+.9375:S*Math.pow(t-2.625/F,2)+.984375}),ze("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),ze("Circ",(function(t){return-(I(1-t*t)-1)})),ze("Sine",(function(t){return 1===t?1:1-N(t*L)})),ze("Back",Ue("in"),Ue("out"),Ue()),Re.SteppedEase=Re.steps=st.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,r=t+(e?0:1),s=e?1:0;return function(t){return((r*ie(0,.99999999,t)|0)+s)*i}}},A.ease=Re["quad.out"],bt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return vt+=t+","+t+"Params,"}));var Ve=function(t,e){this.id=z++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:xt,this.set=e?e.getSetter:ri},je=function(){function t(t,e){var i=t.parent||s;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Zt(this,+t.duration,1,1),this.data=t.data,c||Fe.wake(),i&&qt(i,this,e||0===e?e:i._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Zt(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Pe(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Wt(this,t),!i._dp||i.parent||Yt(i,this);i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&qt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===O||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),St(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Vt(this))%this._dur||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Vt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?jt(this._tTime,i)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Xt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,Nt(this.totalTime(ie(-this._delay,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Pe(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=O)&&Math.abs(this._zTime)!==O))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&qt(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(Y(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Xt(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(e._ts||1),e=e._dp;return i},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,$t(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){return arguments.length?(this._rDelay=t,$t(this)):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(te(this,t),Y(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,Y(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-O))},e.eventCallback=function(t,e,i){var r=this.vars;return arguments.length>1?(e?(r[t]=e,i&&(r[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise((function(i){var r=j(t)?t:Pt,s=function(){var t=e.then;e.then=null,j(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),i(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?s():e._prom=s}))},e.kill=function(){_e(this)},t}();Rt(je.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Xe=function(i){function r(e,r){var s;return void 0===e&&(e={}),(s=i.call(this,e,r)||this).labels={},s.smoothChildTiming=!!e.smoothChildTiming,s.autoRemoveChildren=!!e.autoRemoveChildren,s._sort=Y(e.sortChildren),s.parent&&Yt(s.parent,t(s)),e.scrollTrigger&&Gt(t(s),e.scrollTrigger),s}e(r,i);var n=r.prototype;return n.to=function(t,e,i){return new $e(t,Ct(arguments,0,this),te(this,X(e)?arguments[3]:i)),this},n.from=function(t,e,i){return new $e(t,Ct(arguments,1,this),te(this,X(e)?arguments[3]:i)),this},n.fromTo=function(t,e,i,r){return new $e(t,Ct(arguments,2,this),te(this,X(e)?arguments[4]:r)),this},n.set=function(t,e,i){return e.duration=0,e.parent=this,Bt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new $e(t,e,te(this,i),1),this},n.call=function(t,e,i){return qt(this,$e.delayedCall(0,t,e),te(this,i))},n.staggerTo=function(t,e,i,r,s,n,a){return i.duration=e,i.stagger=i.stagger||r,i.onComplete=n,i.onCompleteParams=a,i.parent=this,new $e(t,i,te(this,s)),this},n.staggerFrom=function(t,e,i,r,s,n,a){return i.runBackwards=1,Bt(i).immediateRender=Y(i.immediateRender),this.staggerTo(t,e,i,r,s,n,a)},n.staggerFromTo=function(t,e,i,r,s,n,a,o){return r.startAt=i,Bt(r).immediateRender=Y(r.immediateRender),this.staggerTo(t,e,r,s,n,a,o)},n.render=function(t,e,i){var r,n,a,o,h,l,u,c,d,p,f,m,g=this._time,_=this._dirty?this.totalDuration():this._tDur,v=this._dur,D=this!==s&&t>_-O&&t>=0?_:t<O?0:t,y=this._zTime<0!=t<0&&(this._initted||!v);if(D!==this._tTime||i||y){if(g!==this._time&&v&&(D+=this._time-g,t+=this._time-g),r=D,d=this._start,l=!(c=this._ts),y&&(v||(g=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(f=this._yoyo,h=v+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*h+t,e,i);if(r=wt(D%h),D===_?(o=this._repeat,r=v):((o=~~(D/h))&&o===D/h&&(r=v,o--),r>v&&(r=v)),p=jt(this._tTime,h),!g&&this._tTime&&p!==o&&(p=o),f&&1&o&&(r=v-r,m=1),o!==p&&!this._lock){var x=f&&1&p,b=x===(f&&1&o);if(o<p&&(x=!x),g=x?0:v,this._lock=1,this.render(g||(m?0:wt(o*h)),e,!v)._lock=0,!e&&this.parent&&ge(this,"onRepeat"),this.vars.repeatRefresh&&!m&&(this.invalidate()._lock=1),g!==this._time||l!==!this._ts)return this;if(v=this._dur,_=this._tDur,b&&(this._lock=2,g=x?v:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!m&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Be(this,m)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function(t,e,i){var r;if(i>e)for(r=t._first;r&&r._start<=i;){if(!r._dur&&"isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(!r._dur&&"isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,wt(g),wt(r)))&&(D-=r-(r=u._start)),this._tTime=D,this._time=r,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,g=0),!g&&(r||!v&&t>=0)&&!e&&ge(this,"onStart"),r>=g&&t>=0)for(n=this._first;n;){if(a=n._next,(n._act||r>=n._start)&&n._ts&&u!==n){if(n.parent!==this)return this.render(t,e,i);if(n.render(n._ts>0?(r-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(r-n._start)*n._ts,e,i),r!==this._time||!this._ts&&!l){u=0,a&&(D+=this._zTime=-1e-8);break}}n=a}else{n=this._last;for(var w=t<0?t:r;n;){if(a=n._prev,(n._act||w<=n._end)&&n._ts&&u!==n){if(n.parent!==this)return this.render(t,e,i);if(n.render(n._ts>0?(w-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(w-n._start)*n._ts,e,i),r!==this._time||!this._ts&&!l){u=0,a&&(D+=this._zTime=w?-1e-8:O);break}}n=a}}if(u&&!e&&(this.pause(),u.render(r>=g?0:-1e-8)._zTime=r>=g?1:-1,this._ts))return this._start=d,Ht(this),this.render(t,e,i);this._onUpdate&&!e&&ge(this,"onUpdate",!0),(D===_&&_>=this.totalDuration()||!D&&g)&&(d!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||((t||!v)&&(D===_&&this._ts>0||!D&&this._ts<0)&&zt(this,1),e||t<0&&!g||!D&&!g||(ge(this,D===_?"onComplete":"onReverseComplete",!0),this._prom&&!(D<_&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var i=this;if(X(e)||(e=te(this,e)),!(t instanceof je)){if(Q(t))return t.forEach((function(t){return i.add(t,e)})),this;if(V(t))return this.addLabel(t,e);if(!j(t))return this;t=$e.delayedCall(0,t)}return this!==t?qt(this,t,e):this},n.getChildren=function(t,e,i,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===r&&(r=-M);for(var s=[],n=this._first;n;)n._start>=r&&(n instanceof $e?e&&s.push(n):(i&&s.push(n),t&&s.push.apply(s,n.getChildren(!0,e,i)))),n=n._next;return s},n.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},n.remove=function(t){return V(t)?this.removeLabel(t):j(t)?this.killTweensOf(t):(Lt(this,t),t===this._recent&&(this._recent=this._last),It(this))},n.totalTime=function(t,e){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=wt(Fe.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),i.prototype.totalTime.call(this,t,e),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=te(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,i){var r=$e.delayedCall(0,e||ut,i);return r.data="isPause",this._hasPause=1,qt(this,r,te(this,t))},n.removePause=function(t){var e=this._first;for(t=te(this,t);e;)e._start===t&&"isPause"===e.data&&zt(e),e=e._next},n.killTweensOf=function(t,e,i){for(var r=this.getTweensOf(t,i),s=r.length;s--;)He!==r[s]&&r[s].kill(t,e);return this},n.getTweensOf=function(t,e){for(var i,r=[],s=ae(t),n=this._first,a=X(e);n;)n instanceof $e?Et(n._targets,s)&&(a?(!He||n._initted&&n._ts)&&n.globalTime(0)<=e&&n.globalTime(n.totalDuration())>e:!e||n.isActive())&&r.push(n):(i=n.getTweensOf(s,e)).length&&r.push.apply(r,i),n=n._next;return r},n.tweenTo=function(t,e){e=e||{};var i=this,r=te(i,t),s=e,n=s.startAt,a=s.onStart,o=s.onStartParams,h=s.immediateRender,l=$e.to(i,Rt({ease:"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(n&&"time"in n?n.time:i._time))/i.timeScale())||O,onStart:function(){i.pause();var t=e.duration||Math.abs((r-i._time)/i.timeScale());l._dur!==t&&Zt(l,t,0,1).render(l._time,!0,!0),a&&a.apply(l,o||[])}},e));return h?l.render(0):l},n.tweenFromTo=function(t,e,i){return this.tweenTo(e,Rt({startAt:{time:te(this,t)}},i))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),me(this,te(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),me(this,te(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+O)},n.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var r,s=this._first,n=this.labels;s;)s._start>=i&&(s._start+=t,s._end+=t),s=s._next;if(e)for(r in n)n[r]>=i&&(n[r]+=t);return It(this)},n.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return i.prototype.invalidate.call(this)},n.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),It(this)},n.totalDuration=function(t){var e,i,r,n=0,a=this,o=a._last,h=M;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-t:t));if(a._dirty){for(r=a.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(i=o._start)>h&&a._sort&&o._ts&&!a._lock?(a._lock=1,qt(a,o,i-o._delay,1)._lock=0):h=i,i<0&&o._ts&&(n-=i,(!r&&!a._dp||r&&r.smoothChildTiming)&&(a._start+=i/a._ts,a._time-=i,a._tTime-=i),a.shiftChildren(-i,!1,-Infinity),h=0),o._end>n&&o._ts&&(n=o._end),o=e;Zt(a,a===s&&a._time>n?a._time:n,1,1),a._dirty=0}return a._tDur},r.updateRoot=function(t){if(s._ts&&(St(s,Xt(t,s)),l=Fe.frame),Fe.frame>=gt){gt+=k.autoSleep||120;var e=s._first;if((!e||!e._ts)&&k.autoSleep&&Fe._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Fe.sleep()}}},r}(je);Rt(Xe.prototype,{_lock:0,_hasPause:0,_forcing:0});var He,We=function(t,e,i,r,s,n,a){var o,h,l,u,c,d,p,f,m=new di(this._pt,t,e,0,1,ai,null,s),g=0,_=0;for(m.b=i,m.e=r,i+="",(p=~(r+="").indexOf("random("))&&(r=pe(r)),n&&(n(f=[i,r],t,e),i=f[0],r=f[1]),h=i.match(tt)||[];o=tt.exec(r);)u=o[0],c=r.substring(g,o.index),l?l=(l+1)%5:"rgba("===c.substr(-5)&&(l=1),u!==h[_++]&&(d=parseFloat(h[_-1])||0,m._pt={_next:m._pt,p:c||1===_?c:",",s:d,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-d,m:l&&l<4?Math.round:0},g=tt.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=a,(et.test(r)||p)&&(m.e=0),this._pt=m,m},Ye=function(t,e,i,r,s,n,a,o,h){j(r)&&(r=r(s||0,t,n));var l,u=t[e],c="get"!==i?i:j(u)?h?t[e.indexOf("set")||!j(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():u,d=j(u)?h?ei:ti:Je;if(V(r)&&(~r.indexOf("random(")&&(r=pe(r)),"="===r.charAt(1)&&(r=parseFloat(c)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(re(c)||0))),c!==r)return isNaN(c*r)?(!u&&!(e in t)&&ot(e,r),We.call(this,t,e,c,r,d,o||k.stringFilter,h)):(l=new di(this._pt,t,e,+c||0,r-(c||0),"boolean"==typeof u?ni:si,0,d),h&&(l.fp=h),a&&l.modifier(a,this,t),this._pt=l)},qe=function(t,e,i,r,s,n){var a,o,h,l;if(ft[t]&&!1!==(a=new ft[t]).init(s,a.rawVars?e[t]:function(t,e,i,r,s){if(j(t)&&(t=Ke(t,s,e,i,r)),!W(t)||t.style&&t.nodeType||Q(t)||K(t))return V(t)?Ke(t,s,e,i,r):t;var n,a={};for(n in t)a[n]=Ke(t[n],s,e,i,r);return a}(e[t],r,s,n,i),i,r,n)&&(i._pt=o=new di(i._pt,s,t,0,1,a.render,a,0,a.priority),i!==u))for(h=i._ptLookup[i._targets.indexOf(s)],l=a._props.length;l--;)h[a._props[l]]=o;return a},Ge=function t(e,i){var n,a,o,h,l,u,c,d,p,f,m,g,_,v=e.vars,D=v.ease,y=v.startAt,x=v.immediateRender,b=v.lazy,w=v.onUpdate,E=v.onUpdateParams,C=v.callbackScope,T=v.runBackwards,S=v.yoyoEase,F=v.keyframes,P=v.autoRevert,R=e._dur,k=e._startAt,M=e._targets,B=e.parent,L=B&&"nested"===B.data?B.parent._targets:M,z="auto"===e._overwrite&&!r,I=e.timeline;if(I&&(!F||!D)&&(D="none"),e._ease=Le(D,A.ease),e._yEase=S?Oe(Le(!0===S?D:S,A.ease)):0,S&&e._yoyo&&!e._repeat&&(S=e._yEase,e._yEase=e._ease,e._ease=S),!I){if(g=(d=M[0]?yt(M[0]).harness:0)&&v[d.prop],n=Ot(v,ct),k&&k.render(-1,!0).kill(),y){if(zt(e._startAt=$e.set(M,Rt({data:"isStart",overwrite:!1,parent:B,immediateRender:!0,lazy:Y(b),startAt:null,delay:0,onUpdate:w,onUpdateParams:E,callbackScope:C,stagger:0},y))),x)if(i>0)P||(e._startAt=0);else if(R&&!(i<0&&k))return void(i&&(e._zTime=i))}else if(T&&R)if(k)!P&&(e._startAt=0);else if(i&&(x=!1),o=Rt({overwrite:!1,data:"isFromStart",lazy:x&&Y(b),immediateRender:x,stagger:0,parent:B},n),g&&(o[d.prop]=g),zt(e._startAt=$e.set(M,o)),x){if(!i)return}else t(e._startAt,O);for(e._pt=0,b=R&&Y(b)||b&&!R,a=0;a<M.length;a++){if(c=(l=M[a])._gsap||Dt(M)[a]._gsap,e._ptLookup[a]=f={},pt[c.id]&&dt.length&&Tt(),m=L===M?a:L.indexOf(l),d&&!1!==(p=new d).init(l,g||n,e,m,L)&&(e._pt=h=new di(e._pt,l,p.name,0,1,p.render,p,0,p.priority),p._props.forEach((function(t){f[t]=h})),p.priority&&(u=1)),!d||g)for(o in n)ft[o]&&(p=qe(o,n,e,m,l,L))?p.priority&&(u=1):f[o]=h=Ye.call(e,l,o,"get",n[o],m,L,0,v.stringFilter);e._op&&e._op[a]&&e.kill(l,e._op[a]),z&&e._pt&&(He=e,s.killTweensOf(l,f,e.globalTime(0)),_=!e.parent,He=0),e._pt&&b&&(pt[c.id]=1)}u&&ci(e),e._onInit&&e._onInit(e)}e._from=!I&&!!v.runBackwards,e._onUpdate=w,e._initted=(!e._op||e._pt)&&!_},Ke=function(t,e,i,r,s){return j(t)?t.call(e,i,r,s):V(t)&&~t.indexOf("random(")?pe(t):t},Qe=vt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Ze=(Qe+",id,stagger,delay,duration,paused,scrollTrigger").split(","),$e=function(i){function n(e,n,a,o){var h;"number"==typeof n&&(a.duration=n,n=a,a=null);var l,u,c,d,p,f,m,g,_=(h=i.call(this,o?n:Bt(n),a)||this).vars,v=_.duration,D=_.delay,y=_.immediateRender,x=_.stagger,b=_.overwrite,w=_.keyframes,E=_.defaults,C=_.scrollTrigger,T=_.yoyoEase,S=h.parent,F=(Q(e)||K(e)?X(e[0]):"length"in n)?[e]:ae(e);if(h._targets=F.length?Dt(F):ht("GSAP target "+e+" not found. https://greensock.com",!k.nullTargetWarn)||[],h._ptLookup=[],h._overwrite=b,w||x||G(v)||G(D)){if(n=h.vars,(l=h.timeline=new Xe({data:"nested",defaults:E||{}})).kill(),l.parent=l._dp=t(h),l._start=0,w)Rt(l.vars.defaults,{ease:"none"}),w.forEach((function(t){return l.to(F,t,">")}));else{if(d=F.length,m=x?he(x):ut,W(x))for(p in x)~Qe.indexOf(p)&&(g||(g={}),g[p]=x[p]);for(u=0;u<d;u++){for(p in c={},n)Ze.indexOf(p)<0&&(c[p]=n[p]);c.stagger=0,T&&(c.yoyoEase=T),g&&At(c,g),f=F[u],c.duration=+Ke(v,t(h),u,f,F),c.delay=(+Ke(D,t(h),u,f,F)||0)-h._delay,!x&&1===d&&c.delay&&(h._delay=D=c.delay,h._start+=D,c.delay=0),l.to(f,c,m(u,f,F))}l.duration()?v=D=0:h.timeline=0}v||h.duration(v=l.duration())}else h.timeline=0;return!0!==b||r||(He=t(h),s.killTweensOf(F),He=0),S&&Yt(S,t(h)),(y||!v&&!w&&h._start===wt(S._time)&&Y(y)&&Ut(t(h))&&"nested"!==S.data)&&(h._tTime=-1e-8,h.render(Math.max(0,-D))),C&&Gt(t(h),C),h}e(n,i);var a=n.prototype;return a.render=function(t,e,i){var r,s,n,a,o,h,l,u,c,d=this._time,p=this._tDur,f=this._dur,m=t>p-O&&t>=0?p:t<O?0:t;if(f){if(m!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(r=m,u=this.timeline,this._repeat){if(a=f+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,i);if(r=wt(m%a),m===p?(n=this._repeat,r=f):((n=~~(m/a))&&n===m/a&&(r=f,n--),r>f&&(r=f)),(h=this._yoyo&&1&n)&&(c=this._yEase,r=f-r),o=jt(this._tTime,a),r===d&&!i&&this._initted)return this;n!==o&&(u&&this._yEase&&Be(u,h),!this.vars.repeatRefresh||h||this._lock||(this._lock=i=1,this.render(wt(a*n),!0).invalidate()._lock=0))}if(!this._initted){if(Kt(this,t<0?t:r,i,e))return this._tTime=0,this;if(f!==this._dur)return this.render(t,e,i)}for(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(c||this._ease)(r/f),this._from&&(this.ratio=l=1-l),r&&!d&&!e&&ge(this,"onStart"),s=this._pt;s;)s.r(l,s.d),s=s._next;u&&u.render(t<0?t:!r&&h?-1e-8:u._dur*l,e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,i),ge(this,"onUpdate")),this._repeat&&n!==o&&this.vars.onRepeat&&!e&&this.parent&&ge(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&zt(this,1),e||t<0&&!d||!m&&!d||(ge(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,i,r){var s,n,a,o=t.ratio,h=e<0||!e&&(!t._start&&Qt(t)||(t._ts<0||t._dp._ts<0)&&"isFromStart"!==t.data&&"isStart"!==t.data)?0:1,l=t._rDelay,u=0;if(l&&t._repeat&&(u=ie(0,t._tDur,e),n=jt(u,l),a=jt(t._tTime,l),t._yoyo&&1&n&&(h=1-h),n!==a&&(o=1-h,t.vars.repeatRefresh&&t._initted&&t.invalidate())),h!==o||r||t._zTime===O||!e&&t._zTime){if(!t._initted&&Kt(t,e,r,i))return;for(a=t._zTime,t._zTime=e||(i?O:0),i||(i=e&&!a),t.ratio=h,t._from&&(h=1-h),t._time=0,t._tTime=u,i||ge(t,"onStart"),s=t._pt;s;)s.r(h,s.d),s=s._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!i&&ge(t,"onUpdate"),u&&t._repeat&&!i&&t.parent&&ge(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===h&&(h&&zt(t,1),i||(ge(t,h?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,i);return this},a.targets=function(){return this._targets},a.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),i.prototype.invalidate.call(this)},a.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?_e(this):this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,He&&!0!==He.vars.overwrite)._first||_e(this),this.parent&&i!==this.timeline.totalDuration()&&Zt(this,this._dur*this.timeline._tDur/i,0,1),this}var r,s,n,a,o,h,l,u=this._targets,c=t?ae(t):u,d=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,r=i===e.length;r&&i--&&t[i]===e[i];);return i<0}(u,c))return"all"===e&&(this._pt=0),_e(this);for(r=this._op=this._op||[],"all"!==e&&(V(e)&&(o={},bt(e,(function(t){return o[t]=1})),e=o),e=function(t,e){var i,r,s,n,a=t[0]?yt(t[0]).harness:0,o=a&&a.aliases;if(!o)return e;for(r in i=At({},e),o)if(r in i)for(s=(n=o[r].split(",")).length;s--;)i[n[s]]=i[r];return i}(u,e)),l=u.length;l--;)if(~c.indexOf(u[l]))for(o in s=d[l],"all"===e?(r[l]=e,a=s,n={}):(n=r[l]=r[l]||{},a=e),a)(h=s&&s[o])&&("kill"in h.d&&!0!==h.d.kill(o)||Lt(this,h,"_pt"),delete s[o]),"all"!==n&&(n[o]=1);return this._initted&&!this._pt&&p&&_e(this),this},n.to=function(t,e){return new n(t,e,arguments[2])},n.from=function(t,e){return new n(t,Ct(arguments,1))},n.delayedCall=function(t,e,i,r){return new n(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},n.fromTo=function(t,e,i){return new n(t,Ct(arguments,2))},n.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new n(t,e)},n.killTweensOf=function(t,e,i){return s.killTweensOf(t,e,i)},n}(je);Rt($e.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),bt("staggerTo,staggerFrom,staggerFromTo",(function(t){$e[t]=function(){var e=new Xe,i=se.call(arguments,0);return i.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,i)}}));var Je=function(t,e,i){return t[e]=i},ti=function(t,e,i){return t[e](i)},ei=function(t,e,i,r){return t[e](r.fp,i)},ii=function(t,e,i){return t.setAttribute(e,i)},ri=function(t,e){return j(t[e])?ti:H(t[e])&&t.setAttribute?ii:Je},si=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},ni=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},ai=function(t,e){var i=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+r,i=i._next;r+=e.c}e.set(e.t,e.p,r,e)},oi=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},hi=function(t,e,i,r){for(var s,n=this._pt;n;)s=n._next,n.p===r&&n.modifier(t,e,i),n=s},li=function(t){for(var e,i,r=this._pt;r;)i=r._next,r.p===t&&!r.op||r.op===t?Lt(this,r,"_pt"):r.dep||(e=1),r=i;return!e},ui=function(t,e,i,r){r.mSet(t,e,r.m.call(r.tween,i,r.mt),r)},ci=function(t){for(var e,i,r,s,n=t._pt;n;){for(e=n._next,i=r;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:s)?n._prev._next=n:r=n,(n._next=i)?i._prev=n:s=n,n=e}t._pt=r},di=function(){function t(t,e,i,r,s,n,a,o,h){this.t=e,this.s=r,this.c=s,this.p=i,this.r=n||si,this.d=a||this,this.set=o||Je,this.pr=h||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=ui,this.m=t,this.mt=i,this.tween=e},t}();bt(vt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return ct[t]=1})),st.TweenMax=st.TweenLite=$e,st.TimelineLite=st.TimelineMax=Xe,s=new Xe({sortChildren:!1,defaults:A,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),k.stringFilter=Se;var pi={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((function(t){return ve(t)}))},timeline:function(t){return new Xe(t)},getTweensOf:function(t,e){return s.getTweensOf(t,e)},getProperty:function(t,e,i,r){V(t)&&(t=ae(t)[0]);var s=yt(t||{}).get,n=i?Pt:Ft;return"native"===i&&(i=""),t?e?n((ft[e]&&ft[e].get||s)(t,e,i,r)):function(e,i,r){return n((ft[e]&&ft[e].get||s)(t,e,i,r))}:t},quickSetter:function(t,e,i){if((t=ae(t)).length>1){var r=t.map((function(t){return gi.quickSetter(t,e,i)})),s=r.length;return function(t){for(var e=s;e--;)r[e](t)}}t=t[0]||{};var n=ft[e],a=yt(t),o=a.harness&&(a.harness.aliases||{})[e]||e,h=n?function(e){var r=new n;u._pt=0,r.init(t,i?e+i:e,u,0,[t]),r.render(1,r),u._pt&&oi(1,u)}:a.set(t,o);return n?h:function(e){return h(t,o,i?e+i:e,a,1)}},isTweening:function(t){return s.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Le(t.ease,A.ease)),Mt(A,t||{})},config:function(t){return Mt(k,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,r=t.plugins,s=t.defaults,n=t.extendTimeline;(r||"").split(",").forEach((function(t){return t&&!ft[t]&&!st[t]&&ht(e+" effect requires "+t+" plugin.")})),mt[e]=function(t,e,r){return i(ae(t),Rt(e||{},s),r)},n&&(Xe.prototype[e]=function(t,i,r){return this.add(mt[e](t,W(i)?i:(r=i)&&{},this),r)})},registerEase:function(t,e){Re[t]=Le(e)},parseEase:function(t,e){return arguments.length?Le(t,e):Re},getById:function(t){return s.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var i,r,n=new Xe(t);for(n.smoothChildTiming=Y(t.smoothChildTiming),s.remove(n),n._dp=0,n._time=n._tTime=s._time,i=s._first;i;)r=i._next,!e&&!i._dur&&i instanceof $e&&i.vars.onComplete===i._targets[0]||qt(n,i,i._start-i._delay),i=r;return qt(s,n,0),n},utils:{wrap:function t(e,i,r){var s=i-e;return Q(e)?de(e,t(0,e.length),i):ee(r,(function(t){return(s+(t-e)%s)%s+e}))},wrapYoyo:function t(e,i,r){var s=i-e,n=2*s;return Q(e)?de(e,t(0,e.length-1),i):ee(r,(function(t){return e+((t=(n+(t-e)%n)%n||0)>s?n-t:t)}))},distribute:he,random:ce,snap:ue,normalize:function(t,e,i){return fe(t,e,0,1,i)},getUnit:re,clamp:function(t,e,i){return ee(i,(function(i){return ie(t,e,i)}))},splitColor:be,toArray:ae,mapRange:fe,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(i){return t(parseFloat(i))+(e||re(i))}},interpolate:function t(e,i,r,s){var n=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!n){var a,o,h,l,u,c=V(e),d={};if(!0===r&&(s=1)&&(r=null),c)e={p:e},i={p:i};else if(Q(e)&&!Q(i)){for(h=[],l=e.length,u=l-2,o=1;o<l;o++)h.push(t(e[o-1],e[o]));l--,n=function(t){t*=l;var e=Math.min(u,~~t);return h[e](t-e)},r=i}else s||(e=At(Q(e)?[]:{},e));if(!h){for(a in i)Ye.call(d,e,a,"get",i[a]);n=function(t){return oi(t,d)||(c?e.p:e)}}}return ee(r,n)},shuffle:oe},install:at,effects:mt,ticker:Fe,updateRoot:Xe.updateRoot,plugins:ft,globalTimeline:s,core:{PropTween:di,globals:lt,Tween:$e,Timeline:Xe,Animation:je,getCache:yt,_removeLinkedListItem:Lt,suppressOverwrites:function(t){return r=t}}};bt("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return pi[t]=$e[t]})),Fe.add(Xe.updateRoot),u=pi.to({},{duration:0});var fi=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},mi=function(t,e){return{name:t,rawVars:1,init:function(t,i,r){r._onInit=function(t){var r,s;if(V(i)&&(r={},bt(i,(function(t){return r[t]=1})),i=r),e){for(s in r={},i)r[s]=e(i[s]);i=r}!function(t,e){var i,r,s,n=t._targets;for(i in e)for(r=n.length;r--;)(s=t._ptLookup[r][i])&&(s=s.d)&&(s._pt&&(s=fi(s,i)),s&&s.modifier&&s.modifier(e[i],t,n[r],i))}(t,i)}}}},gi=pi.registerPlugin({name:"attr",init:function(t,e,i,r,s){var n,a;for(n in e)(a=this.add(t,"setAttribute",(t.getAttribute(n)||0)+"",e[n],r,s,0,0,n))&&(a.op=n),this._props.push(n)}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i])}},mi("roundProps",le),mi("modifiers"),mi("snap",ue))||pi;$e.version=Xe.version=gi.version="3.6.0",h=1,q()&&Pe(),Re.Power0,Re.Power1,Re.Power2,Re.Power3,Re.Power4,Re.Linear,Re.Quad,Re.Cubic,Re.Quart,Re.Quint,Re.Strong,Re.Elastic,Re.Back,Re.SteppedEase,Re.Bounce,Re.Sine,Re.Expo,Re.Circ;var _i,vi,Di,yi,xi,bi,wi,Ei,Ci={},Ti=180/Math.PI,Si=Math.PI/180,Fi=Math.atan2,Pi=/([A-Z])/g,Ri=/(?:left|right|width|margin|padding|x)/i,ki=/[\s,\(]\S/,Ai={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Mi=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Oi=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Bi=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Li=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},zi=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Ii=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Ni=function(t,e,i){return t.style[e]=i},Ui=function(t,e,i){return t.style.setProperty(e,i)},Vi=function(t,e,i){return t._gsap[e]=i},ji=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Xi=function(t,e,i,r,s){var n=t._gsap;n.scaleX=n.scaleY=i,n.renderTransform(s,n)},Hi=function(t,e,i,r,s){var n=t._gsap;n[e]=i,n.renderTransform(s,n)},Wi="transform",Yi=Wi+"Origin",qi=function(t,e){var i=vi.createElementNS?vi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):vi.createElement(t);return i.style?i:vi.createElement(t)},Gi=function t(e,i,r){var s=getComputedStyle(e);return s[i]||s.getPropertyValue(i.replace(Pi,"-$1").toLowerCase())||s.getPropertyValue(i)||!r&&t(e,Qi(i)||i,1)||""},Ki="O,Moz,ms,Ms,Webkit".split(","),Qi=function(t,e,i){var r=(e||xi).style,s=5;if(t in r&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(Ki[s]+t in r););return s<0?null:(3===s?"ms":s>=0?Ki[s]:"")+t},Zi=function(){"undefined"!=typeof window&&window.document&&(_i=window,vi=_i.document,Di=vi.documentElement,xi=qi("div")||{style:{}},bi=qi("div"),Wi=Qi(Wi),Yi=Wi+"Origin",xi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ei=!!Qi("perspective"),yi=1)},$i=function t(e){var i,r=qi("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=this.parentNode,n=this.nextSibling,a=this.style.cssText;if(Di.appendChild(r),r.appendChild(this),this.style.display="block",e)try{i=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(i=this._gsapBBox());return s&&(n?s.insertBefore(this,n):s.appendChild(this)),Di.removeChild(r),this.style.cssText=a,i},Ji=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},tr=function(t){var e;try{e=t.getBBox()}catch(i){e=$i.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===$i||(e=$i.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+Ji(t,["x","cx","x1"])||0,y:+Ji(t,["y","cy","y1"])||0,width:0,height:0}},er=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!tr(t))},ir=function(t,e){if(e){var i=t.style;e in Ci&&e!==Yi&&(e=Wi),i.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty(e.replace(Pi,"-$1").toLowerCase())):i.removeAttribute(e)}},rr=function(t,e,i,r,s,n){var a=new di(t._pt,e,i,0,1,n?Ii:zi);return t._pt=a,a.b=r,a.e=s,t._props.push(i),a},sr={deg:1,rad:1,turn:1},nr=function t(e,i,r,s){var n,a,o,h,l=parseFloat(r)||0,u=(r+"").trim().substr((l+"").length)||"px",c=xi.style,d=Ri.test(i),p="svg"===e.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m=100,g="px"===s,_="%"===s;return s===u||!l||sr[s]||sr[u]?l:("px"!==u&&!g&&(l=t(e,i,r,"px")),h=e.getCTM&&er(e),!_&&"%"!==u||!Ci[i]&&!~i.indexOf("adius")?(c[d?"width":"height"]=m+(g?u:s),a=~i.indexOf("adius")||"em"===s&&e.appendChild&&!p?e:e.parentNode,h&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==vi&&a.appendChild||(a=vi.body),(o=a._gsap)&&_&&o.width&&d&&o.time===Fe.time?wt(l/o.width*m):((_||"%"===u)&&(c.position=Gi(e,"position")),a===e&&(c.position="static"),a.appendChild(xi),n=xi[f],a.removeChild(xi),c.position="absolute",d&&_&&((o=yt(a)).time=Fe.time,o.width=a[f]),wt(g?n*l/m:n&&l?m/n*l:0))):(n=h?e.getBBox()[d?"width":"height"]:e[f],wt(_?l/n*m:l/100*n)))},ar=function(t,e,i,r){var s;return yi||Zi(),e in Ai&&"transform"!==e&&~(e=Ai[e]).indexOf(",")&&(e=e.split(",")[0]),Ci[e]&&"transform"!==e?(s=_r(t,r),s="transformOrigin"!==e?s[e]:vr(Gi(t,Yi))+" "+s.zOrigin+"px"):(!(s=t.style[e])||"auto"===s||r||~(s+"").indexOf("calc("))&&(s=ur[e]&&ur[e](t,e,i)||Gi(t,e)||xt(t,e)||("opacity"===e?1:0)),i&&!~(s+"").trim().indexOf(" ")?nr(t,e,s,i)+i:s},or=function(t,e,i,r){if(!i||"none"===i){var s=Qi(e,t,1),n=s&&Gi(t,s,1);n&&n!==i?(e=s,i=n):"borderColor"===e&&(i=Gi(t,"borderTopColor"))}var a,o,h,l,u,c,d,p,f,m,g,_,v=new di(this._pt,t.style,e,0,1,ai),D=0,y=0;if(v.b=i,v.e=r,i+="","auto"==(r+="")&&(t.style[e]=r,r=Gi(t,e)||r,t.style[e]=i),Se(a=[i,r]),r=a[1],h=(i=a[0]).match(J)||[],(r.match(J)||[]).length){for(;o=J.exec(r);)d=o[0],f=r.substring(D,o.index),u?u=(u+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(u=1),d!==(c=h[y++]||"")&&(l=parseFloat(c)||0,g=c.substr((l+"").length),(_="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),p=parseFloat(d),m=d.substr((p+"").length),D=J.lastIndex-m.length,m||(m=m||k.units[e]||g,D===r.length&&(r+=m,v.e+=m)),g!==m&&(l=nr(t,e,c,m)||0),v._pt={_next:v._pt,p:f||1===y?f:",",s:l,c:_?_*p:p-l,m:u&&u<4||"zIndex"===e?Math.round:0});v.c=D<r.length?r.substring(D,r.length):""}else v.r="display"===e&&"none"===r?Ii:zi;return et.test(r)&&(v.e=0),this._pt=v,v},hr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},lr=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,r,s,n=e.t,a=n.style,o=e.u,h=n._gsap;if("all"===o||!0===o)a.cssText="",r=1;else for(s=(o=o.split(",")).length;--s>-1;)i=o[s],Ci[i]&&(r=1,i="transformOrigin"===i?Yi:Wi),ir(n,i);r&&(ir(n,Wi),h&&(h.svg&&n.removeAttribute("transform"),_r(n,1),h.uncache=1))}},ur={clearProps:function(t,e,i,r,s){if("isFromStart"!==s.data){var n=t._pt=new di(t._pt,e,i,0,0,lr);return n.u=r,n.pr=-10,n.tween=s,t._props.push(i),1}}},cr=[1,0,0,1,0,0],dr={},pr=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},fr=function(t){var e=Gi(t,Wi);return pr(e)?cr:e.substr(7).match($).map(wt)},mr=function(t,e){var i,r,s,n,a=t._gsap||yt(t),o=t.style,h=fr(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(h=[(s=t.transform.baseVal.consolidate().matrix).a,s.b,s.c,s.d,s.e,s.f]).join(",")?cr:h:(h!==cr||t.offsetParent||t===Di||a.svg||(s=o.display,o.display="block",(i=t.parentNode)&&t.offsetParent||(n=1,r=t.nextSibling,Di.appendChild(t)),h=fr(t),s?o.display=s:ir(t,"display"),n&&(r?i.insertBefore(t,r):i?i.appendChild(t):Di.removeChild(t))),e&&h.length>6?[h[0],h[1],h[4],h[5],h[12],h[13]]:h)},gr=function(t,e,i,r,s,n){var a,o,h,l=t._gsap,u=s||mr(t,!0),c=l.xOrigin||0,d=l.yOrigin||0,p=l.xOffset||0,f=l.yOffset||0,m=u[0],g=u[1],_=u[2],v=u[3],D=u[4],y=u[5],x=e.split(" "),b=parseFloat(x[0])||0,w=parseFloat(x[1])||0;i?u!==cr&&(o=m*v-g*_)&&(h=b*(-g/o)+w*(m/o)-(m*y-g*D)/o,b=b*(v/o)+w*(-_/o)+(_*y-v*D)/o,w=h):(b=(a=tr(t)).x+(~x[0].indexOf("%")?b/100*a.width:b),w=a.y+(~(x[1]||x[0]).indexOf("%")?w/100*a.height:w)),r||!1!==r&&l.smooth?(D=b-c,y=w-d,l.xOffset=p+(D*m+y*_)-D,l.yOffset=f+(D*g+y*v)-y):l.xOffset=l.yOffset=0,l.xOrigin=b,l.yOrigin=w,l.smooth=!!r,l.origin=e,l.originIsAbsolute=!!i,t.style[Yi]="0px 0px",n&&(rr(n,l,"xOrigin",c,b),rr(n,l,"yOrigin",d,w),rr(n,l,"xOffset",p,l.xOffset),rr(n,l,"yOffset",f,l.yOffset)),t.setAttribute("data-svg-origin",b+" "+w)},_r=function(t,e){var i=t._gsap||new Ve(t);if("x"in i&&!e&&!i.uncache)return i;var r,s,n,a,o,h,l,u,c,d,p,f,m,g,_,v,D,y,x,b,w,E,C,T,S,F,P,R,A,M,O,B,L=t.style,z=i.scaleX<0,I="px",N="deg",U=Gi(t,Yi)||"0";return r=s=n=h=l=u=c=d=p=0,a=o=1,i.svg=!(!t.getCTM||!er(t)),g=mr(t,i.svg),i.svg&&(T=!i.uncache&&t.getAttribute("data-svg-origin"),gr(t,T||U,!!T||i.originIsAbsolute,!1!==i.smooth,g)),f=i.xOrigin||0,m=i.yOrigin||0,g!==cr&&(y=g[0],x=g[1],b=g[2],w=g[3],r=E=g[4],s=C=g[5],6===g.length?(a=Math.sqrt(y*y+x*x),o=Math.sqrt(w*w+b*b),h=y||x?Fi(x,y)*Ti:0,(c=b||w?Fi(b,w)*Ti+h:0)&&(o*=Math.cos(c*Si)),i.svg&&(r-=f-(f*y+m*b),s-=m-(f*x+m*w))):(B=g[6],M=g[7],P=g[8],R=g[9],A=g[10],O=g[11],r=g[12],s=g[13],n=g[14],l=(_=Fi(B,A))*Ti,_&&(T=E*(v=Math.cos(-_))+P*(D=Math.sin(-_)),S=C*v+R*D,F=B*v+A*D,P=E*-D+P*v,R=C*-D+R*v,A=B*-D+A*v,O=M*-D+O*v,E=T,C=S,B=F),u=(_=Fi(-b,A))*Ti,_&&(v=Math.cos(-_),O=w*(D=Math.sin(-_))+O*v,y=T=y*v-P*D,x=S=x*v-R*D,b=F=b*v-A*D),h=(_=Fi(x,y))*Ti,_&&(T=y*(v=Math.cos(_))+x*(D=Math.sin(_)),S=E*v+C*D,x=x*v-y*D,C=C*v-E*D,y=T,E=S),l&&Math.abs(l)+Math.abs(h)>359.9&&(l=h=0,u=180-u),a=wt(Math.sqrt(y*y+x*x+b*b)),o=wt(Math.sqrt(C*C+B*B)),_=Fi(E,C),c=Math.abs(_)>2e-4?_*Ti:0,p=O?1/(O<0?-O:O):0),i.svg&&(T=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!pr(Gi(t,Wi)),T&&t.setAttribute("transform",T))),Math.abs(c)>90&&Math.abs(c)<270&&(z?(a*=-1,c+=h<=0?180:-180,h+=h<=0?180:-180):(o*=-1,c+=c<=0?180:-180)),i.x=r-((i.xPercent=r&&(i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+I,i.y=s-((i.yPercent=s&&(i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-s)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+I,i.z=n+I,i.scaleX=wt(a),i.scaleY=wt(o),i.rotation=wt(h)+N,i.rotationX=wt(l)+N,i.rotationY=wt(u)+N,i.skewX=c+N,i.skewY=d+N,i.transformPerspective=p+I,(i.zOrigin=parseFloat(U.split(" ")[2])||0)&&(L[Yi]=vr(U)),i.xOffset=i.yOffset=0,i.force3D=k.force3D,i.renderTransform=i.svg?Cr:Ei?Er:yr,i.uncache=0,i},vr=function(t){return(t=t.split(" "))[0]+" "+t[1]},Dr=function(t,e,i){var r=re(e);return wt(parseFloat(e)+parseFloat(nr(t,"x",i+"px",r)))+r},yr=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Er(t,e)},xr="0deg",br="0px",wr=") ",Er=function(t,e){var i=e||this,r=i.xPercent,s=i.yPercent,n=i.x,a=i.y,o=i.z,h=i.rotation,l=i.rotationY,u=i.rotationX,c=i.skewX,d=i.skewY,p=i.scaleX,f=i.scaleY,m=i.transformPerspective,g=i.force3D,_=i.target,v=i.zOrigin,D="",y="auto"===g&&t&&1!==t||!0===g;if(v&&(u!==xr||l!==xr)){var x,b=parseFloat(l)*Si,w=Math.sin(b),E=Math.cos(b);b=parseFloat(u)*Si,x=Math.cos(b),n=Dr(_,n,w*x*-v),a=Dr(_,a,-Math.sin(b)*-v),o=Dr(_,o,E*x*-v+v)}m!==br&&(D+="perspective("+m+wr),(r||s)&&(D+="translate("+r+"%, "+s+"%) "),(y||n!==br||a!==br||o!==br)&&(D+=o!==br||y?"translate3d("+n+", "+a+", "+o+") ":"translate("+n+", "+a+wr),h!==xr&&(D+="rotate("+h+wr),l!==xr&&(D+="rotateY("+l+wr),u!==xr&&(D+="rotateX("+u+wr),c===xr&&d===xr||(D+="skew("+c+", "+d+wr),1===p&&1===f||(D+="scale("+p+", "+f+wr),_.style[Wi]=D||"translate(0, 0)"},Cr=function(t,e){var i,r,s,n,a,o=e||this,h=o.xPercent,l=o.yPercent,u=o.x,c=o.y,d=o.rotation,p=o.skewX,f=o.skewY,m=o.scaleX,g=o.scaleY,_=o.target,v=o.xOrigin,D=o.yOrigin,y=o.xOffset,x=o.yOffset,b=o.forceCSS,w=parseFloat(u),E=parseFloat(c);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=Si,p*=Si,i=Math.cos(d)*m,r=Math.sin(d)*m,s=Math.sin(d-p)*-g,n=Math.cos(d-p)*g,p&&(f*=Si,a=Math.tan(p-f),s*=a=Math.sqrt(1+a*a),n*=a,f&&(a=Math.tan(f),i*=a=Math.sqrt(1+a*a),r*=a)),i=wt(i),r=wt(r),s=wt(s),n=wt(n)):(i=m,n=g,r=s=0),(w&&!~(u+"").indexOf("px")||E&&!~(c+"").indexOf("px"))&&(w=nr(_,"x",u,"px"),E=nr(_,"y",c,"px")),(v||D||y||x)&&(w=wt(w+v-(v*i+D*s)+y),E=wt(E+D-(v*r+D*n)+x)),(h||l)&&(a=_.getBBox(),w=wt(w+h/100*a.width),E=wt(E+l/100*a.height)),a="matrix("+i+","+r+","+s+","+n+","+w+","+E+")",_.setAttribute("transform",a),b&&(_.style[Wi]=a)},Tr=function(t,e,i,r,s,n){var a,o,h=360,l=V(s),u=parseFloat(s)*(l&&~s.indexOf("rad")?Ti:1),c=n?u*n:u-r,d=r+c+"deg";return l&&("short"===(a=s.split("_")[1])&&(c%=h)!=c%180&&(c+=c<0?h:-360),"cw"===a&&c<0?c=(c+36e9)%h-~~(c/h)*h:"ccw"===a&&c>0&&(c=(c-36e9)%h-~~(c/h)*h)),t._pt=o=new di(t._pt,e,i,r,c,Oi),o.e=d,o.u="deg",t._props.push(i),o},Sr=function(t,e,i){var r,s,n,a,o,h,l,u=bi.style,c=i._gsap;for(s in u.cssText=getComputedStyle(i).cssText+";position:absolute;display:block;",u[Wi]=e,vi.body.appendChild(bi),r=_r(bi,1),Ci)(n=c[s])!==(a=r[s])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(s)<0&&(o=re(n)!==(l=re(a))?nr(i,s,n,l):parseFloat(n),h=parseFloat(a),t._pt=new di(t._pt,c,s,o,h-o,Mi),t._pt.u=l||0,t._props.push(s));vi.body.removeChild(bi)};bt("padding,margin,Width,Radius",(function(t,e){var i="Top",r="Right",s="Bottom",n="Left",a=(e<3?[i,r,s,n]:[i+n,i+r,s+r,s+n]).map((function(i){return e<2?t+i:"border"+i+t}));ur[e>1?"border"+t:t]=function(t,e,i,r,s){var n,o;if(arguments.length<4)return n=a.map((function(e){return ar(t,e,i)})),5===(o=n.join(" ")).split(n[0]).length?n[0]:o;n=(r+"").split(" "),o={},a.forEach((function(t,e){return o[t]=n[e]=n[e]||n[(e-1)/2|0]})),t.init(e,o,s)}}));var Fr,Pr,Rr={name:"css",register:Zi,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,s){var n,a,o,h,l,u,c,d,p,f,m,g,_,v,D,y,x,b,w,E=this._props,C=t.style,T=i.vars.startAt;for(c in yi||Zi(),e)if("autoRound"!==c&&(a=e[c],!ft[c]||!qe(c,e,i,r,t,s)))if(l=typeof a,u=ur[c],"function"===l&&(l=typeof(a=a.call(i,r,t,s))),"string"===l&&~a.indexOf("random(")&&(a=pe(a)),u)u(this,t,c,a,i)&&(D=1);else if("--"===c.substr(0,2))n=(getComputedStyle(t).getPropertyValue(c)+"").trim(),a+="",d=re(n),(p=re(a))?d!==p&&(n=nr(t,c,n,p)+p):d&&(a+=d),this.add(C,"setProperty",n,a,r,s,0,0,c);else if("undefined"!==l){if(T&&c in T?(n="function"==typeof T[c]?T[c].call(i,r,t,s):T[c],c in k.units&&!re(n)&&(n+=k.units[c]),"="===(n+"").charAt(1)&&(n=ar(t,c))):n=ar(t,c),h=parseFloat(n),(f="string"===l&&"="===a.charAt(1)?+(a.charAt(0)+"1"):0)&&(a=a.substr(2)),o=parseFloat(a),c in Ai&&("autoAlpha"===c&&(1===h&&"hidden"===ar(t,"visibility")&&o&&(h=0),rr(this,C,"visibility",h?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==c&&"transform"!==c&&~(c=Ai[c]).indexOf(",")&&(c=c.split(",")[0])),m=c in Ci)if(g||((_=t._gsap).renderTransform&&!e.parseTransform||_r(t,e.parseTransform),v=!1!==e.smoothOrigin&&_.smooth,(g=this._pt=new di(this._pt,C,Wi,0,1,_.renderTransform,_,0,-1)).dep=1),"scale"===c)this._pt=new di(this._pt,_,"scaleY",_.scaleY,f?f*o:o-_.scaleY),E.push("scaleY",c),c+="X";else{if("transformOrigin"===c){x=void 0,b=void 0,w=void 0,b=(x=(y=a).split(" "))[0],w=x[1]||"50%","top"!==b&&"bottom"!==b&&"left"!==w&&"right"!==w||(y=b,b=w,w=y),x[0]=hr[b]||b,x[1]=hr[w]||w,a=x.join(" "),_.svg?gr(t,a,0,v,0,this):((p=parseFloat(a.split(" ")[2])||0)!==_.zOrigin&&rr(this,_,"zOrigin",_.zOrigin,p),rr(this,C,c,vr(n),vr(a)));continue}if("svgOrigin"===c){gr(t,a,1,v,0,this);continue}if(c in dr){Tr(this,_,c,h,a,f);continue}if("smoothOrigin"===c){rr(this,_,"smooth",_.smooth,a);continue}if("force3D"===c){_[c]=a;continue}if("transform"===c){Sr(this,a,t);continue}}else c in C||(c=Qi(c)||c);if(m||(o||0===o)&&(h||0===h)&&!ki.test(a)&&c in C)o||(o=0),(d=(n+"").substr((h+"").length))!==(p=re(a)||(c in k.units?k.units[c]:d))&&(h=nr(t,c,n,p)),this._pt=new di(this._pt,m?_:C,c,h,f?f*o:o-h,m||"px"!==p&&"zIndex"!==c||!1===e.autoRound?Mi:Li),this._pt.u=p||0,d!==p&&(this._pt.b=n,this._pt.r=Bi);else if(c in C)or.call(this,t,c,n,a);else{if(!(c in t)){ot(c,a);continue}this.add(t,c,t[c],a,r,s)}E.push(c)}D&&ci(this)},get:ar,aliases:Ai,getSetter:function(t,e,i){var r=Ai[e];return r&&r.indexOf(",")<0&&(e=r),e in Ci&&e!==Yi&&(t._gsap.x||ar(t,"x"))?i&&wi===i?"scale"===e?ji:Vi:(wi=i||{})&&("scale"===e?Xi:Hi):t.style&&!H(t.style[e])?Ni:~e.indexOf("-")?Ui:ri(t,e)},core:{_removeProperty:ir,_getMatrix:mr}};gi.utils.checkPrefix=Qi,Pr=bt("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(Fr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Ci[t]=1})),bt(Fr,(function(t){k.units[t]="deg",dr[t]=1})),Ai[Pr[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Fr,bt("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Ai[e[1]]=Pr[e[0]]})),bt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){k.units[t]="px"})),gi.registerPlugin(Rr);var kr=gi.registerPlugin(Rr)||gi;function Ar(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Or(t,e,i){return e&&Mr(t.prototype,e),i&&Mr(t,i),t}function Br(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Lr(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function zr(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Lr(Object(i),!0).forEach((function(e){Br(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Lr(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Ir(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ur(t,e)}function Nr(t){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ur(t,e){return(Ur=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jr(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?Vr(t):e}function Xr(t,e,i){return(Xr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nr(t)););return t}(t,e);if(r){var s=Object.getOwnPropertyDescriptor(r,e);return s.get?s.get.call(i):s.value}})(t,e,i||t)}function Hr(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}kr.core.Tween;var Wr={el:document,elMobile:document,name:"scroll",offset:[0,0],repeat:!1,smooth:!1,smoothMobile:!1,direction:"vertical",lerp:.1,class:"is-inview",scrollbarContainer:!1,scrollbarClass:"c-scrollbar",scrollingClass:"has-scroll-scrolling",draggingClass:"has-scroll-dragging",smoothClass:"has-scroll-smooth",initClass:"has-scroll-init",getSpeed:!1,getDirection:!1,multiplier:1,firefoxMultiplier:50,touchMultiplier:2,scrollFromAnywhere:!1},Yr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ar(this,t),Object.assign(this,Wr,e),this.namespace="locomotive",this.html=document.documentElement,this.windowHeight=window.innerHeight,this.windowMiddle=this.windowHeight/2,this.els=[],this.listeners={},this.hasScrollTicking=!1,this.hasCallEventSet=!1,this.checkScroll=this.checkScroll.bind(this),this.checkResize=this.checkResize.bind(this),this.checkEvent=this.checkEvent.bind(this),this.instance={scroll:{x:0,y:0},limit:this.html.offsetHeight},this.getDirection&&(this.instance.direction=null),this.getDirection&&(this.instance.speed=0),this.html.classList.add(this.initClass),window.addEventListener("resize",this.checkResize,!1)}return Or(t,[{key:"init",value:function(){this.initEvents()}},{key:"checkScroll",value:function(){this.dispatchScroll()}},{key:"checkResize",value:function(){var t=this;this.resizeTick||(this.resizeTick=!0,requestAnimationFrame((function(){t.resize(),t.resizeTick=!1})))}},{key:"resize",value:function(){}},{key:"initEvents",value:function(){var t=this;this.scrollToEls=this.el.querySelectorAll("[data-".concat(this.name,"-to]")),this.setScrollTo=this.setScrollTo.bind(this),this.scrollToEls.forEach((function(e){e.addEventListener("click",t.setScrollTo,!1)}))}},{key:"setScrollTo",value:function(t){t.preventDefault(),this.scrollTo(t.currentTarget.getAttribute("data-".concat(this.name,"-href"))||t.currentTarget.getAttribute("href"),t.currentTarget.getAttribute("data-".concat(this.name,"-offset")))}},{key:"addElements",value:function(){}},{key:"detectElements",value:function(t){var e=this,i=this.instance.scroll.y,r=i+this.windowHeight;this.els.forEach((function(s,n){!s||s.inView&&!t||r>=s.top&&i<s.bottom&&e.setInView(s,n),s&&s.inView&&(r<s.top||i>s.bottom)&&e.setOutOfView(s,n)})),this.els=this.els.filter((function(t,e){return null!==t})),this.hasScrollTicking=!1}},{key:"setInView",value:function(t,e){this.els[e].inView=!0,t.el.classList.add(t.class),t.call&&this.hasCallEventSet&&(this.dispatchCall(t,"enter"),t.repeat||(this.els[e].call=!1)),t.repeat||t.speed||t.sticky||(!t.call||t.call&&this.hasCallEventSet)&&(this.els[e]=null)}},{key:"setOutOfView",value:function(t,e){(t.repeat||void 0!==t.speed)&&(this.els[e].inView=!1),t.call&&this.hasCallEventSet&&this.dispatchCall(t,"exit"),t.repeat&&t.el.classList.remove(t.class)}},{key:"dispatchCall",value:function(t,e){this.callWay=e,this.callValue=t.call.split(",").map((function(t){return t.trim()})),this.callObj=t,1==this.callValue.length&&(this.callValue=this.callValue[0]);var i=new Event(this.namespace+"call");this.el.dispatchEvent(i)}},{key:"dispatchScroll",value:function(){var t=new Event(this.namespace+"scroll");this.el.dispatchEvent(t)}},{key:"setEvents",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]);var i=this.listeners[t];i.push(e),1===i.length&&this.el.addEventListener(this.namespace+t,this.checkEvent,!1),"call"===t&&(this.hasCallEventSet=!0,this.detectElements(!0))}},{key:"unsetEvents",value:function(t,e){if(this.listeners[t]){var i=this.listeners[t],r=i.indexOf(e);r<0||(i.splice(r,1),0===i.index&&this.el.removeEventListener(this.namespace+t,this.checkEvent,!1))}}},{key:"checkEvent",value:function(t){var e=this,i=t.type.replace(this.namespace,""),r=this.listeners[i];r&&0!==r.length&&r.forEach((function(t){switch(i){case"scroll":return t(e.instance);case"call":return t(e.callValue,e.callWay,e.callObj);default:return t()}}))}},{key:"startScroll",value:function(){}},{key:"stopScroll",value:function(){}},{key:"setScroll",value:function(t,e){this.instance.scroll={x:0,y:0}}},{key:"destroy",value:function(){var t=this;window.removeEventListener("resize",this.checkResize,!1),Object.keys(this.listeners).forEach((function(e){t.el.removeEventListener(t.namespace+e,t.checkEvent,!1)})),this.listeners={},this.scrollToEls.forEach((function(e){e.removeEventListener("click",t.setScrollTo,!1)}))}}]),t}(),qr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function Gr(t,e){return t(e={exports:{}},e.exports),e.exports}var Kr=Gr((function(t,e){t.exports={polyfill:function(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style)||!0===t.__forceSmoothScrollPolyfill__){var i,r=t.HTMLElement||t.Element,s={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:r.prototype.scroll||o,scrollIntoView:r.prototype.scrollIntoView},n=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,a=(i=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(i)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==h(arguments[0])?f.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):s.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(h(arguments[0])?s.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):f.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},r.prototype.scroll=r.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==h(arguments[0])){var t=arguments[0].left,e=arguments[0].top;f.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");s.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},r.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==h(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):s.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},r.prototype.scrollIntoView=function(){if(!0!==h(arguments[0])){var i=d(this),r=i.getBoundingClientRect(),n=this.getBoundingClientRect();i!==e.body?(f.call(this,i,i.scrollLeft+n.left-r.left,i.scrollTop+n.top-r.top),"fixed"!==t.getComputedStyle(i).position&&t.scrollBy({left:r.left,top:r.top,behavior:"smooth"})):t.scrollBy({left:n.left,top:n.top,behavior:"smooth"})}else s.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function o(t,e){this.scrollLeft=t,this.scrollTop=e}function h(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function l(t,e){return"Y"===e?t.clientHeight+a<t.scrollHeight:"X"===e?t.clientWidth+a<t.scrollWidth:void 0}function u(e,i){var r=t.getComputedStyle(e,null)["overflow"+i];return"auto"===r||"scroll"===r}function c(t){var e=l(t,"Y")&&u(t,"Y"),i=l(t,"X")&&u(t,"X");return e||i}function d(t){for(;t!==e.body&&!1===c(t);)t=t.parentNode||t.host;return t}function p(e){var i,r,s,a,o=(n()-e.startTime)/468;a=o=o>1?1:o,i=.5*(1-Math.cos(Math.PI*a)),r=e.startX+(e.x-e.startX)*i,s=e.startY+(e.y-e.startY)*i,e.method.call(e.scrollable,r,s),r===e.x&&s===e.y||t.requestAnimationFrame(p.bind(t,e))}function f(i,r,a){var h,l,u,c,d=n();i===e.body?(h=t,l=t.scrollX||t.pageXOffset,u=t.scrollY||t.pageYOffset,c=s.scroll):(h=i,l=i.scrollLeft,u=i.scrollTop,c=o),p({scrollable:h,method:c,startTime:d,startX:l,startY:u,x:r,y:a})}}}})),Qr=(Kr.polyfill,function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ar(this,e),t=jr(this,Nr(e).call(this,i)),window.addEventListener("scroll",t.checkScroll,!1),Kr.polyfill(),t}return Ir(e,t),Or(e,[{key:"init",value:function(){this.instance.scroll.y=window.pageYOffset,this.addElements(),this.detectElements(),Xr(Nr(e.prototype),"init",this).call(this)}},{key:"checkScroll",value:function(){var t=this;Xr(Nr(e.prototype),"checkScroll",this).call(this),this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.timestamp=Date.now()),this.instance.scroll.y=window.pageYOffset,this.els.length&&(this.hasScrollTicking||(requestAnimationFrame((function(){t.detectElements()})),this.hasScrollTicking=!0))}},{key:"addDirection",value:function(){window.pageYOffset>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):window.pageYOffset<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up")}},{key:"addSpeed",value:function(){window.pageYOffset!=this.instance.scroll.y?this.instance.speed=(window.pageYOffset-this.instance.scroll.y)/(Date.now()-this.timestamp):this.instance.speed=0}},{key:"resize",value:function(){this.els.length&&(this.windowHeight=window.innerHeight,this.updateElements())}},{key:"addElements",value:function(){var t=this;this.els=[],this.el.querySelectorAll("[data-"+this.name+"]").forEach((function(e,i){var r=e.dataset[t.name+"Class"]||t.class,s=e.getBoundingClientRect().top+t.instance.scroll.y,n=s+e.offsetHeight,a="string"==typeof e.dataset[t.name+"Offset"]?e.dataset[t.name+"Offset"].split(","):t.offset,o=e.dataset[t.name+"Repeat"],h=e.dataset[t.name+"Call"];o="false"!=o&&(null!=o||t.repeat);var l=t.getRelativeOffset(a),u={el:e,id:i,class:r,top:s+l[0],bottom:n-l[1],offset:a,repeat:o,inView:!!e.classList.contains(r),call:h};t.els.push(u)}))}},{key:"updateElements",value:function(){var t=this;this.els.forEach((function(e,i){var r=e.el.getBoundingClientRect().top+t.instance.scroll.y,s=r+e.el.offsetHeight,n=t.getRelativeOffset(e.offset);t.els[i].top=r+n[0],t.els[i].bottom=s-n[1]})),this.hasScrollTicking=!1}},{key:"getRelativeOffset",value:function(t){var e=[0,0];if(t)for(var i=0;i<t.length;i++)"string"==typeof t[i]?t[i].includes("%")?e[i]=parseInt(t[i].replace("%","")*this.windowHeight/100):e[i]=parseInt(t[i]):e[i]=t[i];return e}},{key:"scrollTo",value:function(t,e,i,r,s,n){var a,o=e?parseInt(e):0;if("string"==typeof t){if("top"===t)a=this.html;else if("bottom"===t)a=this.html.offsetHeight-window.innerHeight;else if(!(a=document.querySelector(t)))return}else if("number"==typeof t)a=parseInt(t);else{if(!t||!t.tagName)return void console.warn("`targetOption` parameter is not valid");a=t}o="number"!=typeof a?a.getBoundingClientRect().top+o+this.instance.scroll.y:a+o,n&&(o=o.toFixed(),window.addEventListener("scroll",(function t(){window.pageYOffset.toFixed()===o&&(window.removeEventListener("scroll",t),n())}))),window.scrollTo({top:o,behavior:"smooth"})}},{key:"update",value:function(){this.addElements(),this.detectElements()}},{key:"destroy",value:function(){Xr(Nr(e.prototype),"destroy",this).call(this),window.removeEventListener("scroll",this.checkScroll,!1)}}]),e}(Yr)),Zr=Object.getOwnPropertySymbols,$r=Object.prototype.hasOwnProperty,Jr=Object.prototype.propertyIsEnumerable;function ts(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var es=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,r,s=ts(t),n=1;n<arguments.length;n++){for(var a in i=Object(arguments[n]))$r.call(i,a)&&(s[a]=i[a]);if(Zr){r=Zr(i);for(var o=0;o<r.length;o++)Jr.call(i,r[o])&&(s[r[o]]=i[r[o]])}}return s};function is(){}is.prototype={on:function(t,e,i){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){var r=this;function s(){r.off(t,s),e.apply(i,arguments)}return s._=e,this.on(t,s,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),r=0,s=i.length;r<s;r++)i[r].fn.apply(i[r].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),r=i[t],s=[];if(r&&e)for(var n=0,a=r.length;n<a;n++)r[n].fn!==e&&r[n].fn._!==e&&s.push(r[n]);return s.length?i[t]=s:delete i[t],this}};var rs=is,ss=Gr((function(t,e){(function(){(null!==e?e:this).Lethargy=function(){function t(t,e,i,r){this.stability=null!=t?Math.abs(t):8,this.sensitivity=null!=e?1+Math.abs(e):100,this.tolerance=null!=i?1+Math.abs(i):1.1,this.delay=null!=r?r:150,this.lastUpDeltas=function(){var t,e,i;for(i=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this),this.lastDownDeltas=function(){var t,e,i;for(i=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this),this.deltasTimestamp=function(){var t,e,i;for(i=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this)}return t.prototype.check=function(t){var e;return null!=(t=t.originalEvent||t).wheelDelta?e=t.wheelDelta:null!=t.deltaY?e=-40*t.deltaY:null==t.detail&&0!==t.detail||(e=-40*t.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),e>0?(this.lastUpDeltas.push(e),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(e),this.lastDownDeltas.shift(),this.isInertia(-1))},t.prototype.isInertia=function(t){var e,i,r,s,n,a,o;return null===(e=-1===t?this.lastDownDeltas:this.lastUpDeltas)[0]?t:!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&e[0]===e[2*this.stability-1])&&(r=e.slice(0,this.stability),i=e.slice(this.stability,2*this.stability),o=r.reduce((function(t,e){return t+e})),n=i.reduce((function(t,e){return t+e})),a=o/r.length,s=n/i.length,Math.abs(a)<Math.abs(s*this.tolerance)&&this.sensitivity<Math.abs(s)&&t)},t.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},t.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},t}()}).call(qr)})),ns="onwheel"in document,as="onmousewheel"in document,os="ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,hs=navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,ls=!!window.navigator.msPointerEnabled,us="onkeydown"in document,cs=navigator.userAgent.indexOf("Firefox")>-1,ds=Object.prototype.toString,ps=Object.prototype.hasOwnProperty;function fs(t,e){return function(){return t.apply(e,arguments)}}var ms=ss.Lethargy,gs="virtualscroll",_s=vs;function vs(t){!function(t){if(!t)return console.warn("bindAll requires at least one argument.");var e=Array.prototype.slice.call(arguments,1);if(0===e.length)for(var i in t)ps.call(t,i)&&"function"==typeof t[i]&&"[object Function]"==ds.call(t[i])&&e.push(i);for(var r=0;r<e.length;r++){var s=e[r];t[s]=fs(t[s],t)}}(this,"_onWheel","_onMouseWheel","_onTouchStart","_onTouchMove","_onKeyDown"),this.el=window,t&&t.el&&(this.el=t.el,delete t.el),this.options=es({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:!1,unpreventTouchClass:"vs-touchmove-allowed",limitInertia:!1,useKeyboard:!0,useTouch:!0},t),this.options.limitInertia&&(this._lethargy=new ms),this._emitter=new rs,this._event={y:0,x:0,deltaX:0,deltaY:0},this.touchStartX=null,this.touchStartY=null,this.bodyTouchAction=null,void 0!==this.options.passive&&(this.listenerOptions={passive:this.options.passive})}function Ds(t,e,i){return(1-i)*t+i*e}function ys(t){var e={};if(window.getComputedStyle){var i=getComputedStyle(t),r=i.transform||i.webkitTransform||i.mozTransform,s=r.match(/^matrix3d\((.+)\)$/);return s?(e.x=s?parseFloat(s[1].split(", ")[12]):0,e.y=s?parseFloat(s[1].split(", ")[13]):0):(s=r.match(/^matrix\((.+)\)$/),e.x=s?parseFloat(s[1].split(", ")[4]):0,e.y=s?parseFloat(s[1].split(", ")[5]):0),e}}function xs(t){for(var e=[];t&&t!==document;t=t.parentNode)e.push(t);return e}vs.prototype._notify=function(t){var e=this._event;e.x+=e.deltaX,e.y+=e.deltaY,this._emitter.emit(gs,{x:e.x,y:e.y,deltaX:e.deltaX,deltaY:e.deltaY,originalEvent:t})},vs.prototype._onWheel=function(t){var e=this.options;if(!this._lethargy||!1!==this._lethargy.check(t)){var i=this._event;i.deltaX=t.wheelDeltaX||-1*t.deltaX,i.deltaY=t.wheelDeltaY||-1*t.deltaY,cs&&1==t.deltaMode&&(i.deltaX*=e.firefoxMultiplier,i.deltaY*=e.firefoxMultiplier),i.deltaX*=e.mouseMultiplier,i.deltaY*=e.mouseMultiplier,this._notify(t)}},vs.prototype._onMouseWheel=function(t){if(!this.options.limitInertia||!1!==this._lethargy.check(t)){var e=this._event;e.deltaX=t.wheelDeltaX?t.wheelDeltaX:0,e.deltaY=t.wheelDeltaY?t.wheelDeltaY:t.wheelDelta,this._notify(t)}},vs.prototype._onTouchStart=function(t){var e=t.targetTouches?t.targetTouches[0]:t;this.touchStartX=e.pageX,this.touchStartY=e.pageY},vs.prototype._onTouchMove=function(t){var e=this.options;e.preventTouch&&!t.target.classList.contains(e.unpreventTouchClass)&&t.preventDefault();var i=this._event,r=t.targetTouches?t.targetTouches[0]:t;i.deltaX=(r.pageX-this.touchStartX)*e.touchMultiplier,i.deltaY=(r.pageY-this.touchStartY)*e.touchMultiplier,this.touchStartX=r.pageX,this.touchStartY=r.pageY,this._notify(t)},vs.prototype._onKeyDown=function(t){var e=this._event;e.deltaX=e.deltaY=0;var i=window.innerHeight-40;switch(t.keyCode){case 37:case 38:e.deltaY=this.options.keyStep;break;case 39:case 40:e.deltaY=-this.options.keyStep;break;case t.shiftKey:e.deltaY=i;break;case 32:e.deltaY=-i;break;default:return}this._notify(t)},vs.prototype._bind=function(){ns&&this.el.addEventListener("wheel",this._onWheel,this.listenerOptions),as&&this.el.addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions),os&&this.options.useTouch&&(this.el.addEventListener("touchstart",this._onTouchStart,this.listenerOptions),this.el.addEventListener("touchmove",this._onTouchMove,this.listenerOptions)),ls&&hs&&(this.bodyTouchAction=document.body.style.msTouchAction,document.body.style.msTouchAction="none",this.el.addEventListener("MSPointerDown",this._onTouchStart,!0),this.el.addEventListener("MSPointerMove",this._onTouchMove,!0)),us&&this.options.useKeyboard&&document.addEventListener("keydown",this._onKeyDown)},vs.prototype._unbind=function(){ns&&this.el.removeEventListener("wheel",this._onWheel),as&&this.el.removeEventListener("mousewheel",this._onMouseWheel),os&&(this.el.removeEventListener("touchstart",this._onTouchStart),this.el.removeEventListener("touchmove",this._onTouchMove)),ls&&hs&&(document.body.style.msTouchAction=this.bodyTouchAction,this.el.removeEventListener("MSPointerDown",this._onTouchStart,!0),this.el.removeEventListener("MSPointerMove",this._onTouchMove,!0)),us&&this.options.useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)},vs.prototype.on=function(t,e){this._emitter.on(gs,t,e);var i=this._emitter.e;i&&i[gs]&&1===i[gs].length&&this._bind()},vs.prototype.off=function(t,e){this._emitter.off(gs,t,e);var i=this._emitter.e;(!i[gs]||i[gs].length<=0)&&this._unbind()},vs.prototype.reset=function(){var t=this._event;t.x=0,t.y=0},vs.prototype.destroy=function(){this._emitter.off(),this._unbind()};var bs=.1,ws="function"==typeof Float32Array;function Es(t,e){return 1-3*e+3*t}function Cs(t,e){return 3*e-6*t}function Ts(t){return 3*t}function Ss(t,e,i){return((Es(e,i)*t+Cs(e,i))*t+Ts(e))*t}function Fs(t,e,i){return 3*Es(e,i)*t*t+2*Cs(e,i)*t+Ts(e)}function Ps(t){return t}var Rs=function(t,e,i,r){if(!(0<=t&&t<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&i===r)return Ps;for(var s=ws?new Float32Array(11):new Array(11),n=0;n<11;++n)s[n]=Ss(n*bs,t,i);return function(n){return 0===n?0:1===n?1:Ss(function(e){for(var r=0,n=1;10!==n&&s[n]<=e;++n)r+=bs;--n;var a=r+(e-s[n])/(s[n+1]-s[n])*bs,o=Fs(a,t,i);return o>=.001?function(t,e,i,r){for(var s=0;s<4;++s){var n=Fs(e,i,r);if(0===n)return e;e-=(Ss(e,i,r)-t)/n}return e}(e,a,t,i):0===o?a:function(t,e,i,r,s){var n,a,o=0;do{(n=Ss(a=e+(i-e)/2,r,s)-t)>0?i=a:e=a}while(Math.abs(n)>1e-7&&++o<10);return a}(e,r,r+bs,t,i)}(n),e,r)}},ks=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ar(this,e),window.scrollTo(0,0),history.scrollRestoration="manual",(t=jr(this,Nr(e).call(this,i))).inertia&&(t.lerp=.1*t.inertia),t.isScrolling=!1,t.isDraggingScrollbar=!1,t.isTicking=!1,t.hasScrollTicking=!1,t.parallaxElements=[],t.stop=!1,t.scrollbarContainer=i.scrollbarContainer,t.checkKey=t.checkKey.bind(Vr(t)),window.addEventListener("keydown",t.checkKey,!1),t}return Ir(e,t),Or(e,[{key:"init",value:function(){var t=this;this.html.classList.add(this.smoothClass),this.instance=zr({delta:{x:0,y:0}},this.instance),this.vs=new _s({el:this.scrollFromAnywhere?document:this.el,mouseMultiplier:navigator.platform.indexOf("Win")>-1?1:.4,firefoxMultiplier:this.firefoxMultiplier,touchMultiplier:this.touchMultiplier,useKeyboard:!1,passive:!0}),this.vs.on((function(e){t.stop||(t.isTicking||t.isDraggingScrollbar||(requestAnimationFrame((function(){t.updateDelta(e),t.isScrolling||t.startScrolling()})),t.isTicking=!0),t.isTicking=!1)})),this.setScrollLimit(),this.initScrollBar(),this.addSections(),this.addElements(),this.detectElements(),this.transformElements(!0,!0),this.checkScroll(!0),Xr(Nr(e.prototype),"init",this).call(this)}},{key:"setScrollLimit",value:function(){this.instance.limit=this.el.offsetHeight-this.windowHeight}},{key:"startScrolling",value:function(){this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}},{key:"stopScrolling",value:function(){this.scrollToRaf&&(cancelAnimationFrame(this.scrollToRaf),this.scrollToRaf=null),this.isScrolling=!1,this.instance.scroll.y=Math.round(this.instance.scroll.y),this.html.classList.remove(this.scrollingClass)}},{key:"checkKey",value:function(t){var e=this;if(this.stop)9==t.keyCode&&requestAnimationFrame((function(){e.html.scrollTop=0,document.body.scrollTop=0}));else{switch(t.keyCode){case 9:requestAnimationFrame((function(){e.html.scrollTop=0,document.body.scrollTop=0,e.scrollTo(document.activeElement,-window.innerHeight/2)}));break;case 38:this.instance.delta.y-=240;break;case 40:this.instance.delta.y+=240;break;case 33:this.instance.delta.y-=window.innerHeight;break;case 34:this.instance.delta.y+=window.innerHeight;break;case 36:this.instance.delta.y-=this.instance.limit;break;case 35:this.instance.delta.y+=this.instance.limit;break;case 32:document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||(t.shiftKey?this.instance.delta.y-=window.innerHeight:this.instance.delta.y+=window.innerHeight);break;default:return}this.instance.delta.y<0&&(this.instance.delta.y=0),this.instance.delta.y>this.instance.limit&&(this.instance.delta.y=this.instance.limit),this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}}},{key:"checkScroll",value:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(i||this.isScrolling||this.isDraggingScrollbar){this.hasScrollTicking||(requestAnimationFrame((function(){return t.checkScroll()})),this.hasScrollTicking=!0),this.updateScroll();var r=Math.abs(this.instance.delta.y-this.instance.scroll.y);!this.animatingScroll&&(r<.5&&0!=this.instance.delta.y||r<.5&&0==this.instance.delta.y)&&this.stopScrolling();for(var s=this.sections.length-1;s>=0;s--)this.sections[s].persistent||this.instance.scroll.y>this.sections[s].offset&&this.instance.scroll.y<this.sections[s].limit?(this.transform(this.sections[s].el,0,-this.instance.scroll.y),this.sections[s].inView||(this.sections[s].inView=!0,this.sections[s].el.style.opacity=1,this.sections[s].el.style.pointerEvents="all",this.sections[s].el.setAttribute("data-".concat(this.name,"-section-inview"),""))):(this.sections[s].inView&&(this.sections[s].inView=!1,this.sections[s].el.style.opacity=0,this.sections[s].el.style.pointerEvents="none",this.sections[s].el.removeAttribute("data-".concat(this.name,"-section-inview"))),this.transform(this.sections[s].el,0,0));this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.timestamp=Date.now()),this.detectElements(),this.transformElements();var n=this.instance.scroll.y/this.instance.limit*this.scrollBarLimit;this.transform(this.scrollbarThumb,0,n),Xr(Nr(e.prototype),"checkScroll",this).call(this),this.hasScrollTicking=!1}}},{key:"resize",value:function(){this.windowHeight=window.innerHeight,this.windowMiddle=this.windowHeight/2,this.update()}},{key:"updateDelta",value:function(t){this.instance.delta.y-=t.deltaY*this.multiplier,this.instance.delta.y<0&&(this.instance.delta.y=0),this.instance.delta.y>this.instance.limit&&(this.instance.delta.y=this.instance.limit)}},{key:"updateScroll",value:function(t){this.isScrolling||this.isDraggingScrollbar?this.instance.scroll.y=Ds(this.instance.scroll.y,this.instance.delta.y,this.lerp):this.instance.scroll.y>this.instance.limit?this.setScroll(this.instance.scroll.x,this.instance.limit):this.instance.scroll.y<0?this.setScroll(this.instance.scroll.x,0):this.setScroll(this.instance.scroll.x,this.instance.delta.y)}},{key:"addDirection",value:function(){this.instance.delta.y>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):this.instance.delta.y<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up")}},{key:"addSpeed",value:function(){this.instance.delta.y!=this.instance.scroll.y?this.instance.speed=(this.instance.delta.y-this.instance.scroll.y)/Math.max(1,Date.now()-this.timestamp):this.instance.speed=0}},{key:"initScrollBar",value:function(){this.scrollbar=document.createElement("span"),this.scrollbarThumb=document.createElement("span"),this.scrollbar.classList.add("".concat(this.scrollbarClass)),this.scrollbarThumb.classList.add("".concat(this.scrollbarClass,"_thumb")),this.scrollbar.append(this.scrollbarThumb),this.scrollbarContainer?this.scrollbarContainer.append(this.scrollbar):document.body.append(this.scrollbar),this.getScrollBar=this.getScrollBar.bind(this),this.releaseScrollBar=this.releaseScrollBar.bind(this),this.moveScrollBar=this.moveScrollBar.bind(this),this.scrollbarThumb.addEventListener("mousedown",this.getScrollBar),window.addEventListener("mouseup",this.releaseScrollBar),window.addEventListener("mousemove",this.moveScrollBar),this.instance.limit+this.windowHeight<=this.windowHeight||(this.scrollbarBCR=this.scrollbar.getBoundingClientRect(),this.scrollbarHeight=this.scrollbarBCR.height,this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit+this.scrollbarHeight),"px"),this.scrollBarLimit=this.scrollbarHeight-this.scrollbarThumb.getBoundingClientRect().height)}},{key:"reinitScrollBar",value:function(){this.instance.limit+this.windowHeight<=this.windowHeight||(this.scrollbarBCR=this.scrollbar.getBoundingClientRect(),this.scrollbarHeight=this.scrollbarBCR.height,this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit+this.scrollbarHeight),"px"),this.scrollBarLimit=this.scrollbarHeight-this.scrollbarThumb.getBoundingClientRect().height)}},{key:"destroyScrollBar",value:function(){this.scrollbarThumb.removeEventListener("mousedown",this.getScrollBar),window.removeEventListener("mouseup",this.releaseScrollBar),window.removeEventListener("mousemove",this.moveScrollBar),this.scrollbar.remove()}},{key:"getScrollBar",value:function(t){this.isDraggingScrollbar=!0,this.checkScroll(),this.html.classList.remove(this.scrollingClass),this.html.classList.add(this.draggingClass)}},{key:"releaseScrollBar",value:function(t){this.isDraggingScrollbar=!1,this.html.classList.add(this.scrollingClass),this.html.classList.remove(this.draggingClass)}},{key:"moveScrollBar",value:function(t){var e=this;!this.isTicking&&this.isDraggingScrollbar&&(requestAnimationFrame((function(){var i=100*(t.clientY-e.scrollbarBCR.top)/e.scrollbarHeight*e.instance.limit/100;i>0&&i<e.instance.limit&&(e.instance.delta.y=i)})),this.isTicking=!0),this.isTicking=!1}},{key:"addElements",value:function(){var t=this;this.els=[],this.parallaxElements=[],this.sections.forEach((function(e,i){t.sections[i].el.querySelectorAll("[data-".concat(t.name,"]")).forEach((function(e,r){var s,n,a=e.dataset[t.name+"Class"]||t.class,o=e.dataset[t.name+"Repeat"],h=e.dataset[t.name+"Call"],l=e.dataset[t.name+"Position"],u=e.dataset[t.name+"Delay"],c=e.dataset[t.name+"Direction"],d="string"==typeof e.dataset[t.name+"Sticky"],p=!!e.dataset[t.name+"Speed"]&&parseFloat(e.dataset[t.name+"Speed"])/10,f="string"==typeof e.dataset[t.name+"Offset"]?e.dataset[t.name+"Offset"].split(","):t.offset,m=e.dataset[t.name+"Target"];n=void 0!==m?document.querySelector("".concat(m)):e;var g=(s=t.sections[i].inView?n.getBoundingClientRect().top+t.instance.scroll.y-ys(n).y:n.getBoundingClientRect().top-ys(t.sections[i].el).y-ys(n).y)+n.offsetHeight,_=(g-s)/2+s;if(d){var v=e.getBoundingClientRect().top,D=v-s;s+=window.innerHeight,_=((g=v+n.offsetHeight-e.offsetHeight-D)-s)/2+s}o="false"!=o&&(null!=o||t.repeat);var y=[0,0];if(f)for(var x=0;x<f.length;x++)"string"==typeof f[x]?f[x].includes("%")?y[x]=parseInt(f[x].replace("%","")*t.windowHeight/100):y[x]=parseInt(f[x]):y[x]=f[x];var b={el:e,id:r,class:a,top:s+y[0],middle:_,bottom:g-y[1],offset:f,repeat:o,inView:!!e.classList.contains(a),call:h,speed:p,delay:u,position:l,target:n,direction:c,sticky:d};t.els.push(b),(!1!==p||d)&&t.parallaxElements.push(b)}))}))}},{key:"addSections",value:function(){var t=this;this.sections=[];var e=this.el.querySelectorAll("[data-".concat(this.name,"-section]"));0===e.length&&(e=[this.el]),e.forEach((function(e,i){var r=e.getBoundingClientRect().top-1.5*window.innerHeight-ys(e).y,s=r+e.getBoundingClientRect().height+2*window.innerHeight,n={el:e,offset:r,limit:s,inView:!1,persistent:"string"==typeof e.dataset[t.name+"Persistent"]};t.sections[i]=n}))}},{key:"transform",value:function(t,e,i,r){var s;if(r){var n=ys(t),a=Ds(n.x,e,r),o=Ds(n.y,i,r);s="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(a,",").concat(o,",0,1)")}else s="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(e,",").concat(i,",0,1)");t.style.webkitTransform=s,t.style.msTransform=s,t.style.transform=s}},{key:"transformElements",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.instance.scroll.y+this.windowHeight,s=this.instance.scroll.y+this.windowMiddle;this.parallaxElements.forEach((function(n,a){var o=!1;if(t&&(o=0),n.inView||i)switch(n.position){case"top":o=e.instance.scroll.y*-n.speed;break;case"elementTop":o=(r-n.top)*-n.speed;break;case"bottom":o=(e.instance.limit-r+e.windowHeight)*n.speed;break;default:o=(s-n.middle)*-n.speed}n.sticky&&(o=n.inView?e.instance.scroll.y-n.top+window.innerHeight:e.instance.scroll.y<n.top-window.innerHeight&&e.instance.scroll.y<n.top-window.innerHeight/2?0:e.instance.scroll.y>n.bottom&&e.instance.scroll.y>n.bottom+100&&n.bottom-n.top+window.innerHeight),!1!==o&&("horizontal"===n.direction?e.transform(n.el,o,0,!t&&n.delay):e.transform(n.el,0,o,!t&&n.delay))}))}},{key:"scrollTo",value:function(t,e){var i,r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[.25,0,.35,1],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,h=e?parseInt(e):0;if(n=Rs.apply(void 0,Hr(n)),"string"==typeof t){if("top"===t)i=0;else if("bottom"===t)i=this.instance.limit;else if(!(i=document.querySelector(t)))return}else if("number"==typeof t)i=parseInt(t);else{if(!t||!t.tagName)return void console.warn("`targetOption` parameter is not valid");i=t}if("number"!=typeof i){var l=xs(i).includes(this.el);if(!l)return;var u=i.getBoundingClientRect(),c=u.top,d=xs(i),p=d.find((function(t){return r.sections.find((function(e){return e.el==t}))})),f=0;p&&(f=ys(p).y),h=c+h-f}else h=i+h;var m=parseFloat(this.instance.delta.y),g=Math.max(0,Math.min(h,this.instance.limit)),_=g-m,v=function(t){a?r.setScroll(r.instance.delta.x,m+_*t):r.instance.delta.y=m+_*t};this.animatingScroll=!0,this.stopScrolling(),this.startScrolling();var D=Date.now(),y=function t(){var e=(Date.now()-D)/s;e>1?(v(1),r.animatingScroll=!1,0==s&&r.update(),o&&o()):(r.scrollToRaf=requestAnimationFrame(t),v(n(e)))};y()}},{key:"update",value:function(){this.setScrollLimit(),this.addSections(),this.addElements(),this.detectElements(),this.updateScroll(),this.transformElements(!0),this.reinitScrollBar(),this.checkScroll(!0)}},{key:"startScroll",value:function(){this.stop=!1}},{key:"stopScroll",value:function(){this.stop=!0}},{key:"setScroll",value:function(t,e){this.instance=zr({},this.instance,{scroll:{x:t,y:e},delta:{x:t,y:e},speed:0})}},{key:"destroy",value:function(){Xr(Nr(e.prototype),"destroy",this).call(this),this.stopScrolling(),this.html.classList.remove(this.smoothClass),this.vs.destroy(),this.destroyScrollBar(),window.removeEventListener("keydown",this.checkKey,!1)}}]),e}(Yr);const As=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ar(this,t),this.options=e,Object.assign(this,Wr,e),this.init()}return Or(t,[{key:"init",value:function(){if(this.smoothMobile||(this.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),!0!==this.smooth||this.isMobile?this.scroll=new Qr(this.options):this.scroll=new ks(this.options),this.scroll.init(),window.location.hash){var t=window.location.hash.slice(1,window.location.hash.length),e=document.getElementById(t);e&&this.scroll.scrollTo(e)}}},{key:"update",value:function(){this.scroll.update()}},{key:"start",value:function(){this.scroll.startScroll()}},{key:"stop",value:function(){this.scroll.stopScroll()}},{key:"scrollTo",value:function(t,e,i,r,s,n){this.scroll.scrollTo(t,e,i,r,s,n)}},{key:"setScroll",value:function(t,e){this.scroll.setScroll(t,e)}},{key:"on",value:function(t,e){this.scroll.setEvents(t,e)}},{key:"off",value:function(t,e){this.scroll.unsetEvents(t,e)}},{key:"destroy",value:function(){this.scroll.destroy()}}]),t}();var Ms=i(69),Os=i.n(Ms);let Bs=0;function Ls(){if(!(Bs>100)){if(100===Bs)console.warn("Curtains: too many warnings thrown, stop logging.");else{const t=Array.prototype.slice.call(arguments);console.warn.apply(console,t)}Bs++}}function zs(){const t=Array.prototype.slice.call(arguments);console.error.apply(console,t)}function Is(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{let e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16).toUpperCase()}))}function Ns(t){return 0==(t&t-1)}class Us{constructor(t){this.type="Scene",t&&"Renderer"===t.type?t.gl||zs(this.type+": Renderer WebGL context is undefined",t):zs(this.type+": Renderer not passed as first argument",t),this.renderer=t,this.gl=t.gl,this.initStacks()}initStacks(){this.stacks={pingPong:[],renderTargets:[],opaque:[],transparent:[],renderPasses:[],scenePasses:[]}}resetPlaneStacks(){this.stacks.pingPong=[],this.stacks.renderTargets=[],this.stacks.opaque=[],this.stacks.transparent=[];for(let t=0;t<this.renderer.planes.length;t++)this.addPlane(this.renderer.planes[t])}resetShaderPassStacks(){this.stacks.scenePasses=[],this.stacks.renderPasses=[];for(let t=0;t<this.renderer.shaderPasses.length;t++)this.renderer.shaderPasses[t].index=t,this.renderer.shaderPasses[t]._isScenePass?this.stacks.scenePasses.push(this.renderer.shaderPasses[t]):this.stacks.renderPasses.push(this.renderer.shaderPasses[t]);0===this.stacks.scenePasses.length&&(this.renderer.state.scenePassIndex=null)}addToRenderTargetsStack(t){const e=this.renderer.planes.filter((e=>"PingPongPlane"!==e.type&&e.target&&e.uuid!==t.uuid));let i=-1;if(t.target._depth){for(let r=e.length-1;r>=0;r--)if(e[r].target.uuid===t.target.uuid){i=r+1;break}}else i=e.findIndex((e=>e.target.uuid===t.target.uuid));i=Math.max(0,i),e.splice(i,0,t),t.target._depth?(e.sort(((t,e)=>t.index-e.index)),e.sort(((t,e)=>e.renderOrder-t.renderOrder))):(e.sort(((t,e)=>e.index-t.index)),e.sort(((t,e)=>t.renderOrder-e.renderOrder))),e.sort(((t,e)=>t.target.index-e.target.index)),this.stacks.renderTargets=e}addToRegularPlaneStack(t){const e=this.renderer.planes.filter((e=>"PingPongPlane"!==e.type&&!e.target&&e._transparent===t._transparent&&e.uuid!==t.uuid));let i=-1;for(let r=e.length-1;r>=0;r--)if(e[r]._geometry.definition.id===t._geometry.definition.id){i=r+1;break}return i=Math.max(0,i),e.splice(i,0,t),e.sort(((t,e)=>t.index-e.index)),t.shareProgram&&e.sort(((t,e)=>t._program.id-e._program.id)),e}addPlane(t){if("PingPongPlane"===t.type)this.stacks.pingPong.push(t);else if(t.target)this.addToRenderTargetsStack(t);else if(t._transparent){const e=this.addToRegularPlaneStack(t);e.sort(((t,e)=>e.relativeTranslation.z-t.relativeTranslation.z)),e.sort(((t,e)=>e.renderOrder-t.renderOrder)),this.stacks.transparent=e}else{const e=this.addToRegularPlaneStack(t);e.sort(((t,e)=>e.renderOrder-t.renderOrder)),this.stacks.opaque=e}}removePlane(t){"PingPongPlane"===t.type?this.stacks.pingPong=this.stacks.pingPong.filter((e=>e.uuid!==t.uuid)):t.target?this.stacks.renderTargets=this.stacks.renderTargets.filter((e=>e.uuid!==t.uuid)):t._transparent?this.stacks.transparent=this.stacks.transparent.filter((e=>e.uuid!==t.uuid)):this.stacks.opaque=this.stacks.opaque.filter((e=>e.uuid!==t.uuid))}setPlaneRenderOrder(t){if("ShaderPass"===t.type)this.sortShaderPassStack(t._isScenePass?this.stacks.scenePasses:this.stacks.renderPasses);else if("PingPongPlane"===t.type)return;if(t.target)t.target._depth?(this.stacks.renderTargets.sort(((t,e)=>t.index-e.index)),this.stacks.renderTargets.sort(((t,e)=>e.renderOrder-t.renderOrder))):(this.stacks.renderTargets.sort(((t,e)=>e.index-t.index)),this.stacks.renderTargets.sort(((t,e)=>t.renderOrder-e.renderOrder))),this.stacks.renderTargets.sort(((t,e)=>t.target.index-e.target.index));else{const e=t._transparent?this.stacks.transparent:this.stacks.opaque,i=this.stacks.scenePasses.find(((t,e)=>t._isScenePass&&!t._depth&&0===e));!this.renderer.depth||i?(e.sort(((t,e)=>e.index-t.index)),t._transparent&&e.sort(((t,e)=>t.relativeTranslation.z-e.relativeTranslation.z)),e.sort(((t,e)=>t.renderOrder-e.renderOrder))):(e.sort(((t,e)=>t.index-e.index)),t._transparent&&e.sort(((t,e)=>e.relativeTranslation.z-t.relativeTranslation.z)),e.sort(((t,e)=>e.renderOrder-t.renderOrder)))}}addShaderPass(t){t._isScenePass?(this.stacks.scenePasses.push(t),this.sortShaderPassStack(this.stacks.scenePasses)):(this.stacks.renderPasses.push(t),this.sortShaderPassStack(this.stacks.renderPasses))}removeShaderPass(t){this.resetShaderPassStacks()}sortShaderPassStack(t){t.sort(((t,e)=>t.index-e.index)),t.sort(((t,e)=>t.renderOrder-e.renderOrder))}enableShaderPass(){this.stacks.scenePasses.length&&0===this.stacks.renderPasses.length&&this.renderer.planes.length&&(this.renderer.state.scenePassIndex=0,this.renderer.bindFrameBuffer(this.stacks.scenePasses[0].target))}drawRenderPasses(){this.stacks.scenePasses.length&&this.stacks.renderPasses.length&&this.renderer.planes.length&&(this.renderer.state.scenePassIndex=0,this.renderer.bindFrameBuffer(this.stacks.scenePasses[0].target));for(let t=0;t<this.stacks.renderPasses.length;t++)this.stacks.renderPasses[t]._startDrawing(),this.renderer.clearDepth()}drawScenePasses(){for(let t=0;t<this.stacks.scenePasses.length;t++)this.stacks.scenePasses[t]._startDrawing()}drawPingPongStack(){for(let t=0;t<this.stacks.pingPong.length;t++){const e=this.stacks.pingPong[t];e&&e._startDrawing()}}drawStack(t){for(let e=0;e<this.stacks[t].length;e++){const i=this.stacks[t][e];i&&i._startDrawing()}}draw(){this.drawPingPongStack(),this.enableShaderPass(),this.drawStack("renderTargets"),this.drawRenderPasses(),this.drawStack("transparent"),this.drawStack("opaque"),this.drawScenePasses()}}class Vs{constructor(){this.geometries=[],this.clear()}clear(){this.textures=[],this.programs=[]}getGeometryFromID(t){return this.geometries.find((e=>e.id===t))}addGeometry(t,e,i){this.geometries.push({id:t,vertices:e,uvs:i})}isSameShader(t,e){return 0===t.localeCompare(e)}getProgramFromShaders(t,e){return this.programs.find((i=>this.isSameShader(i.vsCode,t)&&this.isSameShader(i.fsCode,e)))}addProgram(t){this.programs.push(t)}getTextureFromSource(t){return this.textures.find((e=>e.source&&e.source.src===t.src&&e.uuid!=e.uuid))}addTexture(t){this.getTextureFromSource(t.source)||this.textures.push(t)}removeTexture(t){this.textures=this.textures.filter((e=>e.uuid!==t.uuid))}}class js{constructor(){this.clear()}clear(){this.queue=[]}add(t,e=!1){const i={callback:t,keep:e,timeout:null};return i.timeout=setTimeout((()=>{this.queue.push(i)}),0),i}execute(){this.queue.map((t=>{t.callback&&t.callback(),clearTimeout(this.queue.timeout)})),this.queue=this.queue.filter((t=>t.keep))}}class Xs{constructor({alpha:t,antialias:e,premultipliedAlpha:i,depth:r,failIfMajorPerformanceCaveat:s,preserveDrawingBuffer:n,stencil:a,container:o,pixelRatio:h,renderingScale:l,production:u,onError:c,onContextLost:d,onContextRestored:p,onDisposed:f,onSceneChange:m}){this.type="Renderer",this.alpha=t,this.antialias=e,this.premultipliedAlpha=i,this.depth=r,this.failIfMajorPerformanceCaveat=s,this.preserveDrawingBuffer=n,this.stencil=a,this.container=o,this.pixelRatio=h,this._renderingScale=l,this.production=u,this.onError=c,this.onContextLost=d,this.onContextRestored=p,this.onDisposed=f,this.onSceneChange=m,this.initState(),this.canvas=document.createElement("canvas");const g={alpha:this.alpha,premultipliedAlpha:this.premultipliedAlpha,antialias:this.antialias,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,stencil:this.stencil};if(this.gl=this.canvas.getContext("webgl2",g),this._isWebGL2=!!this.gl,this.gl||(this.gl=this.canvas.getContext("webgl",g)||this.canvas.getContext("experimental-webgl",g)),!this.gl)return this.production||Ls(this.type+": WebGL context could not be created"),this.state.isActive=!1,void(this.onError&&this.onError());this.initRenderer()}initState(){this.state={isActive:!0,isContextLost:!0,drawingEnabled:!0,forceRender:!1,currentProgramID:null,currentGeometryID:null,forceBufferUpdate:!1,depthTest:null,cullFace:null,frameBufferID:null,scenePassIndex:null,activeTexture:null,unpackAlignment:null,flipY:null,premultiplyAlpha:null}}initCallbackQueueManager(){this.nextRender=new js}initRenderer(){this.planes=[],this.renderTargets=[],this.shaderPasses=[],this.state.isContextLost=!1,this.initCallbackQueueManager(),this.setBlendFunc(),this.setDepthTest(!0),this.cache=new Vs,this.scene=new Us(this),this.getExtensions(),this._contextLostHandler=this.contextLost.bind(this),this.canvas.addEventListener("webglcontextlost",this._contextLostHandler,!1),this._contextRestoredHandler=this.contextRestored.bind(this),this.canvas.addEventListener("webglcontextrestored",this._contextRestoredHandler,!1)}getExtensions(){this.extensions=[],this._isWebGL2?(this.extensions.EXT_color_buffer_float=this.gl.getExtension("EXT_color_buffer_float"),this.extensions.OES_texture_float_linear=this.gl.getExtension("OES_texture_float_linear"),this.extensions.EXT_texture_filter_anisotropic=this.gl.getExtension("EXT_texture_filter_anisotropic"),this.extensions.WEBGL_lose_context=this.gl.getExtension("WEBGL_lose_context")):(this.extensions.OES_vertex_array_object=this.gl.getExtension("OES_vertex_array_object"),this.extensions.OES_texture_float=this.gl.getExtension("OES_texture_float"),this.extensions.OES_texture_float_linear=this.gl.getExtension("OES_texture_float_linear"),this.extensions.OES_texture_half_float=this.gl.getExtension("OES_texture_half_float"),this.extensions.OES_texture_half_float_linear=this.gl.getExtension("OES_texture_half_float_linear"),this.extensions.EXT_texture_filter_anisotropic=this.gl.getExtension("EXT_texture_filter_anisotropic"),this.extensions.OES_element_index_uint=this.gl.getExtension("OES_element_index_uint"),this.extensions.OES_standard_derivatives=this.gl.getExtension("OES_standard_derivatives"),this.extensions.EXT_sRGB=this.gl.getExtension("EXT_sRGB"),this.extensions.WEBGL_depth_texture=this.gl.getExtension("WEBGL_depth_texture"),this.extensions.WEBGL_draw_buffers=this.gl.getExtension("WEBGL_draw_buffers"),this.extensions.WEBGL_lose_context=this.gl.getExtension("WEBGL_lose_context"))}contextLost(t){this.state.isContextLost=!0,this.state.isActive&&(t.preventDefault(),this.nextRender.add((()=>this.onContextLost&&this.onContextLost())))}restoreContext(){this.state.isActive&&(this.initState(),this.gl&&this.extensions.WEBGL_lose_context?this.extensions.WEBGL_lose_context.restoreContext():(this.gl||this.production?this.extensions.WEBGL_lose_context||this.production||Ls(this.type+": Could not restore the context because the restore context extension is not defined"):Ls(this.type+": Could not restore the context because the context is not defined"),this.onError&&this.onError()))}isContextexFullyRestored(){let t=!0;for(let e=0;e<this.renderTargets.length;e++){this.renderTargets[e].textures[0]._canDraw||(t=!1);break}if(t)for(let e=0;e<this.planes.length;e++){if(!this.planes[e]._canDraw){t=!1;break}for(let i=0;i<this.planes[e].textures.length;i++)if(!this.planes[e].textures[i]._canDraw){t=!1;break}}if(t)for(let e=0;e<this.shaderPasses.length;e++){if(!this.shaderPasses[e]._canDraw){t=!1;break}for(let i=0;i<this.shaderPasses[e].textures.length;i++)if(!this.shaderPasses[e].textures[i]._canDraw){t=!1;break}}return t}contextRestored(){this.getExtensions(),this.setBlendFunc(),this.setDepthTest(!0),this.cache.clear(),this.scene.initStacks();for(let t=0;t<this.renderTargets.length;t++)this.renderTargets[t]._restoreContext();for(let t=0;t<this.planes.length;t++)this.planes[t]._restoreContext();for(let t=0;t<this.shaderPasses.length;t++)this.shaderPasses[t]._restoreContext();const t=this.nextRender.add((()=>{this.isContextexFullyRestored()&&(t.keep=!1,this.state.isContextLost=!1,this.onContextRestored&&this.onContextRestored(),this.onSceneChange(),this.needRender())}),!0)}setPixelRatio(t){this.pixelRatio=t}setSize(){if(!this.gl)return;const t=this.container.getBoundingClientRect();this._boundingRect={width:t.width*this.pixelRatio,height:t.height*this.pixelRatio,top:t.top*this.pixelRatio,left:t.left*this.pixelRatio};const e=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),i=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;e&&i&&(this._boundingRect.top=function(t){let e=0;for(;t&&!isNaN(t.offsetTop);)e+=t.offsetTop-t.scrollTop,t=t.offsetParent;return e}(this.container)*this.pixelRatio),this.canvas.style.width=Math.floor(this._boundingRect.width/this.pixelRatio)+"px",this.canvas.style.height=Math.floor(this._boundingRect.height/this.pixelRatio)+"px",this.canvas.width=Math.floor(this._boundingRect.width*this._renderingScale),this.canvas.height=Math.floor(this._boundingRect.height*this._renderingScale),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}resize(){for(let t=0;t<this.planes.length;t++)this.planes[t]._canDraw&&this.planes[t].resize();for(let t=0;t<this.shaderPasses.length;t++)this.shaderPasses[t]._canDraw&&this.shaderPasses[t].resize();for(let t=0;t<this.renderTargets.length;t++)this.renderTargets[t].resize();this.needRender()}clear(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}clearDepth(){this.gl.clear(this.gl.DEPTH_BUFFER_BIT)}clearColor(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)}bindFrameBuffer(t,e){let i=null;t?(i=t.index,i!==this.state.frameBufferID&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t._frameBuffer),this.gl.viewport(0,0,t._size.width,t._size.height),t._shouldClear&&!e&&this.clear())):null!==this.state.frameBufferID&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)),this.state.frameBufferID=i}setDepthTest(t){t&&!this.state.depthTest?(this.state.depthTest=t,this.gl.enable(this.gl.DEPTH_TEST)):!t&&this.state.depthTest&&(this.state.depthTest=t,this.gl.disable(this.gl.DEPTH_TEST))}setBlendFunc(){this.gl.enable(this.gl.BLEND),this.premultipliedAlpha?this.gl.blendFuncSeparate(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA)}setFaceCulling(t){if(this.state.cullFace!==t)if(this.state.cullFace=t,"none"===t)this.gl.disable(this.gl.CULL_FACE);else{const e="front"===t?this.gl.FRONT:this.gl.BACK;this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(e)}}useProgram(t){null!==this.state.currentProgramID&&this.state.currentProgramID===t.id||(this.gl.useProgram(t.program),this.state.currentProgramID=t.id)}removePlane(t){this.gl&&(this.planes=this.planes.filter((e=>e.uuid!==t.uuid)),this.scene.removePlane(t),t=null,this.gl&&this.clear(),this.onSceneChange())}removeRenderTarget(t){if(!this.gl)return;let e=this.planes.find((e=>"PingPongPlane"!==e.type&&e.target&&e.target.uuid===t.uuid));for(let e=0;e<this.planes.length;e++)this.planes[e].target&&this.planes[e].target.uuid===t.uuid&&(this.planes[e].target=null);this.renderTargets=this.renderTargets.filter((e=>e.uuid!==t.uuid));for(let t=0;t<this.renderTargets.length;t++)this.renderTargets[t].index=t;t=null,this.gl&&this.clear(),e&&this.scene.resetPlaneStacks(),this.onSceneChange()}removeShaderPass(t){this.gl&&(this.shaderPasses=this.shaderPasses.filter((e=>e.uuid!==t.uuid)),this.scene.removeShaderPass(t),t=null,this.gl&&this.clear(),this.onSceneChange())}enableDrawing(){this.state.drawingEnabled=!0}disableDrawing(){this.state.drawingEnabled=!1}needRender(){this.state.forceRender=!0}render(){this.gl&&(this.clear(),this.state.currentGeometryID=null,this.scene.draw())}deletePrograms(){for(let t=0;t<this.cache.programs.length;t++){const e=this.cache.programs[t];this.gl.deleteProgram(e.program)}}dispose(){if(!this.gl)return;for(this.state.isActive=!1;this.planes.length>0;)this.removePlane(this.planes[0]);for(;this.shaderPasses.length>0;)this.removeShaderPass(this.shaderPasses[0]);for(;this.renderTargets.length>0;)this.removeRenderTarget(this.renderTargets[0]);let t=this.nextRender.add((()=>{0===this.planes.length&&0===this.shaderPasses.length&&0===this.renderTargets.length&&(t.keep=!1,this.deletePrograms(),this.clear(),this.canvas.removeEventListener("webgllost",this._contextLostHandler,!1),this.canvas.removeEventListener("webglrestored",this._contextRestoredHandler,!1),this.gl&&this.extensions.WEBGL_lose_context&&this.extensions.WEBGL_lose_context.loseContext(),this.canvas.width=this.canvas.width,this.gl=null,this.container.removeChild(this.canvas),this.container=null,this.canvas=null,this.onDisposed&&this.onDisposed())}),!0)}}class Hs{constructor({xOffset:t=0,yOffset:e=0,lastXDelta:i=0,lastYDelta:r=0,shouldWatch:s=!0,onScroll:n=(()=>{})}={}){this.xOffset=t,this.yOffset=e,this.lastXDelta=i,this.lastYDelta=r,this.shouldWatch=s,this.onScroll=n,this.handler=this.scroll.bind(this,!0),this.shouldWatch&&window.addEventListener("scroll",this.handler,{passive:!0})}scroll(){this.updateScrollValues(window.pageXOffset,window.pageYOffset)}updateScrollValues(t,e){const i=this.xOffset;this.xOffset=t,this.lastXDelta=i-this.xOffset;const r=this.yOffset;this.yOffset=e,this.lastYDelta=r-this.yOffset,this.onScroll&&this.onScroll(this.lastXDelta,this.lastYDelta)}dispose(){this.shouldWatch&&window.removeEventListener("scroll",this.handler,{passive:!0})}}class Ws{constructor({container:t,alpha:e=!0,premultipliedAlpha:i=!1,antialias:r=!0,depth:s=!0,failIfMajorPerformanceCaveat:n=!0,preserveDrawingBuffer:a=!1,stencil:o=!1,autoResize:h=!0,autoRender:l=!0,watchScroll:u=!0,pixelRatio:c=window.devicePixelRatio||1,renderingScale:d=1,production:p=!1}={}){this.type="Curtains",this._autoResize=h,this._autoRender=l,this._watchScroll=u,this.pixelRatio=c,d=isNaN(d)?1:parseFloat(d),this._renderingScale=Math.max(.25,Math.min(1,d)),this.premultipliedAlpha=i,this.alpha=e,this.antialias=r,this.depth=s,this.failIfMajorPerformanceCaveat=n,this.preserveDrawingBuffer=a,this.stencil=o,this.production=p,this.errors=!1,t?this.setContainer(t):this.production||Ls(this.type+": no container provided in the initial parameters. Use setContainer() method to set one later and initialize the WebGL context")}setContainer(t){if(t)if("string"==typeof t)if(t=document.getElementById(t))this.container=t;else{let t=document.createElement("div");t.setAttribute("id","curtains-canvas"),document.body.appendChild(t),this.container=t,this.production||Ls('Curtains: no valid container HTML element or ID provided, created a div with "curtains-canvas" ID instead')}else t instanceof Element&&(this.container=t);else{let t=document.createElement("div");t.setAttribute("id","curtains-canvas"),document.body.appendChild(t),this.container=t,this.production||Ls('Curtains: no valid container HTML element or ID provided, created a div with "curtains-canvas" ID instead')}this._initCurtains()}_initCurtains(){this.planes=[],this.renderTargets=[],this.shaderPasses=[],this._initRenderer(),this.gl&&(this._initScroll(),this._setSize(),this._addListeners(),this.container.appendChild(this.canvas),console.log("curtains.js - v8.0"),this._animationFrameID=null,this._autoRender&&this._animate())}_initRenderer(){this.renderer=new Xs({alpha:this.alpha,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,stencil:this.stencil,container:this.container,pixelRatio:this.pixelRatio,renderingScale:this._renderingScale,production:this.production,onError:()=>this._onRendererError(),onContextLost:()=>this._onRendererContextLost(),onContextRestored:()=>this._onRendererContextRestored(),onDisposed:()=>this._onRendererDisposed(),onSceneChange:()=>this._keepSync()}),this.gl=this.renderer.gl,this.canvas=this.renderer.canvas}restoreContext(){this.renderer.restoreContext()}_animate(){this.render(),this._animationFrameID=window.requestAnimationFrame(this._animate.bind(this))}enableDrawing(){this.renderer.enableDrawing()}disableDrawing(){this.renderer.disableDrawing()}needRender(){this.renderer.needRender()}nextRender(t,e=!1){return this.renderer.nextRender.add(t,e)}clear(){this.renderer&&this.renderer.clear()}clearDepth(){this.renderer&&this.renderer.clearDepth()}clearColor(){this.renderer&&this.renderer.clearColor()}isWebGL2(){return!!this.gl&&this.renderer._isWebGL2}render(){this.renderer.nextRender.execute(),(this.renderer.state.drawingEnabled||this.renderer.state.forceRender)&&(this.renderer.state.forceRender&&(this.renderer.state.forceRender=!1),this._onRenderCallback&&this._onRenderCallback(),this.renderer.render())}_addListeners(){this._resizeHandler=null,this._autoResize&&(this._resizeHandler=this.resize.bind(this,!0),window.addEventListener("resize",this._resizeHandler,!1))}setPixelRatio(t,e){this.pixelRatio=parseFloat(Math.max(t,1))||1,this.renderer.setPixelRatio(t),this.resize(e)}_setSize(){this.renderer.setSize(),this._scrollManager.shouldWatch&&(this._scrollManager.xOffset=window.pageXOffset,this._scrollManager.yOffset=window.pageYOffset)}getBoundingRect(){return this.renderer._boundingRect}resize(t){this.gl&&(this._setSize(),this.renderer.resize(),this.nextRender((()=>{this._onAfterResizeCallback&&t&&this._onAfterResizeCallback()})))}_initScroll(){this._scrollManager=new Hs({xOffset:window.pageXOffset,yOffset:window.pageYOffset,lastXDelta:0,lastYDelta:0,shouldWatch:this._watchScroll,onScroll:(t,e)=>this._updateScroll(t,e)})}_updateScroll(t,e){for(let i=0;i<this.planes.length;i++)this.planes[i].watchScroll&&this.planes[i].updateScrollPosition(t,e);this.renderer.needRender(),this._onScrollCallback&&this._onScrollCallback()}updateScrollValues(t,e){this._scrollManager.updateScrollValues(t,e)}getScrollDeltas(){return{x:this._scrollManager.lastXDelta,y:this._scrollManager.lastYDelta}}getScrollValues(){return{x:this._scrollManager.xOffset,y:this._scrollManager.yOffset}}_keepSync(){this.planes=this.renderer.planes,this.shaderPasses=this.renderer.shaderPasses,this.renderTargets=this.renderer.renderTargets}lerp(t,e,i){return function(t,e,i){return(1-i)*t+i*e}(t,e,i)}onAfterResize(t){return t&&(this._onAfterResizeCallback=t),this}onError(t){return t&&(this._onErrorCallback=t),this}_onRendererError(){setTimeout((()=>{this._onErrorCallback&&!this.errors&&this._onErrorCallback(),this.errors=!0}),0)}onContextLost(t){return t&&(this._onContextLostCallback=t),this}_onRendererContextLost(){this._onContextLostCallback&&this._onContextLostCallback()}onContextRestored(t){return t&&(this._onContextRestoredCallback=t),this}_onRendererContextRestored(){this._onContextRestoredCallback&&this._onContextRestoredCallback()}onRender(t){return t&&(this._onRenderCallback=t),this}onScroll(t){return t&&(this._onScrollCallback=t),this}dispose(){this.renderer.dispose()}_onRendererDisposed(){this._animationFrameID&&window.cancelAnimationFrame(this._animationFrameID),this._resizeHandler&&window.removeEventListener("resize",this._resizeHandler,!1),this._scrollManager&&this._scrollManager.dispose()}}class Ys{constructor(t,e,i){if(this.type="Uniforms",t&&"Renderer"===t.type?t.gl||zs(this.type+": Renderer WebGL context is undefined",t):zs(this.type+": Renderer not passed as first argument",t),this.renderer=t,this.gl=t.gl,this.program=e,this.uniforms={},i)for(const t in i){const e=i[t];this.uniforms[t]={name:e.name,type:e.type,value:e.value.clone&&"function"==typeof e.value.clone?e.value.clone():e.value,update:null}}}handleUniformSetting(t){switch(t.type){case"1i":t.update=this.setUniform1i.bind(this);break;case"1iv":t.update=this.setUniform1iv.bind(this);break;case"1f":t.update=this.setUniform1f.bind(this);break;case"1fv":t.update=this.setUniform1fv.bind(this);break;case"2i":t.update=this.setUniform2i.bind(this);break;case"2iv":t.update=this.setUniform2iv.bind(this);break;case"2f":t.update=this.setUniform2f.bind(this);break;case"2fv":t.update=this.setUniform2fv.bind(this);break;case"3i":t.update=this.setUniform3i.bind(this);break;case"3iv":t.update=this.setUniform3iv.bind(this);break;case"3f":t.update=this.setUniform3f.bind(this);break;case"3fv":t.update=this.setUniform3fv.bind(this);break;case"4i":t.update=this.setUniform4i.bind(this);break;case"4iv":t.update=this.setUniform4iv.bind(this);break;case"4f":t.update=this.setUniform4f.bind(this);break;case"4fv":t.update=this.setUniform4fv.bind(this);break;case"mat2":t.update=this.setUniformMatrix2fv.bind(this);break;case"mat3":t.update=this.setUniformMatrix3fv.bind(this);break;case"mat4":t.update=this.setUniformMatrix4fv.bind(this);break;default:this.renderer.production||Ls(this.type+": This uniform type is not handled : ",t.type)}}setInternalFormat(t){"Vec2"===t.value.type?(t._internalFormat="Vec2",t.lastValue=t.value.clone()):"Vec3"===t.value.type?(t._internalFormat="Vec3",t.lastValue=t.value.clone()):"Mat4"===t.value.type?(t._internalFormat="Mat4",t.lastValue=t.value.clone()):"Quat"===t.value.type?(t._internalFormat="Quat",t.lastValue=t.value.clone()):Array.isArray(t.value)?(t._internalFormat="array",t.lastValue=Array.from(t.value)):t.value.constructor===Float32Array?(t._internalFormat="mat",t.lastValue=t.value):(t._internalFormat="float",t.lastValue=t.value)}setUniforms(){if(this.uniforms)for(const t in this.uniforms){let e=this.uniforms[t];e.location=this.gl.getUniformLocation(this.program,e.name),e._internalFormat||this.setInternalFormat(e),e.type||("Vec2"===e._internalFormat?e.type="2f":"Vec3"===e._internalFormat?e.type="3f":"Mat4"===e._internalFormat?e.type="mat4":"array"===e._internalFormat?4===e.value.length?(e.type="4f",this.renderer.production||Ls(this.type+": No uniform type declared for "+e.name+", applied a 4f (array of 4 floats) uniform type")):3===e.value.length?(e.type="3f",this.renderer.production||Ls(this.type+": No uniform type declared for "+e.name+", applied a 3f (array of 3 floats) uniform type")):2===e.value.length&&(e.type="2f",this.renderer.production||Ls(this.type+": No uniform type declared for "+e.name+", applied a 2f (array of 2 floats) uniform type")):"mat"===e._internalFormat?16===e.value.length?(e.type="mat4",this.renderer.production||Ls(this.type+": No uniform type declared for "+e.name+", applied a mat4 (4x4 matrix array) uniform type")):9===e.value.length?(e.type="mat3",this.renderer.production||Ls(this.type+": No uniform type declared for "+e.name+", applied a mat3 (3x3 matrix array) uniform type")):4===e.value.length&&(e.type="mat2",this.renderer.production||Ls(this.type+": No uniform type declared for "+e.name+", applied a mat2 (2x2 matrix array) uniform type")):(e.type="1f",this.renderer.production||Ls(this.type+": No uniform type declared for "+e.name+", applied a 1f (float) uniform type"))),this.handleUniformSetting(e),e.update&&e.update(e)}}updateUniforms(){if(this.uniforms)for(const t in this.uniforms){const e=this.uniforms[t];let i=!1;"Vec2"===e._internalFormat||"Vec3"===e._internalFormat||"Quat"===e._internalFormat?e.value.equals(e.lastValue)||(i=!0,e.lastValue.copy(e.value)):e.value.length?JSON.stringify(e.value)!==JSON.stringify(e.lastValue)&&(i=!0,e.lastValue=Array.from(e.value)):e.value!==e.lastValue&&(i=!0,e.lastValue=e.value),i&&e.update&&e.update(e)}}setUniform1i(t){this.gl.uniform1i(t.location,t.value)}setUniform1iv(t){this.gl.uniform1iv(t.location,t.value)}setUniform1f(t){this.gl.uniform1f(t.location,t.value)}setUniform1fv(t){this.gl.uniform1fv(t.location,t.value)}setUniform2i(t){"Vec2"===t._internalFormat?this.gl.uniform2i(t.location,t.value.x,t.value.y):this.gl.uniform2i(t.location,t.value[0],t.value[1])}setUniform2iv(t){"Vec2"===t._internalFormat?this.gl.uniform2iv(t.location,[t.value.x,t.value.y]):this.gl.uniform2iv(t.location,t.value)}setUniform2f(t){"Vec2"===t._internalFormat?this.gl.uniform2f(t.location,t.value.x,t.value.y):this.gl.uniform2f(t.location,t.value[0],t.value[1])}setUniform2fv(t){"Vec2"===t._internalFormat?this.gl.uniform2fv(t.location,[t.value.x,t.value.y]):this.gl.uniform2fv(t.location,t.value)}setUniform3i(t){"Vec3"===t._internalFormat?this.gl.uniform3i(t.location,t.value.x,t.value.y,t.value.z):this.gl.uniform3i(t.location,t.value[0],t.value[1],t.value[2])}setUniform3iv(t){"Vec3"===t._internalFormat?this.gl.uniform3iv(t.location,[t.value.x,t.value.y,t.value.z]):this.gl.uniform3iv(t.location,t.value)}setUniform3f(t){"Vec3"===t._internalFormat?this.gl.uniform3f(t.location,t.value.x,t.value.y,t.value.z):this.gl.uniform3f(t.location,t.value[0],t.value[1],t.value[2])}setUniform3fv(t){"Vec3"===t._internalFormat?this.gl.uniform3fv(t.location,[t.value.x,t.value.y,t.value.z]):this.gl.uniform3fv(t.location,t.value)}setUniform4i(t){"Quat"===t._internalFormat?this.gl.uniform4i(t.location,t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]):this.gl.uniform4i(t.location,t.value[0],t.value[1],t.value[2],t.value[3])}setUniform4iv(t){"Quat"===t._internalFormat?this.gl.uniform4iv(t.location,[t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]]):this.gl.uniform4iv(t.location,t.value)}setUniform4f(t){"Quat"===t._internalFormat?this.gl.uniform4f(t.location,t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]):this.gl.uniform4f(t.location,t.value[0],t.value[1],t.value[2],t.value[3])}setUniform4fv(t){"Quat"===t._internalFormat?this.gl.uniform4fv(t.location,[t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]]):this.gl.uniform4fv(t.location,t.value)}setUniformMatrix2fv(t){this.gl.uniformMatrix2fv(t.location,!1,t.value)}setUniformMatrix3fv(t){this.gl.uniformMatrix3fv(t.location,!1,t.value)}setUniformMatrix4fv(t){"Mat4"===t._internalFormat?this.gl.uniformMatrix4fv(t.location,!1,t.value.elements):this.gl.uniformMatrix4fv(t.location,!1,t.value)}}const qs="\nprecision mediump float;\n".replace(/\n/g,""),Gs="\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n".replace(/\n/g,""),Ks="\nvarying vec3 vVertexPosition;\nvarying vec2 vTextureCoord;\n".replace(/\n/g,""),Qs=(qs+Gs+Ks+"\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\nvoid main() {\n    vTextureCoord = aTextureCoord;\n    vVertexPosition = aVertexPosition;\n    \n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n}\n").replace(/\n/g,""),Zs=(qs+Ks+"\nvoid main() {\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n}\n").replace(/\n/g,""),$s=(qs+Gs+Ks+"\nvoid main() {\n    vTextureCoord = aTextureCoord;\n    vVertexPosition = aVertexPosition;\n    \n    gl_Position = vec4(aVertexPosition, 1.0);\n}\n").replace(/\n/g,""),Js=(qs+Ks+"\nuniform sampler2D uRenderTexture;\n\nvoid main() {\n    gl_FragColor = texture2D(uRenderTexture, vTextureCoord);\n}\n").replace(/\n/g,"");class tn{constructor(t,{parent:e,vertexShader:i,fragmentShader:r}={}){this.type="Program",t&&"Renderer"===t.type?t.gl||zs(this.type+": Renderer WebGL context is undefined",t):zs(this.type+": Renderer not passed as first argument",t),this.renderer=t,this.gl=this.renderer.gl,this.parent=e,this.defaultVsCode="Plane"===this.parent.type?Qs:$s,this.defaultFsCode="Plane"===this.parent.type?Zs:Js,i?this.vsCode=i:(this.renderer.production||"Plane"!==this.parent.type||Ls(this.parent.type+": No vertex shader provided, will use a default one"),this.vsCode=this.defaultVsCode),r?this.fsCode=r:(this.renderer.production||Ls(this.parent.type+": No fragment shader provided, will use a default one"),this.fsCode=this.defaultFsCode),this.compiled=!0,this.setupProgram()}createShader(t,e){const i=this.gl.createShader(e);if(this.gl.shaderSource(i,t),this.gl.compileShader(i),!this.renderer.production&&!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)){const t=e===this.gl.VERTEX_SHADER?"vertex shader":"fragment shader";let r=this.gl.getShaderSource(i).split("\n");for(let t=0;t<r.length;t++)r[t]=t+1+": "+r[t];return r=r.join("\n"),Ls(this.type+": Errors occurred while compiling the",t,":\n",this.gl.getShaderInfoLog(i)),zs(r),Ls(this.type+": Will use a default",t),this.createShader(e===this.gl.VERTEX_SHADER?this.defaultVsCode:this.defaultFsCode,e)}return i}useNewShaders(){this.vertexShader=this.createShader(this.vsCode,this.gl.VERTEX_SHADER),this.fragmentShader=this.createShader(this.fsCode,this.gl.FRAGMENT_SHADER),this.vertexShader&&this.fragmentShader||this.renderer.production||Ls(this.type+": Unable to find or compile the vertex or fragment shader")}setupProgram(){let t=this.renderer.cache.getProgramFromShaders(this.vsCode,this.fsCode);t?(this.vertexShader=t.vertexShader,this.fragmentShader=t.fragmentShader,this.activeTextures=t.activeTextures,this.createProgram()):(this.useNewShaders(),this.compiled&&this.createProgram())}createProgram(){if(this.id=this.renderer.cache.programs.length,this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),!this.renderer.production&&!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return Ls(this.type+": Unable to initialize the shader program: "+this.gl.getProgramInfoLog(this.program)),Ls(this.type+": Will use default vertex and fragment shaders"),this.vertexShader=this.createShader(this.defaultVsCode,this.gl.VERTEX_SHADER),this.fragmentShader=this.createShader(this.defaultFsCode,this.gl.FRAGMENT_SHADER),void this.createProgram();if(this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),!this.activeUniforms){this.activeUniforms={textures:[],textureMatrices:[]};const t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let e=0;e<t;e++){const t=this.gl.getActiveUniform(this.program,e);t.type===this.gl.SAMPLER_2D&&this.activeUniforms.textures.push(t.name),t.type===this.gl.FLOAT_MAT4&&"uMVMatrix"!==t.name&&"uPMatrix"!==t.name&&this.activeUniforms.textureMatrices.push(t.name)}}this.renderer.cache.addProgram(this)}createUniforms(t){this.uniformsManager=new Ys(this.renderer,this.program,t),this.setUniforms()}setUniforms(){this.renderer.useProgram(this),this.uniformsManager.setUniforms()}updateUniforms(){this.renderer.useProgram(this),this.uniformsManager.updateUniforms()}}class en{constructor(t,{program:e=null,width:i=1,height:r=1}={}){this.type="Geometry",t&&"Renderer"===t.type?t.gl||zs(this.type+": Renderer WebGL context is undefined",t):zs(this.type+": Renderer not passed as first argument",t),this.renderer=t,this.gl=this.renderer.gl,this.definition={id:i*r+i,width:i,height:r},this.setDefaultAttributes(),this.setVerticesUVs()}restoreContext(t){this.program=null,this.setDefaultAttributes(),this.setVerticesUVs(),this.setProgram(t)}setDefaultAttributes(){this.attributes={vertexPosition:{name:"aVertexPosition",size:3},textureCoord:{name:"aTextureCoord",size:3}}}setVerticesUVs(){const t=this.renderer.cache.getGeometryFromID(this.definition.id);t?(this.attributes.vertexPosition.array=t.vertices,this.attributes.textureCoord.array=t.uvs):(this.computeVerticesUVs(),this.renderer.cache.addGeometry(this.definition.id,this.attributes.vertexPosition.array,this.attributes.textureCoord.array))}setProgram(t){this.program=t.program,this.initAttributes(),this.renderer._isWebGL2?(this._vao=this.gl.createVertexArray(),this.gl.bindVertexArray(this._vao)):this.renderer.extensions.OES_vertex_array_object&&(this._vao=this.renderer.extensions.OES_vertex_array_object.createVertexArrayOES(),this.renderer.extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao)),this.initializeBuffers()}initAttributes(){for(const t in this.attributes)this.attributes[t].location=this.gl.getAttribLocation(this.program,this.attributes[t].name),this.attributes[t].buffer=this.gl.createBuffer(),this.attributes[t].numberOfItems=this.definition.width*this.definition.height*this.attributes[t].size*2}computeVerticesUVs(){this.attributes.vertexPosition.array=[],this.attributes.textureCoord.array=[];const t=this.attributes.vertexPosition.array,e=this.attributes.textureCoord.array;for(let i=0;i<this.definition.height;i++){const r=i/this.definition.height;for(let i=0;i<this.definition.width;i++){const s=i/this.definition.width;e.push(s),e.push(r),e.push(0),t.push(2*(s-.5)),t.push(2*(r-.5)),t.push(0),e.push(s+1/this.definition.width),e.push(r),e.push(0),t.push(2*(s+1/this.definition.width-.5)),t.push(2*(r-.5)),t.push(0),e.push(s),e.push(r+1/this.definition.height),e.push(0),t.push(2*(s-.5)),t.push(2*(r+1/this.definition.height-.5)),t.push(0),e.push(s),e.push(r+1/this.definition.height),e.push(0),t.push(2*(s-.5)),t.push(2*(r+1/this.definition.height-.5)),t.push(0),e.push(s+1/this.definition.width),e.push(r),e.push(0),t.push(2*(s+1/this.definition.width-.5)),t.push(2*(r-.5)),t.push(0),e.push(s+1/this.definition.width),e.push(r+1/this.definition.height),e.push(0),t.push(2*(s+1/this.definition.width-.5)),t.push(2*(r+1/this.definition.height-.5)),t.push(0)}}}initializeBuffers(){if(this.attributes){for(const t in this.attributes)this.gl.enableVertexAttribArray(this.attributes[t].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[t].buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.attributes[t].array),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.attributes[t].location,this.attributes[t].size,this.gl.FLOAT,!1,0,0);this.renderer.state.currentGeometryID=this.definition.id}}bindBuffers(){if(this._vao)this.renderer._isWebGL2?this.gl.bindVertexArray(this._vao):this.renderer.extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao);else for(const t in this.attributes)this.gl.enableVertexAttribArray(this.attributes[t].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[t].buffer),this.gl.vertexAttribPointer(this.attributes[t].location,this.attributes[t].size,this.gl.FLOAT,!1,0,0);this.renderer.state.currentGeometryID=this.definition.id}draw(){this.gl.drawArrays(this.gl.TRIANGLES,0,this.attributes.vertexPosition.numberOfItems)}dispose(){this._vao&&(this.renderer._isWebGL2?this.gl.deleteVertexArray(this._vao):this.renderer.extensions.OES_vertex_array_object.deleteVertexArrayOES(this._vao));for(const t in this.attributes)this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[t].buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,1,this.gl.STATIC_DRAW),this.gl.deleteBuffer(this.attributes[t].buffer);this.attributes=null,this.renderer.state.currentGeometryID=null}}class rn{constructor(t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])){this.type="Mat4",this.elements=t}setFromArray(t){for(let e=0;e<this.elements.length;e++)this.elements[e]=t[e];return this}copy(t){const e=t.elements;return this.elements[0]=e[0],this.elements[1]=e[1],this.elements[2]=e[2],this.elements[3]=e[3],this.elements[4]=e[4],this.elements[5]=e[5],this.elements[6]=e[6],this.elements[7]=e[7],this.elements[8]=e[8],this.elements[9]=e[9],this.elements[10]=e[10],this.elements[11]=e[11],this.elements[12]=e[12],this.elements[13]=e[13],this.elements[14]=e[14],this.elements[15]=e[15],this}clone(){return(new rn).copy(this)}multiply(t){const e=this.elements,i=t.elements;let r=new rn;return r.elements[0]=i[0]*e[0]+i[1]*e[4]+i[2]*e[8]+i[3]*e[12],r.elements[1]=i[0]*e[1]+i[1]*e[5]+i[2]*e[9]+i[3]*e[13],r.elements[2]=i[0]*e[2]+i[1]*e[6]+i[2]*e[10]+i[3]*e[14],r.elements[3]=i[0]*e[3]+i[1]*e[7]+i[2]*e[11]+i[3]*e[15],r.elements[4]=i[4]*e[0]+i[5]*e[4]+i[6]*e[8]+i[7]*e[12],r.elements[5]=i[4]*e[1]+i[5]*e[5]+i[6]*e[9]+i[7]*e[13],r.elements[6]=i[4]*e[2]+i[5]*e[6]+i[6]*e[10]+i[7]*e[14],r.elements[7]=i[4]*e[3]+i[5]*e[7]+i[6]*e[11]+i[7]*e[15],r.elements[8]=i[8]*e[0]+i[9]*e[4]+i[10]*e[8]+i[11]*e[12],r.elements[9]=i[8]*e[1]+i[9]*e[5]+i[10]*e[9]+i[11]*e[13],r.elements[10]=i[8]*e[2]+i[9]*e[6]+i[10]*e[10]+i[11]*e[14],r.elements[11]=i[8]*e[3]+i[9]*e[7]+i[10]*e[11]+i[11]*e[15],r.elements[12]=i[12]*e[0]+i[13]*e[4]+i[14]*e[8]+i[15]*e[12],r.elements[13]=i[12]*e[1]+i[13]*e[5]+i[14]*e[9]+i[15]*e[13],r.elements[14]=i[12]*e[2]+i[13]*e[6]+i[14]*e[10]+i[15]*e[14],r.elements[15]=i[12]*e[3]+i[13]*e[7]+i[14]*e[11]+i[15]*e[15],r}getInverse(){const t=this.elements,e=new rn,i=e.elements;let r=t[0],s=t[1],n=t[2],a=t[3],o=t[4],h=t[5],l=t[6],u=t[7],c=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],_=t[14],v=t[15],D=r*h-s*o,y=r*l-n*o,x=r*u-a*o,b=s*l-n*h,w=s*u-a*h,E=n*u-a*l,C=c*g-d*m,T=c*_-p*m,S=c*v-f*m,F=d*_-p*g,P=d*v-f*g,R=p*v-f*_,k=D*R-y*P+x*F+b*S-w*T+E*C;return k?(k=1/k,i[0]=(h*R-l*P+u*F)*k,i[1]=(n*P-s*R-a*F)*k,i[2]=(g*E-_*w+v*b)*k,i[3]=(p*w-d*E-f*b)*k,i[4]=(l*S-o*R-u*T)*k,i[5]=(r*R-n*S+a*T)*k,i[6]=(_*x-m*E-v*y)*k,i[7]=(c*E-p*x+f*y)*k,i[8]=(o*P-h*S+u*C)*k,i[9]=(s*S-r*P-a*C)*k,i[10]=(m*w-g*x+v*D)*k,i[11]=(d*x-c*w-f*D)*k,i[12]=(h*T-o*F-l*C)*k,i[13]=(r*F-s*T+n*C)*k,i[14]=(g*y-m*b-_*D)*k,i[15]=(c*b-d*y+p*D)*k,e):null}scale(t){let e=this.elements;return e[0]*=t.x,e[1]*=t.x,e[2]*=t.x,e[3]*=t.x,e[4]*=t.y,e[5]*=t.y,e[6]*=t.y,e[7]*=t.y,e[8]*=t.z,e[9]*=t.z,e[10]*=t.z,e[11]*=t.z,this}compose(t,e,i){let r=this.elements;const s=e.elements[0],n=e.elements[1],a=e.elements[2],o=e.elements[3],h=s+s,l=n+n,u=a+a,c=s*h,d=s*l,p=s*u,f=n*l,m=n*u,g=a*u,_=o*h,v=o*l,D=o*u,y=i.x,x=i.y,b=i.z;return r[0]=(1-(f+g))*y,r[1]=(d+D)*y,r[2]=(p-v)*y,r[3]=0,r[4]=(d-D)*x,r[5]=(1-(c+g))*x,r[6]=(m+_)*x,r[7]=0,r[8]=(p+v)*b,r[9]=(m-_)*b,r[10]=(1-(c+f))*b,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}composeFromOrigin(t,e,i,r){let s=this.elements;const n=e.elements[0],a=e.elements[1],o=e.elements[2],h=e.elements[3],l=n+n,u=a+a,c=o+o,d=n*l,p=n*u,f=n*c,m=a*u,g=a*c,_=o*c,v=h*l,D=h*u,y=h*c,x=i.x,b=i.y,w=i.z,E=r.x,C=r.y,T=r.z,S=(1-(m+_))*x,F=(p+y)*x,P=(f-D)*x,R=(p-y)*b,k=(1-(d+_))*b,A=(g+v)*b,M=(f+D)*w,O=(g-v)*w,B=(1-(d+m))*w;return s[0]=S,s[1]=F,s[2]=P,s[3]=0,s[4]=R,s[5]=k,s[6]=A,s[7]=0,s[8]=M,s[9]=O,s[10]=B,s[11]=0,s[12]=t.x+E-(S*E+R*C+M*T),s[13]=t.y+C-(F*E+k*C+O*T),s[14]=t.z+T-(P*E+A*C+B*T),s[15]=1,this}}class sn{constructor(t=0,e=t){this.type="Vec2",this._x=t,this._y=e}get x(){return this._x}get y(){return this._y}set x(t){const e=t!==this._x;this._x=t,e&&this._onChangeCallback&&this._onChangeCallback()}set y(t){const e=t!==this._y;this._y=t,e&&this._onChangeCallback&&this._onChangeCallback()}onChange(t){return t&&(this._onChangeCallback=t),this}set(t,e){return this._x=t,this._y=e,this}add(t){return this._x+=t.x,this._y+=t.y,this}addScalar(t){return this._x+=t,this._y+=t,this}sub(t){return this._x-=t.x,this._y-=t.y,this}subScalar(t){return this._x-=t,this._y-=t,this}multiply(t){return this._x*=t.x,this._y*=t.y,this}multiplyScalar(t){return this._x*=t,this._y*=t,this}copy(t){return this._x=t.x,this._y=t.y,this}clone(){return new sn(this._x,this._y)}sanitizeNaNValuesWith(t){return this._x=isNaN(this._x)?t.x:parseFloat(this._x),this._y=isNaN(this._y)?t.y:parseFloat(this._y),this}max(t){return this._x=Math.max(this._x,t.x),this._y=Math.max(this._y,t.y),this}min(t){return this._x=Math.min(this._x,t.x),this._y=Math.min(this._y,t.y),this}equals(t){return this._x===t.x&&this._y===t.y}normalize(){let t=this._x*this._x+this._y*this._y;return t>0&&(t=1/Math.sqrt(t)),this._x*=t,this._y*=t,this}dot(t){return this._x*t.x+this._y*t.y}}class nn{constructor(t=0,e=t,i=t){this.type="Vec3",this._x=t,this._y=e,this._z=i}get x(){return this._x}get y(){return this._y}get z(){return this._z}set x(t){const e=t!==this._x;this._x=t,e&&this._onChangeCallback&&this._onChangeCallback()}set y(t){const e=t!==this._y;this._y=t,e&&this._onChangeCallback&&this._onChangeCallback()}set z(t){const e=t!==this._z;this._z=t,e&&this._onChangeCallback&&this._onChangeCallback()}onChange(t){return t&&(this._onChangeCallback=t),this}set(t,e,i){return this._x=t,this._y=e,this._z=i,this}add(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this}addScalar(t){return this._x+=t,this._y+=t,this._z+=t,this}sub(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this}subScalar(t){return this._x-=t,this._y-=t,this._z-=t,this}multiply(t){return this._x*=t.x,this._y*=t.y,this._z*=t.z,this}multiplyScalar(t){return this._x*=t,this._y*=t,this._z*=t,this}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this}clone(){return new nn(this._x,this._y,this._z)}sanitizeNaNValuesWith(t){return this._x=isNaN(this._x)?t.x:parseFloat(this._x),this._y=isNaN(this._y)?t.y:parseFloat(this._y),this._z=isNaN(this._z)?t.z:parseFloat(this._z),this}max(t){return this._x=Math.max(this._x,t.x),this._y=Math.max(this._y,t.y),this._z=Math.max(this._z,t.z),this}min(t){return this._x=Math.min(this._x,t.x),this._y=Math.min(this._y,t.y),this._z=Math.min(this._z,t.z),this}equals(t){return this._x===t.x&&this._y===t.y&&this._z===t.z}normalize(){let t=this._x*this._x+this._y*this._y+this._z*this._z;return t>0&&(t=1/Math.sqrt(t)),this._x*=t,this._y*=t,this._z*=t,this}dot(t){return this._x*t.x+this._y*t.y+this._z*t.z}applyMat4(t){const e=this._x,i=this._y,r=this._z,s=t.elements;let n=s[3]*e+s[7]*i+s[11]*r+s[15];return n=n||1,this._x=(s[0]*e+s[4]*i+s[8]*r+s[12])/n,this._y=(s[1]*e+s[5]*i+s[9]*r+s[13])/n,this._z=(s[2]*e+s[6]*i+s[10]*r+s[14])/n,this}applyQuat(t){const e=this._x,i=this._y,r=this._z,s=t.elements[0],n=t.elements[1],a=t.elements[2],o=t.elements[3],h=o*e+n*r-a*i,l=o*i+a*e-s*r,u=o*r+s*i-n*e,c=-s*e-n*i-a*r;return this._x=h*o+c*-s+l*-a-u*-n,this._y=l*o+c*-n+u*-s-h*-a,this._z=u*o+c*-a+h*-n-l*-s,this}project(t){return this.applyMat4(t.viewMatrix).applyMat4(t.projectionMatrix),this}unproject(t){return this.applyMat4(t.projectionMatrix.getInverse()).applyMat4(t.worldMatrix),this}}const an=new sn,on=new nn,hn=new rn;class ln{constructor(t,{isFBOTexture:e=!1,fromTexture:i=!1,loader:r,sampler:s,floatingPoint:n="none",premultiplyAlpha:a=!1,anisotropy:o=1,generateMipmap:h=null,wrapS:l,wrapT:u,minFilter:c,magFilter:d}={}){if(this.type="Texture",(t=t&&t.renderer||t)&&"Renderer"===t.type?t.gl||zs(this.type+": Renderer WebGL context is undefined",t):zs(this.type+": Renderer not passed as first argument",t),this.renderer=t,this.gl=this.renderer.gl,this.uuid=Is(),this._globalParameters={unpackAlignment:4,flipY:!e,premultiplyAlpha:a,floatingPoint:n,type:this.gl.UNSIGNED_BYTE,internalFormat:this.gl.RGBA,format:this.gl.RGBA},this.parameters={anisotropy:o,generateMipmap:h,wrapS:l||this.gl.CLAMP_TO_EDGE,wrapT:u||this.gl.CLAMP_TO_EDGE,minFilter:c||this.gl.LINEAR,magFilter:d||this.gl.LINEAR,_shouldUpdate:!0},this._initState(),this.sourceType=e?"fbo":"empty",this._samplerName=s,this._sampler={isActive:!1,isTextureBound:!1},this._textureMatrix={matrix:new rn,isActive:!1},this._size={width:1,height:1},this.scale=new sn(1),this.scale.onChange((()=>this.resize())),this.offset=new sn,this.offset.onChange((()=>this.resize())),this._loader=r,this._sourceLoaded=!1,this._uploaded=!1,this._willUpdate=!1,this.shouldUpdate=!1,this._forceUpdate=!1,this.userData={},this._canDraw=!1,i)return this._sampler.texture=this.gl.createTexture(),this._copyOnInit=!0,void(this._copiedFrom=i);this._copyOnInit=!1,this._initTexture()}_initState(){this._state={anisotropy:1,generateMipmap:!1,wrapS:null,wrapT:null,minFilter:null,magFilter:this.gl.LINEAR}}_initTexture(){this._sampler.texture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),"empty"===this.sourceType&&(this._globalParameters.flipY=!1,this._updateGlobalTexParameters(),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array([0,0,0,255])),this._canDraw=!0)}_restoreFromTexture(){this._copyOnInit||this._initTexture(),this._parent&&(this._setTextureUniforms(),this._setSize()),this.copy(this._copiedFrom),this._canDraw=!0}_restoreContext(){if(this._canDraw=!1,this._sampler.isActive=!1,this._initState(),this._state.generateMipmap=!1,this.parameters._shouldUpdate=!0,this._copiedFrom){const t=this.renderer.nextRender.add((()=>{this._copiedFrom._canDraw&&(this._restoreFromTexture(),t.keep=!1)}),!0)}else this._initTexture(),this._parent&&this._setParent(),this.source&&(this.setSource(this.source),"image"===this.sourceType?this.renderer.cache.addTexture(this):this.needUpdate()),this._canDraw=!0}addParent(t){!t||"Plane"!==t.type&&"PingPongPlane"!==t.type&&"ShaderPass"!==t.type&&"RenderTarget"!==t.type?this.renderer.production||Ls(this.type+": cannot add texture as a child of ",t," because it is not a valid parent"):(this._parent=t,this.index=this._parent.textures.length,this._parent.textures.push(this),this._setParent())}_setParent(){if(this._sampler.name=this._samplerName||"uSampler"+this.index,this._textureMatrix.name=this._samplerName?this._samplerName+"Matrix":"uTextureMatrix"+this.index,this._parent._program){if(!this._parent._program.compiled)return void(this.renderer.production||Ls(this.type+": Unable to create the texture because the program is not valid"));if(this._setTextureUniforms(),this._copyOnInit){const t=this.renderer.nextRender.add((()=>{this._copiedFrom._canDraw&&this._copiedFrom._uploaded&&(this.copy(this._copiedFrom),t.keep=!1)}),!0);return}this.source?this._parent.loader&&this._parent.loader._addSourceToParent(this.source,this.sourceType):this._size={width:this._parent._boundingRect.document.width,height:this._parent._boundingRect.document.height},this._setSize()}else"RenderTarget"===this._parent.type&&(this._size={width:this._parent._size&&this._parent._size.width||this.renderer._boundingRect.width,height:this._parent._size&&this._parent._size.height||this.renderer._boundingRect.height},this._upload(),this._updateTexParameters(),this._canDraw=!0)}hasParent(){return!!this._parent}_setTextureUniforms(){const t=this._parent._program.activeUniforms;for(let e=0;e<t.textures.length;e++)t.textures[e]===this._sampler.name&&(this._sampler.isActive=!0,this.renderer.useProgram(this._parent._program),this._sampler.location=this.gl.getUniformLocation(this._parent._program.program,this._sampler.name),t.textureMatrices.find((t=>t===this._textureMatrix.name))&&(this._textureMatrix.isActive=!0,this._textureMatrix.location=this.gl.getUniformLocation(this._parent._program.program,this._textureMatrix.name)),this.gl.uniform1i(this._sampler.location,this.index))}copy(t){t&&"Texture"===t.type?(this._globalParameters=t._globalParameters,this.parameters=t.parameters,this._state=t._state,this._size=t._size,!this._sourceLoaded&&t._sourceLoaded&&this._onSourceLoadedCallback&&this._onSourceLoadedCallback(),this._sourceLoaded=t._sourceLoaded,!this._uploaded&&t._uploaded&&this._onSourceUploadedCallback&&this._onSourceUploadedCallback(),this._uploaded=t._uploaded,this.sourceType=t.sourceType,this.source=t.source,this._videoFrameCallbackID=t._videoFrameCallbackID,this._sampler.texture=t._sampler.texture,this._copiedFrom=t,!this._parent||!this._parent._program||this._canDraw&&this._textureMatrix.matrix||(this._setSize(),this._canDraw=!0),this.renderer.needRender()):this.renderer.production||Ls(this.type+": Unable to set the texture from texture:",t)}setSource(t){this._sourceLoaded||this.renderer.nextRender.add((()=>this._onSourceLoadedCallback&&this._onSourceLoadedCallback()));const e=this.renderer.cache.getTextureFromSource(t);if(e)return this._uploaded||(this.renderer.nextRender.add((()=>this._onSourceUploadedCallback&&this._onSourceUploadedCallback())),this._uploaded=!0),this.copy(e),void this.resize();this.source=t,"empty"===this.sourceType&&("IMG"===t.tagName.toUpperCase()?this.sourceType="image":"VIDEO"===t.tagName.toUpperCase()?(this.sourceType="video",this.shouldUpdate=!0):"CANVAS"===t.tagName.toUpperCase()?(this.sourceType="canvas",this._willUpdate=!0,this.shouldUpdate=!0):this.renderer.production||Ls(this.type+": this HTML tag could not be converted into a texture:",t.tagName)),this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight},this._sourceLoaded=!0,this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.resize(),this._globalParameters.flipY=!0,"image"===this.sourceType&&(this.parameters.generateMipmap=this.parameters.generateMipmap||null===this.parameters.generateMipmap,this.parameters._shouldUpdate=this.parameters.generateMipmap,this._state.generateMipmap=!1,this._upload()),this.renderer.needRender()}_updateGlobalTexParameters(){this.renderer.state.unpackAlignment!==this._globalParameters.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this._globalParameters.unpackAlignment),this.renderer.state.unpackAlignment=this._globalParameters.unpackAlignment),this.renderer.state.flipY!==this._globalParameters.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this._globalParameters.flipY),this.renderer.state.flipY=this._globalParameters.flipY),this.renderer.state.premultiplyAlpha!==this._globalParameters.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._globalParameters.premultiplyAlpha),this.renderer.state.premultiplyAlpha=this._globalParameters.premultiplyAlpha),"half-float"===this._globalParameters.floatingPoint?this.renderer._isWebGL2&&this.renderer.extensions.EXT_color_buffer_float?(this._globalParameters.internalFormat=this.gl.RGBA16F,this._globalParameters.type=this.gl.HALF_FLOAT):this.renderer.extensions.OES_texture_half_float?this._globalParameters.type=this.renderer.extensions.OES_texture_half_float.HALF_FLOAT_OES:this.renderer.production||Ls(this.type+": could not use half-float textures because the extension is not available"):"float"===this._globalParameters.floatingPoint&&(this.renderer._isWebGL2&&this.renderer.extensions.EXT_color_buffer_float?(this._globalParameters.internalFormat=this.gl.RGBA16F,this._globalParameters.type=this.gl.FLOAT):this.renderer.extensions.OES_texture_float?this._globalParameters.type=this.renderer.extensions.OES_texture_half_float.FLOAT:this.renderer.production||Ls(this.type+": could not use float textures because the extension is not available"))}_updateTexParameters(){this.index&&this.renderer.state.activeTexture!==this.index&&this._bindTexture(this),this.parameters.wrapS!==this._state.wrapS&&(this.renderer._isWebGL2||Ns(this._size.width)&&Ns(this._size.height)||(this.parameters.wrapS=this.gl.CLAMP_TO_EDGE),this.parameters.wrapS!==this.gl.REPEAT&&this.parameters.wrapS!==this.gl.CLAMP_TO_EDGE&&this.parameters.wrapS!==this.gl.MIRRORED_REPEAT&&(this.renderer.production||Ls(this.type+": Wrong wrapS value",this.parameters.wrapS,"for this texture:",this,"\ngl.CLAMP_TO_EDGE wrapping will be used instead"),this.parameters.wrapS=this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.parameters.wrapS),this._state.wrapS=this.parameters.wrapS),this.parameters.wrapT!==this._state.wrapT&&(this.renderer._isWebGL2||Ns(this._size.width)&&Ns(this._size.height)||(this.parameters.wrapT=this.gl.CLAMP_TO_EDGE),this.parameters.wrapT!==this.gl.REPEAT&&this.parameters.wrapT!==this.gl.CLAMP_TO_EDGE&&this.parameters.wrapT!==this.gl.MIRRORED_REPEAT&&(this.renderer.production||Ls(this.type+": Wrong wrapT value",this.parameters.wrapT,"for this texture:",this,"\ngl.CLAMP_TO_EDGE wrapping will be used instead"),this.parameters.wrapT=this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.parameters.wrapT),this._state.wrapT=this.parameters.wrapT),this.parameters.generateMipmap&&!this._state.generateMipmap&&this.source&&(this.renderer._isWebGL2||Ns(this._size.width)&&Ns(this._size.height)?this.gl.generateMipmap(this.gl.TEXTURE_2D):this.parameters.generateMipmap=!1,this._state.generateMipmap=this.parameters.generateMipmap),this.parameters.minFilter!==this._state.minFilter&&(this.renderer._isWebGL2||Ns(this._size.width)&&Ns(this._size.height)||(this.parameters.minFilter=this.gl.LINEAR),this.parameters.generateMipmap||null===this.parameters.generateMipmap||(this.parameters.minFilter=this.gl.LINEAR),this.parameters.minFilter!==this.gl.LINEAR&&this.parameters.minFilter!==this.gl.NEAREST&&this.parameters.minFilter!==this.gl.NEAREST_MIPMAP_NEAREST&&this.parameters.minFilter!==this.gl.LINEAR_MIPMAP_NEAREST&&this.parameters.minFilter!==this.gl.NEAREST_MIPMAP_LINEAR&&this.parameters.minFilter!==this.gl.LINEAR_MIPMAP_LINEAR&&(this.renderer.production||Ls(this.type+": Wrong minFilter value",this.parameters.minFilter,"for this texture:",this,"\ngl.LINEAR filtering will be used instead"),this.parameters.minFilter=this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.parameters.minFilter),this._state.minFilter=this.parameters.minFilter),this.parameters.magFilter!==this._state.magFilter&&(this.renderer._isWebGL2||Ns(this._size.width)&&Ns(this._size.height)||(this.parameters.magFilter=this.gl.LINEAR),this.parameters.magFilter!==this.gl.LINEAR&&this.parameters.magFilter!==this.gl.NEAREST&&(this.renderer.production||Ls(this.type+": Wrong magFilter value",this.parameters.magFilter,"for this texture:",this,"\ngl.LINEAR filtering will be used instead"),this.parameters.magFilter=this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.parameters.magFilter),this._state.magFilter=this.parameters.magFilter);const t=this.renderer.extensions.EXT_texture_filter_anisotropic;if(t&&this.parameters.anisotropy!==this._state.anisotropy){const e=this.gl.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.parameters.anisotropy=Math.max(1,Math.min(this.parameters.anisotropy,e)),this.gl.texParameterf(this.gl.TEXTURE_2D,t.TEXTURE_MAX_ANISOTROPY_EXT,this.parameters.anisotropy),this._state.anisotropy=this.parameters.anisotropy}}setWrapS(t){this.parameters.wrapS!==t&&(this.parameters.wrapS=t,this.parameters._shouldUpdate=!0)}setWrapT(t){this.parameters.wrapT!==t&&(this.parameters.wrapT=t,this.parameters._shouldUpdate=!0)}setMinFilter(t){this.parameters.minFilter!==t&&(this.parameters.minFilter=t,this.parameters._shouldUpdate=!0)}setMagFilter(t){this.parameters.magFilter!==t&&(this.parameters.magFilter=t,this.parameters._shouldUpdate=!0)}setAnisotropy(t){t=isNaN(t)?this.parameters.anisotropy:t,this.parameters.anisotropy!==t&&(this.parameters.anisotropy=t,this.parameters._shouldUpdate=!0)}needUpdate(){this._forceUpdate=!0}_videoFrameCallback(){this._willUpdate=!0,this.source.requestVideoFrameCallback((()=>this._videoFrameCallback()))}_upload(){this._updateGlobalTexParameters(),this.source?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._globalParameters.format,this._globalParameters.type,this.source):"fbo"===this.sourceType&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._size.width,this._size.height,0,this._globalParameters.format,this._globalParameters.type,this.source||null),this._uploaded||(this.renderer.nextRender.add((()=>this._onSourceUploadedCallback&&this._onSourceUploadedCallback())),this._uploaded=!0)}_getSizes(){if("fbo"===this.sourceType)return{parentWidth:this._parent._boundingRect.document.width,parentHeight:this._parent._boundingRect.document.height,sourceWidth:this._parent._boundingRect.document.width,sourceHeight:this._parent._boundingRect.document.height,xOffset:0,yOffset:0};const t=this._parent.scale?an.set(this._parent.scale.x,this._parent.scale.y):an.set(1,1),e=this._parent._boundingRect.document.width*t.x,i=this._parent._boundingRect.document.height*t.y,r=this._size.width,s=this._size.height,n=r/s,a=e/i;let o=0,h=0;return a>n?h=Math.min(0,i-e*(1/n)):a<n&&(o=Math.min(0,e-i*n)),{parentWidth:e,parentHeight:i,sourceWidth:r,sourceHeight:s,xOffset:o,yOffset:h}}setScale(t){t.type&&"Vec2"===t.type?(t.sanitizeNaNValuesWith(this.scale).max(an.set(.001,.001)),t.equals(this.scale)||(this.scale.copy(t),this.resize())):this.renderer.production||Ls(this.type+": Cannot set scale because the parameter passed is not of Vec2 type:",t)}setOffset(t){t.type&&"Vec2"===t.type?(t.sanitizeNaNValuesWith(this.offset),t.equals(this.offset)||(this.offset.copy(t),this.resize())):this.renderer.production||Ls(this.type+": Cannot set offset because the parameter passed is not of Vec2 type:",scale)}_setSize(){if(this._parent&&this._parent._program){const t=this._getSizes();this._updateTextureMatrix(t)}}resize(){"fbo"===this.sourceType?(this._size={width:this._parent._size&&this._parent._size.width||this._parent._boundingRect.document.width,height:this._parent._size&&this._parent._size.height||this._parent._boundingRect.document.height},this._copiedFrom||(this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._size.width,this._size.height,0,this._globalParameters.format,this._globalParameters.type,null))):this.source&&(this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight}),this._setSize()}_updateTextureMatrix(t){const e=on.set(t.parentWidth/(t.parentWidth-t.xOffset),t.parentHeight/(t.parentHeight-t.yOffset),1);e.x/=this.scale.x,e.y/=this.scale.y,this._textureMatrix.matrix=hn.setFromArray([e.x,0,0,0,0,e.y,0,0,0,0,1,0,(1-e.x)/2+this.offset.x,(1-e.y)/2+this.offset.y,0,1]),this._updateMatrixUniform()}_updateMatrixUniform(){this._textureMatrix.isActive&&(this.renderer.useProgram(this._parent._program),this.gl.uniformMatrix4fv(this._textureMatrix.location,!1,this._textureMatrix.matrix.elements))}_onSourceLoaded(t){this.setSource(t),"image"===this.sourceType&&this.renderer.cache.addTexture(this)}_bindTexture(){this._canDraw&&(this.renderer.state.activeTexture!==this.index&&(this.gl.activeTexture(this.gl.TEXTURE0+this.index),this.renderer.state.activeTexture=this.index),this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this._sampler.isTextureBound||(this._sampler.isTextureBound=!!this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._sampler.isTextureBound&&this.renderer.needRender()))}_draw(){this._sampler.isActive&&(this._bindTexture(this),"video"===this.sourceType&&this.source&&!this._videoFrameCallbackID&&this.source.readyState>=this.source.HAVE_CURRENT_DATA&&!this.source.paused&&(this._willUpdate=!0),(this._forceUpdate||this._willUpdate&&this.shouldUpdate)&&(this._state.generateMipmap=!1,this._upload()),"video"===this.sourceType&&(this._willUpdate=!1),this._forceUpdate=!1),this.parameters._shouldUpdate&&(this._updateTexParameters(),this.parameters._shouldUpdate=!1)}onSourceLoaded(t){return t&&(this._onSourceLoadedCallback=t),this}onSourceUploaded(t){return t&&(this._onSourceUploadedCallback=t),this}_dispose(t=!1){"video"===this.sourceType||"image"===this.sourceType&&!this.renderer.state.isActive?(this._loader&&this._loader._removeSource(this),this.source=null):"canvas"===this.sourceType&&(this.source.width=this.source.width,this.source=null),this._parent=null,this.gl&&!this._copiedFrom&&(t||"image"!==this.sourceType||!this.renderer.state.isActive)&&(this._canDraw=!1,this.renderer.cache.removeTexture(this),this.gl.activeTexture(this.gl.TEXTURE0+this.index),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.deleteTexture(this._sampler.texture))}}class un extends class{constructor(t,e="anonymous"){this.type="TextureLoader",(t=t&&t.renderer||t)&&"Renderer"===t.type?t.gl||zs(this.type+": Renderer WebGL context is undefined",t):zs(this.type+": Renderer not passed as first argument",t),this.renderer=t,this.gl=this.renderer.gl,this.crossOrigin=e,this.elements=[]}_addElement(t,e,i,r){const s={source:t,texture:e,load:this._sourceLoaded.bind(this,t,e,i),error:this._sourceLoadError.bind(this,t,r)};return this.elements.push(s),s}_sourceLoadError(t,e,i){e&&e(t,i)}_sourceLoaded(t,e,i){e._sourceLoaded||(e._onSourceLoaded(t),this._parent&&(this._increment&&this._increment(),this.renderer.nextRender.add((()=>this._parent._onLoadingCallback&&this._parent._onLoadingCallback(e))))),i&&i(e)}_getSourceType(t){let e;return"string"==typeof t?null!==t.match(/\.(jpeg|jpg|jfif|pjpeg|pjp|gif|bmp|png|webp|svg)$/)?e="image":null!==t.match(/\.(webm|mp4|ogg|mov)$/)&&(e="video"):"IMG"===t.tagName.toUpperCase()?e="image":"VIDEO"===t.tagName.toUpperCase()?e="video":"CANVAS"===t.tagName.toUpperCase()&&(e="canvas"),e}_createImage(t){const e=new Image;return e.crossOrigin=this.crossOrigin,"string"==typeof t?e.src=t:(e.src=t.src,e.setAttribute("data-sampler",t.getAttribute("data-sampler"))),e}_createVideo(t){const e=document.createElement("video");return e.crossOrigin=this.crossOrigin,"string"==typeof t?e.src=t:(e.src=t.src,e.setAttribute("data-sampler",t.getAttribute("data-sampler"))),e}loadSource(t,e,i,r){switch(this._getSourceType(t)){case"image":this.loadImage(t,e,i,r);break;case"video":this.loadVideo(t,e,i,r);break;case"canvas":this.loadCanvas(t,e,i);break;default:this._sourceLoadError(t,r,"this source could not be converted into a texture: "+t)}}loadSources(t,e,i,r){for(let s=0;s<t.length;s++)this.loadSource(t[s],e,i,r)}loadImage(t,e={},i,r){const s=this._createImage(t);let n=Object.assign(e,{});this._parent&&(n=Object.assign(n,this._parent._texturesOptions)),n.loader=this,n.sampler=s.getAttribute("data-sampler")||n.sampler;const a=this.renderer.cache.getTextureFromSource(s);if(a){n.fromTexture=a;const t=new ln(this.renderer,n);return i&&i(t),void(this._parent&&this._addToParent(t,s,"image"))}const o=new ln(this.renderer,n),h=this._addElement(s,o,i,r);s.complete?this._sourceLoaded(s,o,i):s.decode?s.decode().then(this._sourceLoaded.bind(this,s,o,i)).catch((()=>{s.addEventListener("load",h.load,!1),s.addEventListener("error",h.error,!1)})):(s.addEventListener("load",h.load,!1),s.addEventListener("error",h.error,!1)),this._parent&&this._addToParent(o,s,"image")}loadImages(t,e,i,r){for(let s=0;s<t.length;s++)this.loadImage(t[s],e,i,r)}loadVideo(t,e={},i,r){const s=this._createVideo(t);s.preload=!0,s.muted=!0,s.loop=!0,s.setAttribute("playsinline",""),s.crossOrigin=this.crossOrigin;let n=Object.assign(e,{});this._parent&&(n=Object.assign(e,this._parent._texturesOptions)),n.loader=this,n.sampler=s.getAttribute("data-sampler")||n.sampler;const a=new ln(this.renderer,n),o=this._addElement(s,a,i,r);s.addEventListener("canplaythrough",o.load,!1),s.addEventListener("error",o.error,!1),s.readyState>=s.HAVE_FUTURE_DATA&&i&&this._sourceLoaded(s,a,i),s.load(),this._addToParent&&this._addToParent(a,s,"video"),"requestVideoFrameCallback"in HTMLVideoElement.prototype&&(o.videoFrameCallback=a._videoFrameCallback.bind(a),a._videoFrameCallbackID=s.requestVideoFrameCallback(o.videoFrameCallback))}loadVideos(t,e,i,r){for(let s=0;s<t.length;s++)this.loadVideo(t[s],e,i,r)}loadCanvas(t,e={},i){let r=Object.assign(e,{});this._parent&&(r=Object.assign(e,this._parent._texturesOptions)),r.loader=this,r.sampler=t.getAttribute("data-sampler")||r.sampler;const s=new ln(this.renderer,r);this._addElement(t,s,i,null),this._sourceLoaded(t,s,i),this._parent&&this._addToParent(s,t,"canvas")}loadCanvases(t,e,i){for(let r=0;r<t.length;r++)this.loadCanvas(t[r],e,i)}_removeSource(t){const e=this.elements.find((e=>e.texture.uuid===t.uuid));e&&("image"===t.sourceType?e.source.removeEventListener("load",e.load,!1):"video"===t.sourceType&&(e.videoFrameCallback&&t._videoFrameCallbackID&&e.source.cancelVideoFrameCallback(t._videoFrameCallbackID),e.source.removeEventListener("canplaythrough",e.load,!1),e.source.pause(),e.source.removeAttribute("src"),e.source.load()),e.source.removeEventListener("error",e.error,!1))}}{constructor(t,e,{sourcesLoaded:i=0,sourcesToLoad:r=0,complete:s=!1,onComplete:n=(()=>{})}={}){super(t,e.crossOrigin),this.type="PlaneTextureLoader",this._parent=e,"Plane"!==this._parent.type&&"PingPongPlane"!==this._parent.type&&"ShaderPass"!==this._parent.type&&(Ls(this.type+": Wrong parent type assigned to this loader"),this._parent=null),this.sourcesLoaded=i,this.sourcesToLoad=r,this.complete=s,this.onComplete=n}_setLoaderSize(t){this.sourcesToLoad=t,0===this.sourcesToLoad&&(this.complete=!0,this.renderer.nextRender.add((()=>this.onComplete&&this.onComplete())))}_increment(){this.sourcesLoaded++,this.sourcesLoaded>=this.sourcesToLoad&&!this.complete&&(this.complete=!0,this.renderer.nextRender.add((()=>this.onComplete&&this.onComplete())))}_addSourceToParent(t,e){if("image"===e){const e=this._parent.images;!e.find((e=>e.src===t.src))&&e.push(t)}else if("video"===e){const e=this._parent.videos;!e.find((e=>e.src===t.src))&&e.push(t)}else if("canvas"===e){const e=this._parent.canvases;!e.find((e=>e.isSameNode(t)))&&e.push(t)}}_addToParent(t,e,i){this._addSourceToParent(e,i),this._parent&&t.addParent(this._parent)}}const cn=new sn,dn=new sn;class pn extends class{constructor(t,e="Mesh",{vertexShaderID:i,fragmentShaderID:r,vertexShader:s,fragmentShader:n,uniforms:a={},widthSegments:o=1,heightSegments:h=1,renderOrder:l,depthTest:u=!0,cullFace:c="back",texturesOptions:d={},crossOrigin:p="anonymous"}={}){this.type=e,(t=t&&t.renderer||t)&&"Renderer"===t.type||(zs(this.type+": Curtains not passed as first argument or Curtains Renderer is missing",t),setTimeout((()=>{this._onErrorCallback&&this._onErrorCallback()}),0)),this.renderer=t,this.gl=this.renderer.gl,this.gl||(this.renderer.production||zs(this.type+": Unable to create a "+this.type+" because the Renderer WebGl context is not defined"),setTimeout((()=>{this._onErrorCallback&&this._onErrorCallback()}),0)),this._canDraw=!1,this.renderOrder=l,this._depthTest=u,this.cullFace=c,"back"!==this.cullFace&&"front"!==this.cullFace&&"none"!==this.cullFace&&(this.cullFace="back"),this.textures=[],d=Object.assign({premultiplyAlpha:!1,anisotropy:1,floatingPoint:"none",wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR},d),this._texturesOptions=d,this.crossOrigin=p,!s&&i&&document.getElementById(i)&&(s=document.getElementById(i).innerHTML),!n&&r&&document.getElementById(r)&&(n=document.getElementById(r).innerHTML),this._initMesh(),o=parseInt(o),h=parseInt(h),this._geometry=new en(this.renderer,{width:o,height:h}),this._program=new tn(this.renderer,{parent:this,vertexShader:s,fragmentShader:n}),this._program.compiled?(this._program.createUniforms(a),this.uniforms=this._program.uniformsManager.uniforms,this._geometry.setProgram(this._program),this.renderer.onSceneChange()):this.renderer.nextRender.add((()=>this._onErrorCallback&&this._onErrorCallback()))}_initMesh(){this.uuid=Is(),this.loader=new un(this.renderer,this,{sourcesLoaded:0,initSourcesToLoad:0,complete:!1,onComplete:()=>{this._onReadyCallback&&this._onReadyCallback(),this.renderer.needRender()}}),this.images=[],this.videos=[],this.canvases=[],this.userData={},this._canDraw=!0}_restoreContext(){this._canDraw=!1,this._matrices&&(this._matrices=null),this._program=new tn(this.renderer,{parent:this,vertexShader:this._program.vsCode,fragmentShader:this._program.fsCode}),this._program.compiled&&(this._geometry.restoreContext(this._program),this._program.createUniforms(this.uniforms),this.uniforms=this._program.uniformsManager.uniforms,this._programRestored())}setRenderTarget(t){t&&"RenderTarget"===t.type?("Plane"===this.type&&this.renderer.scene.removePlane(this),this.target=t,"Plane"===this.type&&this.renderer.scene.addPlane(this)):this.renderer.production||Ls(this.type+": Could not set the render target because the argument passed is not a RenderTarget class object",t)}setRenderOrder(t=0){(t=isNaN(t)?this.renderOrder:parseInt(t))!==this.renderOrder&&(this.renderOrder=t,this.renderer.scene.setPlaneRenderOrder(this))}createTexture(t={}){const e=new ln(this.renderer,Object.assign(this._texturesOptions,t));return e.addParent(this),e}addTexture(t){t&&"Texture"===t.type?t.addParent(this):this.renderer.production||Ls(this.type+": cannot add ",t," to this "+this.type+" because it is not a valid texture")}loadSources(t,e={},i,r){for(let s=0;s<t.length;s++)this.loadSource(t[s],e,i,r)}loadSource(t,e={},i,r){this.loader.loadSource(t,Object.assign(this._texturesOptions,e),(t=>{i&&i(t)}),((t,e)=>{this.renderer.production||Ls(this.type+": this HTML tag could not be converted into a texture:",t.tagName),r&&r(t,e)}))}loadImage(t,e={},i,r){this.loader.loadImage(t,Object.assign(this._texturesOptions,e),(t=>{i&&i(t)}),((t,e)=>{this.renderer.production||Ls(this.type+": There has been an error:\n",e,"\nwhile loading this image:\n",t),r&&r(t,e)}))}loadVideo(t,e={},i,r){this.loader.loadVideo(t,Object.assign(this._texturesOptions,e),(t=>{i&&i(t)}),((t,e)=>{this.renderer.production||Ls(this.type+": There has been an error:\n",e,"\nwhile loading this video:\n",t),r&&r(t,e)}))}loadCanvas(t,e={},i){this.loader.loadCanvas(t,Object.assign(this._texturesOptions,e),(t=>{i&&i(t)}))}loadImages(t,e={},i,r){for(let s=0;s<t.length;s++)this.loadImage(t[s],e,i,r)}loadVideos(t,e={},i,r){for(let s=0;s<t.length;s++)this.loadVideo(t[s],e,i,r)}loadCanvases(t,e={},i){for(let r=0;r<t.length;r++)this.loadCanvas(t[r],e,i)}playVideos(){for(let t=0;t<this.textures.length;t++){const e=this.textures[t];if("video"===e.sourceType){const t=e.source.play();void 0!==t&&t.catch((t=>{this.renderer.production||Ls(this.type+": Could not play the video : ",t)}))}}}_draw(){this.renderer.setDepthTest(this._depthTest),this.renderer.setFaceCulling(this.cullFace),this._program.updateUniforms(),this._geometry.bindBuffers(),this.renderer.state.forceBufferUpdate=!1;for(let t=0;t<this.textures.length;t++)if(this.textures[t]._draw(),!this.textures[t]._sampler.isTextureBound)return;this._geometry.draw(),this.renderer.state.activeTexture=null,this._onAfterRenderCallback&&this._onAfterRenderCallback()}onError(t){return t&&(this._onErrorCallback=t),this}onLoading(t){return t&&(this._onLoadingCallback=t),this}onReady(t){return t&&(this._onReadyCallback=t),this}onRender(t){return t&&(this._onRenderCallback=t),this}onAfterRender(t){return t&&(this._onAfterRenderCallback=t),this}remove(){this._canDraw=!1,this.target&&this.renderer.bindFrameBuffer(null),this._dispose(),"Plane"===this.type?this.renderer.removePlane(this):"ShaderPass"===this.type&&(this.target&&(this.target._shaderPass=null,this.target.remove(),this.target=null),this.renderer.removeShaderPass(this))}_dispose(){if(this.gl){this._geometry&&this._geometry.dispose(),this.target&&"ShaderPass"===this.type&&(this.renderer.removeRenderTarget(this.target),this.textures.shift());for(let t=0;t<this.textures.length;t++)this.textures[t]._dispose();this.textures=null}}}{constructor(t,e,i="DOMMesh",{widthSegments:r,heightSegments:s,renderOrder:n,depthTest:a,cullFace:o,uniforms:h,vertexShaderID:l,fragmentShaderID:u,vertexShader:c,fragmentShader:d,texturesOptions:p,crossOrigin:f}={}){super(t,i,{widthSegments:r,heightSegments:s,renderOrder:n,depthTest:a,cullFace:o,uniforms:h,vertexShaderID:l=l||e&&e.getAttribute("data-vs-id"),fragmentShaderID:u=u||e&&e.getAttribute("data-fs-id"),vertexShader:c,fragmentShader:d,texturesOptions:p,crossOrigin:f}),this.htmlElement=e,this.htmlElement&&0!==this.htmlElement.length||this.renderer.production||Ls(this.type+": The HTML element you specified does not currently exists in the DOM"),this._setDocumentSizes()}_setDocumentSizes(){let t=this.htmlElement.getBoundingClientRect();this._boundingRect||(this._boundingRect={}),this._boundingRect.document={width:t.width*this.renderer.pixelRatio,height:t.height*this.renderer.pixelRatio,top:t.top*this.renderer.pixelRatio,left:t.left*this.renderer.pixelRatio}}getBoundingRect(){return{width:this._boundingRect.document.width,height:this._boundingRect.document.height,top:this._boundingRect.document.top,left:this._boundingRect.document.left,right:this._boundingRect.document.left+this._boundingRect.document.width,bottom:this._boundingRect.document.top+this._boundingRect.document.height}}resize(){this._setDocumentSizes(),"Plane"===this.type&&(this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._setWorldSizes(),this._applyWorldPositions());for(let t=0;t<this.textures.length;t++)this.textures[t].resize();this.renderer.nextRender.add((()=>this._onAfterResizeCallback&&this._onAfterResizeCallback()))}mouseToPlaneCoords(t){const e=this.scale?this.scale:dn.set(1,1),i=cn.set((this._boundingRect.document.width-this._boundingRect.document.width*e.x)/2,(this._boundingRect.document.height-this._boundingRect.document.height*e.y)/2),r=this._boundingRect.document.width*e.x/this.renderer.pixelRatio,s=this._boundingRect.document.height*e.y/this.renderer.pixelRatio,n=(this._boundingRect.document.top+i.y)/this.renderer.pixelRatio,a=(this._boundingRect.document.left+i.x)/this.renderer.pixelRatio;return cn.set((t.x-a)/r*2-1,1-(t.y-n)/s*2)}onAfterResize(t){return t&&(this._onAfterResizeCallback=t),this}}class fn{constructor({fov:t=50,near:e=.1,far:i=150,width:r,height:s,pixelRatio:n=1}={}){this.position=new nn,this.projectionMatrix=new rn,this.worldMatrix=new rn,this.viewMatrix=new rn,this._shouldUpdate=!1,this.setSize(),this.setPerspective(t,e,i,r,s,n)}setFov(t){t=isNaN(t)?this.fov:parseFloat(t),(t=Math.max(1,Math.min(t,179)))!==this.fov&&(this.fov=t,this.setPosition(),this._shouldUpdate=!0),this.setCSSPerspective()}setNear(t){t=isNaN(t)?this.near:parseFloat(t),(t=Math.max(t,.01))!==this.near&&(this.near=t,this._shouldUpdate=!0)}setFar(t){t=isNaN(t)?this.far:parseFloat(t),(t=Math.max(t,50))!==this.far&&(this.far=t,this._shouldUpdate=!0)}setPixelRatio(t){t!==this.pixelRatio&&(this._shouldUpdate=!0),this.pixelRatio=t}setSize(t,e){t===this.width&&e===this.height||(this._shouldUpdate=!0),this.width=t,this.height=e}setPerspective(t,e,i,r,s,n){this.setPixelRatio(n),this.setSize(r,s),this.setFov(t),this.setNear(e),this.setFar(i),this._shouldUpdate&&this.updateProjectionMatrix()}setPosition(){this.position.set(0,0,1),this.worldMatrix.setFromArray([1,0,0,0,0,1,0,0,0,0,1,0,this.position.x,this.position.y,this.position.z,1]),this.viewMatrix=this.viewMatrix.copy(this.worldMatrix).getInverse()}setCSSPerspective(){this.CSSPerspective=Math.pow(Math.pow(this.width/(2*this.pixelRatio),2)+Math.pow(this.height/(2*this.pixelRatio),2),.5)/Math.tan(.5*this.fov*Math.PI/180)}getScreenRatiosFromFov(t=0){const e=this.position.z;t<e?t-=e:t+=e;const i=this.fov*Math.PI/180,r=2*Math.tan(i/2)*Math.abs(t);return{width:r*this.width/this.height,height:r}}updateProjectionMatrix(){const t=this.width/this.height,e=this.near*Math.tan(Math.PI/180*.5*this.fov),i=2*e,r=t*i,s=-.5*r,n=s+r,a=e-i,o=2*this.near/(n-s),h=2*this.near/(e-a),l=(n+s)/(n-s),u=(e+a)/(e-a),c=-(this.far+this.near)/(this.far-this.near),d=-2*this.far*this.near/(this.far-this.near);this.projectionMatrix.setFromArray([o,0,0,0,0,h,0,0,l,u,c,-1,0,0,d,0])}forceUpdate(){this._shouldUpdate=!0}cancelUpdate(){this._shouldUpdate=!1}}class mn{constructor(t=new Float32Array([0,0,0,1]),e="XYZ"){this.type="Quat",this.elements=t,this.axisOrder=e}setFromArray(t){return this.elements[0]=t[0],this.elements[1]=t[1],this.elements[2]=t[2],this.elements[3]=t[3],this}setAxisOrder(t){switch(t=t.toUpperCase()){case"XYZ":case"YXZ":case"ZXY":case"ZYX":case"YZX":case"XZY":this.axisOrder=t;break;default:this.axisOrder="XYZ"}return this}copy(t){return this.elements=t.elements,this.axisOrder=t.axisOrder,this}clone(){return(new mn).copy(this)}equals(t){return this.elements[0]===t.elements[0]&&this.elements[1]===t.elements[1]&&this.elements[2]===t.elements[2]&&this.elements[3]===t.elements[3]&&this.axisOrder===t.axisOrder}setFromVec3(t){const e=.5*t.x,i=.5*t.y,r=.5*t.z,s=Math.cos(e),n=Math.cos(i),a=Math.cos(r),o=Math.sin(e),h=Math.sin(i),l=Math.sin(r);return"XYZ"===this.axisOrder?(this.elements[0]=o*n*a+s*h*l,this.elements[1]=s*h*a-o*n*l,this.elements[2]=s*n*l+o*h*a,this.elements[3]=s*n*a-o*h*l):"YXZ"===this.axisOrder?(this.elements[0]=o*n*a+s*h*l,this.elements[1]=s*h*a-o*n*l,this.elements[2]=s*n*l-o*h*a,this.elements[3]=s*n*a+o*h*l):"ZXY"===this.axisOrder?(this.elements[0]=o*n*a-s*h*l,this.elements[1]=s*h*a+o*n*l,this.elements[2]=s*n*l+o*h*a,this.elements[3]=s*n*a-o*h*l):"ZYX"===this.axisOrder?(this.elements[0]=o*n*a-s*h*l,this.elements[1]=s*h*a+o*n*l,this.elements[2]=s*n*l-o*h*a,this.elements[3]=s*n*a+o*h*l):"YZX"===this.axisOrder?(this.elements[0]=o*n*a+s*h*l,this.elements[1]=s*h*a+o*n*l,this.elements[2]=s*n*l-o*h*a,this.elements[3]=s*n*a-o*h*l):"XZY"===this.axisOrder&&(this.elements[0]=o*n*a-s*h*l,this.elements[1]=s*h*a-o*n*l,this.elements[2]=s*n*l+o*h*a,this.elements[3]=s*n*a+o*h*l),this}}const gn=new sn,_n=new nn,vn=new nn,Dn=new nn,yn=new nn,xn=new nn,bn=new nn,wn=new nn,En=new nn,Cn=new mn,Tn=new nn(.5,.5,0),Sn=new nn,Fn=new nn,Pn=new nn,Rn=new nn,kn=new sn;class An extends pn{constructor(t,e,{widthSegments:i,heightSegments:r,renderOrder:s=0,depthTest:n,cullFace:a,uniforms:o,vertexShaderID:h,fragmentShaderID:l,vertexShader:u,fragmentShader:c,texturesOptions:d,crossOrigin:p,alwaysDraw:f=!1,visible:m=!0,transparent:g=!1,drawCheckMargins:_={top:0,right:0,bottom:0,left:0},autoloadSources:v=!0,watchScroll:D=!0,fov:y=50}={}){super(t,e,"Plane",{widthSegments:i,heightSegments:r,renderOrder:s,depthTest:n,cullFace:a,uniforms:o,vertexShaderID:h,fragmentShaderID:l,vertexShader:u,fragmentShader:c,texturesOptions:d,crossOrigin:p}),this.index=this.renderer.planes.length,this.target=null,this.alwaysDraw=f,this._shouldDraw=!0,this.visible=m,this._transparent=g,this.drawCheckMargins=_,this.autoloadSources=v,this.watchScroll=D,this._updateMVMatrix=!1,this.camera=new fn({fov:y,width:this.renderer._boundingRect.width,height:this.renderer._boundingRect.height,pixelRatio:this.renderer.pixelRatio}),this._program.compiled&&(this._initPlane(),this.renderer.scene.addPlane(this),this.renderer.planes.push(this))}_programRestored(){this.target&&this.setRenderTarget(this.renderer.renderTargets[this.target.index]),this._initMatrices(),this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._setWorldSizes(),this._applyWorldPositions(),this.renderer.scene.addPlane(this);for(let t=0;t<this.textures.length;t++)this.textures[t]._parent=this,this.textures[t]._restoreContext();this._canDraw=!0}_initPlane(){this._initTransformValues(),this._initPositions(),this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._initSources()}_initTransformValues(){this.rotation=new nn,this.rotation.onChange((()=>this._applyRotation())),this.quaternion=new mn,this.relativeTranslation=new nn,this.relativeTranslation.onChange((()=>this._setTranslation())),this._translation=new nn,this.scale=new nn(1),this.scale.onChange((()=>{this.scale.z=1,this._applyScale()})),this.transformOrigin=new nn(.5,.5,0),this.transformOrigin.onChange((()=>{this._setWorldTransformOrigin(),this._updateMVMatrix=!0}))}resetPlane(t){this._initTransformValues(),this._setWorldTransformOrigin(),null!==t&&t?(this.htmlElement=t,this.updatePosition()):t||this.renderer.production||Ls(this.type+": You are trying to reset a plane with a HTML element that does not exist. The old HTML element will be kept instead.")}removeRenderTarget(){this.target&&(this.renderer.scene.removePlane(this),this.target=null,this.renderer.scene.addPlane(this))}_initPositions(){this._initMatrices(),this._setWorldSizes(),this._applyWorldPositions()}_initMatrices(){const t=new rn;this._matrices={world:{matrix:t},modelView:{name:"uMVMatrix",matrix:t,location:this.gl.getUniformLocation(this._program.program,"uMVMatrix")},projection:{name:"uPMatrix",matrix:t,location:this.gl.getUniformLocation(this._program.program,"uPMatrix")},modelViewProjection:{matrix:t}}}_setPerspectiveMatrix(){this.camera._shouldUpdate&&(this.renderer.useProgram(this._program),this.gl.uniformMatrix4fv(this._matrices.projection.location,!1,this._matrices.projection.matrix.elements)),this.camera.cancelUpdate()}setPerspective(t,e,i){this.camera.setPerspective(t,e,i,this.renderer._boundingRect.width,this.renderer._boundingRect.height,this.renderer.pixelRatio),this.renderer.state.isContextLost&&this.camera.forceUpdate(),this._matrices.projection.matrix=this.camera.projectionMatrix,this.camera._shouldUpdate&&(this._setWorldSizes(),this._applyWorldPositions(),this._translation.z=this.relativeTranslation.z/this.camera.CSSPerspective),this._updateMVMatrix=this.camera._shouldUpdate}_setMVMatrix(){this._updateMVMatrix&&(this._matrices.world.matrix=this._matrices.world.matrix.composeFromOrigin(this._translation,this.quaternion,this.scale,this._boundingRect.world.transformOrigin),this._matrices.world.matrix.scale({x:this._boundingRect.world.width,y:this._boundingRect.world.height,z:1}),this._matrices.modelView.matrix.copy(this._matrices.world.matrix),this._matrices.modelView.matrix.elements[14]-=this.camera.position.z,this._matrices.modelViewProjection.matrix=this._matrices.projection.matrix.multiply(this._matrices.modelView.matrix),this.alwaysDraw||this._shouldDrawCheck(),this.renderer.useProgram(this._program),this.gl.uniformMatrix4fv(this._matrices.modelView.location,!1,this._matrices.modelView.matrix.elements)),this._updateMVMatrix=!1}_setWorldTransformOrigin(){this._boundingRect.world.transformOrigin=new nn((2*this.transformOrigin.x-1)*this._boundingRect.world.width,-(2*this.transformOrigin.y-1)*this._boundingRect.world.height,this.transformOrigin.z)}_documentToWorldSpace(t){return vn.set(t.x*this.renderer.pixelRatio/this.renderer._boundingRect.width*this._boundingRect.world.ratios.width,-t.y*this.renderer.pixelRatio/this.renderer._boundingRect.height*this._boundingRect.world.ratios.height,t.z)}_setWorldSizes(){const t=this.camera.getScreenRatiosFromFov();this._boundingRect.world={width:this._boundingRect.document.width/this.renderer._boundingRect.width*t.width/2,height:this._boundingRect.document.height/this.renderer._boundingRect.height*t.height/2,ratios:t},this._setWorldTransformOrigin()}_setWorldPosition(){const t=this._boundingRect.document.width/2+this._boundingRect.document.left,e=this._boundingRect.document.height/2+this._boundingRect.document.top,i=this.renderer._boundingRect.width/2+this.renderer._boundingRect.left,r=this.renderer._boundingRect.height/2+this.renderer._boundingRect.top;this._boundingRect.world.top=(r-e)/this.renderer._boundingRect.height*this._boundingRect.world.ratios.height,this._boundingRect.world.left=(t-i)/this.renderer._boundingRect.width*this._boundingRect.world.ratios.width}setScale(t){t.type&&"Vec2"===t.type?(t.sanitizeNaNValuesWith(this.scale).max(gn.set(.001,.001)),t.x===this.scale.x&&t.y===this.scale.y||(this.scale.set(t.x,t.y,1),this._applyScale())):this.renderer.production||Ls(this.type+": Cannot set scale because the parameter passed is not of Vec2 type:",t)}_applyScale(){for(let t=0;t<this.textures.length;t++)this.textures[t].resize();this._updateMVMatrix=!0}setRotation(t){t.type&&"Vec3"===t.type?(t.sanitizeNaNValuesWith(this.rotation),t.equals(this.rotation)||(this.rotation.copy(t),this._applyRotation())):this.renderer.production||Ls(this.type+": Cannot set rotation because the parameter passed is not of Vec3 type:",t)}_applyRotation(){this.quaternion.setFromVec3(this.rotation),this._updateMVMatrix=!0}setTransformOrigin(t){t.type&&"Vec3"===t.type?(t.sanitizeNaNValuesWith(this.transformOrigin),t.equals(this.transformOrigin)||(this.transformOrigin.copy(t),this._setWorldTransformOrigin(),this._updateMVMatrix=!0)):this.renderer.production||Ls(this.type+": Cannot set transform origin because the parameter passed is not of Vec3 type:",t)}_setTranslation(){let t=_n.set(0,0,0);this.relativeTranslation.equals(t)||(t=this._documentToWorldSpace(this.relativeTranslation)),this._translation.set(this._boundingRect.world.left+t.x,this._boundingRect.world.top+t.y,this.relativeTranslation.z/this.camera.CSSPerspective),this._updateMVMatrix=!0}setRelativeTranslation(t){t.type&&"Vec3"===t.type?(t.sanitizeNaNValuesWith(this.relativeTranslation),t.equals(this.relativeTranslation)||(this.relativeTranslation.copy(t),this._setTranslation())):this.renderer.production||Ls(this.type+": Cannot set translation because the parameter passed is not of Vec3 type:",t)}_applyWorldPositions(){this._setWorldPosition(),this._setTranslation()}updatePosition(){this._setDocumentSizes(),this._applyWorldPositions()}updateScrollPosition(t,e){(t||e)&&(this._boundingRect.document.top+=e*this.renderer.pixelRatio,this._boundingRect.document.left+=t*this.renderer.pixelRatio,this._applyWorldPositions())}_getIntersection(t,e){let i=e.clone().sub(t),r=t.clone();for(;r.z>-1;)r.add(i);return r}_getNearPlaneIntersections(t,e,i){const r=this._matrices.modelViewProjection.matrix;if(1===i.length)0===i[0]?(e[0]=this._getIntersection(e[1],wn.set(.95,1,0).applyMat4(r)),e.push(this._getIntersection(e[3],En.set(-1,-.95,0).applyMat4(r)))):1===i[0]?(e[1]=this._getIntersection(e[0],wn.set(-.95,1,0).applyMat4(r)),e.push(this._getIntersection(e[2],En.set(1,-.95,0).applyMat4(r)))):2===i[0]?(e[2]=this._getIntersection(e[3],wn.set(-.95,-1,0).applyMat4(r)),e.push(this._getIntersection(e[1],En.set(1,.95,0).applyMat4(r)))):3===i[0]&&(e[3]=this._getIntersection(e[2],wn.set(.95,-1,0).applyMat4(r)),e.push(this._getIntersection(e[0],En.set(-1,.95,0).applyMat4(r))));else if(2===i.length)0===i[0]&&1===i[1]?(e[0]=this._getIntersection(e[3],wn.set(-1,-.95,0).applyMat4(r)),e[1]=this._getIntersection(e[2],En.set(1,-.95,0).applyMat4(r))):1===i[0]&&2===i[1]?(e[1]=this._getIntersection(e[0],wn.set(-.95,1,0).applyMat4(r)),e[2]=this._getIntersection(e[3],En.set(-.95,-1,0).applyMat4(r))):2===i[0]&&3===i[1]?(e[2]=this._getIntersection(e[1],wn.set(1,.95,0).applyMat4(r)),e[3]=this._getIntersection(e[0],En.set(-1,.95,0).applyMat4(r))):0===i[0]&&3===i[1]&&(e[0]=this._getIntersection(e[1],wn.set(.95,1,0).applyMat4(r)),e[3]=this._getIntersection(e[2],En.set(.95,-1,0).applyMat4(r)));else if(3===i.length){let s=0;for(let e=0;e<t.length;e++)i.includes(e)||(s=e);e=[e[s]],0===s?(e.push(this._getIntersection(e[0],wn.set(-.95,1,0).applyMat4(r))),e.push(this._getIntersection(e[0],En.set(-1,.95,0).applyMat4(r)))):1===s?(e.push(this._getIntersection(e[0],wn.set(.95,1,0).applyMat4(r))),e.push(this._getIntersection(e[0],En.set(1,.95,0).applyMat4(r)))):2===s?(e.push(this._getIntersection(e[0],wn.set(.95,-1,0).applyMat4(r))),e.push(this._getIntersection(e[0],En.set(1,-.95,0).applyMat4(r)))):3===s&&(e.push(this._getIntersection(e[0],wn.set(-.95,-1,0).applyMat4(r))),e.push(this._getIntersection(e[0],En.set(-1.95,0).applyMat4(r))))}else for(let i=0;i<t.length;i++)e[i][0]=1e4,e[i][1]=1e4;return e}_getWorldCoords(){const t=[Dn.set(-1,1,0),yn.set(1,1,0),xn.set(1,-1,0),bn.set(-1,-1,0)];let e=[],i=[];for(let r=0;r<t.length;r++){const s=t[r].applyMat4(this._matrices.modelViewProjection.matrix);e.push(s),Math.abs(s.z)>1&&i.push(r)}i.length&&(e=this._getNearPlaneIntersections(t,e,i));let r=1/0,s=-1/0,n=1/0,a=-1/0;for(let t=0;t<e.length;t++){const i=e[t];i.x<r&&(r=i.x),i.x>s&&(s=i.x),i.y<n&&(n=i.y),i.y>a&&(a=i.y)}return{top:a,right:s,bottom:n,left:r}}_computeWebGLBoundingRect(){const t=this._getWorldCoords();let e={top:1-(t.top+1)/2,right:(t.right+1)/2,bottom:1-(t.bottom+1)/2,left:(t.left+1)/2};e.width=e.right-e.left,e.height=e.bottom-e.top,this._boundingRect.worldToDocument={width:e.width*this.renderer._boundingRect.width,height:e.height*this.renderer._boundingRect.height,top:e.top*this.renderer._boundingRect.height+this.renderer._boundingRect.top,left:e.left*this.renderer._boundingRect.width+this.renderer._boundingRect.left,right:e.left*this.renderer._boundingRect.width+this.renderer._boundingRect.left+e.width*this.renderer._boundingRect.width,bottom:e.top*this.renderer._boundingRect.height+this.renderer._boundingRect.top+e.height*this.renderer._boundingRect.height}}getWebGLBoundingRect(){return this._matrices.modelViewProjection?(this._boundingRect.worldToDocument&&!this.alwaysDraw||this._computeWebGLBoundingRect(),this._boundingRect.worldToDocument):this._boundingRect.document}_getWebGLDrawRect(){return this._computeWebGLBoundingRect(),{top:this._boundingRect.worldToDocument.top-this.drawCheckMargins.top,right:this._boundingRect.worldToDocument.right+this.drawCheckMargins.right,bottom:this._boundingRect.worldToDocument.bottom+this.drawCheckMargins.bottom,left:this._boundingRect.worldToDocument.left-this.drawCheckMargins.left}}_shouldDrawCheck(){const t=this._getWebGLDrawRect();Math.round(t.right)<=this.renderer._boundingRect.left||Math.round(t.left)>=this.renderer._boundingRect.left+this.renderer._boundingRect.width||Math.round(t.bottom)<=this.renderer._boundingRect.top||Math.round(t.top)>=this.renderer._boundingRect.top+this.renderer._boundingRect.height?this._shouldDraw&&(this._shouldDraw=!1,this.renderer.nextRender.add((()=>this._onLeaveViewCallback&&this._onLeaveViewCallback()))):(this._shouldDraw||this.renderer.nextRender.add((()=>this._onReEnterViewCallback&&this._onReEnterViewCallback())),this._shouldDraw=!0)}isDrawn(){return this._canDraw&&this.visible&&(this._shouldDraw||this.alwaysDraw)}enableDepthTest(t){this._depthTest=t}_initSources(){let t=0;if(this.autoloadSources){const e=[];for(let t=0;t<this.htmlElement.getElementsByTagName("img").length;t++)e.push(this.htmlElement.getElementsByTagName("img")[t]);e.length>0&&this.loadImages(e);const i=[];for(let t=0;t<this.htmlElement.getElementsByTagName("video").length;t++)i.push(this.htmlElement.getElementsByTagName("video")[t]);i.length>0&&this.loadVideos(i);const r=[];for(let t=0;t<this.htmlElement.getElementsByTagName("canvas").length;t++)r.push(this.htmlElement.getElementsByTagName("canvas")[t]);r.length>0&&this.loadCanvases(r),t=e.length+i.length+r.length}this.loader._setLoaderSize(t),this._canDraw=!0}_startDrawing(){this._canDraw&&(this._onRenderCallback&&this._onRenderCallback(),this.target?this.renderer.bindFrameBuffer(this.target):null===this.renderer.state.scenePassIndex&&this.renderer.bindFrameBuffer(null),this._setPerspectiveMatrix(),this._setMVMatrix(),(this.alwaysDraw||this._shouldDraw)&&this.visible&&this._draw())}mouseToPlaneCoords(t){if(Cn.setAxisOrder(this.quaternion.axisOrder),Cn.equals(this.quaternion)&&Tn.equals(this.transformOrigin))return super.mouseToPlaneCoords(t);{const e={x:t.x/(this.renderer._boundingRect.width/this.renderer.pixelRatio)*2-1,y:2*(1-t.y/(this.renderer._boundingRect.height/this.renderer.pixelRatio))-1},i=this.camera.position.clone(),r=Sn.set(e.x,e.y,-.5);r.unproject(this.camera),r.sub(i).normalize();const s=Fn.set(0,0,-1);s.applyQuat(this.quaternion).normalize();const n=Rn.set(0,0,0),a=s.dot(r);if(Math.abs(a)>=1e-4){const t=this._matrices.world.matrix.getInverse().multiply(this.camera.viewMatrix),e=this._boundingRect.world.transformOrigin.clone().add(this._translation),o=Pn.set(this._translation.x-e.x,this._translation.y-e.y,this._translation.z-e.z);o.applyQuat(this.quaternion),e.add(o);const h=s.dot(e.clone().sub(i))/a;n.copy(i.add(r.multiplyScalar(h))),n.applyMat4(t)}else n.set(1/0,1/0,1/0);return kn.set(n.x,n.y)}}onReEnterView(t){return t&&(this._onReEnterViewCallback=t),this}onLeaveView(t){return t&&(this._onLeaveViewCallback=t),this}}class Mn{constructor(t,{shaderPass:e,depth:i=!1,clear:r=!0,minWidth:s=1024,minHeight:n=1024,texturesOptions:a={}}={}){this.type="RenderTarget",(t=t&&t.renderer||t)&&"Renderer"===t.type?t.gl||zs(this.type+": Renderer WebGL context is undefined",t):zs(this.type+": Renderer not passed as first argument",t),this.renderer=t,this.gl=this.renderer.gl,this.index=this.renderer.renderTargets.length,this._shaderPass=e,this._depth=i,this._shouldClear=r,this._minSize={width:s*this.renderer.pixelRatio,height:n*this.renderer.pixelRatio},a=Object.assign({sampler:"uRenderTexture",isFBOTexture:!0,premultiplyAlpha:!1,anisotropy:1,generateMipmap:!1,floatingPoint:"none",wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR},a),this._texturesOptions=a,this.userData={},this.uuid=Is(),this.renderer.renderTargets.push(this),this.renderer.onSceneChange(),this._initRenderTarget()}_initRenderTarget(){this._setSize(),this.textures=[],this._createFrameBuffer()}_restoreContext(){this._setSize(),this._createFrameBuffer()}_setSize(){this._shaderPass&&this._shaderPass._isScenePass?this._size={width:this.renderer._boundingRect.width,height:this.renderer._boundingRect.height}:this._size={width:Math.max(this._minSize.width,this.renderer._boundingRect.width),height:Math.max(this._minSize.height,this.renderer._boundingRect.height)}}resize(){this._shaderPass&&(this._setSize(),this.textures[0].resize(),this.renderer.bindFrameBuffer(this,!0),this._depth&&this._bindDepthBuffer(),this.renderer.bindFrameBuffer(null))}_bindDepthBuffer(){this._depthBuffer&&(this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this._depthBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,this._size.width,this._size.height),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this._depthBuffer))}_createFrameBuffer(){this._frameBuffer=this.gl.createFramebuffer(),this.renderer.bindFrameBuffer(this,!0),this.textures.length?(this.textures[0]._parent=this,this.textures[0]._restoreContext()):new ln(this.renderer,this._texturesOptions).addParent(this),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.textures[0]._sampler.texture,0),this._depth&&(this._depthBuffer=this.gl.createRenderbuffer(),this._bindDepthBuffer()),this.renderer.bindFrameBuffer(null)}getTexture(){return this.textures[0]}remove(){this._shaderPass?this.renderer.production||Ls(this.type+": You're trying to remove a RenderTarget attached to a ShaderPass. You should remove that ShaderPass instead:",this._shaderPass):(this._dispose(),this.renderer.removeRenderTarget(this))}_dispose(){this._frameBuffer&&(this.gl.deleteFramebuffer(this._frameBuffer),this._frameBuffer=null),this._depthBuffer&&(this.gl.deleteRenderbuffer(this._depthBuffer),this._depthBuffer=null),this.textures[0]._dispose(),this.textures=[]}}class On extends pn{constructor(t,{widthSegments:e,heightSegments:i,renderOrder:r,depthTest:s,cullFace:n,uniforms:a,vertexShaderID:o,fragmentShaderID:h,vertexShader:l,fragmentShader:u,texturesOptions:c,crossOrigin:d,depth:p=!1,clear:f=!0,renderTarget:m}={}){super(t,t.container,"ShaderPass",{widthSegments:1,heightSegments:1,renderOrder:r,depthTest:s,cullFace:"back",uniforms:a,vertexShaderID:o,fragmentShaderID:h,vertexShader:l,fragmentShader:u,texturesOptions:c,crossOrigin:d}),this._isScenePass=!0,this.index=this.renderer.shaderPasses.length,this.renderOrder=0,this._depth=p,this._shouldClear=f,this.target=m,this.target&&(this._isScenePass=!1,this._shouldClear=this.target._shouldClear),this._program.compiled&&(this._initShaderPass(),this.renderer.shaderPasses.push(this),this.renderer.nextRender.add((()=>{this.renderer.scene.addShaderPass(this)})))}_programRestored(){this._isScenePass?this.renderer.scene.stacks.scenePasses.push(this.index):this.renderer.scene.stacks.renderPasses.push(this.index);for(let t=0;t<this.textures.length;t++)this.textures[t]._parent=this,this.textures[t]._restoreContext();this._canDraw=!0}_initShaderPass(){this.target?(this.setRenderTarget(this.target),this.target._shaderPass=this):this._createFrameBuffer(),new ln(this.renderer,{sampler:"uRenderTexture",isFBOTexture:!0,fromTexture:this.target.getTexture()}).addParent(this),this.loader._setLoaderSize(0),this._canDraw=!0,this.renderer.needRender()}_createFrameBuffer(){const t=new Mn(this.renderer,{shaderPass:this,clear:this._shouldClear,depth:this._depth,texturesOptions:this._texturesOptions});this.setRenderTarget(t)}_startDrawing(){this._canDraw&&(this._onRenderCallback&&this._onRenderCallback(),this._isScenePass?this.renderer.state.scenePassIndex+1<this.renderer.scene.stacks.scenePasses.length?(this.renderer.bindFrameBuffer(this.renderer.scene.stacks.scenePasses[this.renderer.state.scenePassIndex+1].target),this.renderer.state.scenePassIndex++):this.renderer.bindFrameBuffer(null):null===this.renderer.state.scenePassIndex&&this.renderer.bindFrameBuffer(null),this.renderer.state.forceBufferUpdate=!0,this._draw())}}class Bn extends An{constructor(t,e,{sampler:i="uPingPongTexture",widthSegments:r,heightSegments:s,renderOrder:n,depthTest:a,cullFace:o,uniforms:h,vertexShaderID:l,fragmentShaderID:u,vertexShader:c,fragmentShader:d,texturesOptions:p,crossOrigin:f,alwaysDraw:m,visible:g,transparent:_,drawCheckMargins:v,autoloadSources:D,watchScroll:y,fov:x}={}){super(t,e,{widthSegments:r,heightSegments:s,renderOrder:n,depthTest:!1,cullFace:o,uniforms:h,vertexShaderID:l,fragmentShaderID:u,vertexShader:c,fragmentShader:d,texturesOptions:p,crossOrigin:f,alwaysDraw:m,visible:g,transparent:_,drawCheckMargins:v,autoloadSources:!1,watchScroll:y,fov:x}),this.renderer.scene.removePlane(this),this.type="PingPongPlane",this.renderer.scene.addPlane(this),this.readPass=new Mn(t,{depth:!1,clear:!1,texturesOptions:p}),this.writePass=new Mn(t,{depth:!1,clear:!1,texturesOptions:p}),this.createTexture({sampler:i});let b=0;this.readPass.getTexture().onSourceUploaded((()=>{b++,this._checkIfReady(b)})),this.writePass.getTexture().onSourceUploaded((()=>{b++,this._checkIfReady(b)})),this.setRenderTarget(this.readPass),this._onRenderCallback=()=>{this.readPass&&this.writePass&&this.textures[0]&&this.textures[0]._uploaded&&this.setRenderTarget(this.writePass),this._onPingPongRenderCallback&&this._onPingPongRenderCallback()},this._onAfterRenderCallback=()=>{this.readPass&&this.writePass&&this.textures[0]&&this.textures[0]._uploaded&&this._swapPasses(),this._onPingPongAfterRenderCallback&&this._onPingPongAfterRenderCallback()}}_checkIfReady(t){2===t&&this.renderer.nextRender.add((()=>{this.textures[0].copy(this.target.getTexture())}))}_swapPasses(){const t=this.readPass;this.readPass=this.writePass,this.writePass=t,this.textures[0].copy(this.readPass.getTexture())}getTexture(){return this.textures[0]}onRender(t){return t&&(this._onPingPongRenderCallback=t),this}onAfterRender(t){return t&&(this._onPingPongAfterRenderCallback=t),this}remove(){this.target=null,this.renderer.bindFrameBuffer(null),this.writePass&&(this.writePass.remove(),this.writePass=null),this.readPass&&(this.readPass.remove(),this.readPass=null),super.remove()}}class Ln extends On{constructor(t,{renderOrder:e,depthTest:i,texturesOptions:r,crossOrigin:s,depth:n,clear:a,renderTarget:o}={}){super(t,{fragmentShader:"\n            precision mediump float;\n            \n            varying vec3 vVertexPosition;\n            varying vec2 vTextureCoord;\n        \n            uniform sampler2D uRenderTexture;\n            \n            uniform vec2 uResolution;\n            \n            #define FXAA_REDUCE_MIN   (1.0/128.0)\n            #define FXAA_REDUCE_MUL   (1.0/8.0)\n            #define FXAA_SPAN_MAX     8.0\n            \n            void main() {\n                vec2 res = 1.0 / uResolution;\n            \n                vec3 rgbNW = texture2D(uRenderTexture, (vTextureCoord.xy + vec2(-1.0, -1.0) * res)).xyz;\n                vec3 rgbNE = texture2D(uRenderTexture, (vTextureCoord.xy + vec2(1.0, -1.0) * res)).xyz;\n                vec3 rgbSW = texture2D(uRenderTexture, (vTextureCoord.xy + vec2(-1.0, 1.0) * res)).xyz;\n                vec3 rgbSE = texture2D(uRenderTexture, (vTextureCoord.xy + vec2(1.0, 1.0) * res)).xyz;\n                vec4 rgbaM = texture2D(uRenderTexture, vTextureCoord.xy * res);\n                vec3 rgbM = rgbaM.xyz;\n                vec3 luma = vec3(0.299, 0.587, 0.114);\n            \n                float lumaNW = dot(rgbNW, luma);\n                float lumaNE = dot(rgbNE, luma);\n                float lumaSW = dot(rgbSW, luma);\n                float lumaSE = dot(rgbSE, luma);\n                float lumaM  = dot(rgbM,  luma);\n                float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n                float lumaMax = max(lumaM, max(max(lumaNW, lumaNE) , max(lumaSW, lumaSE)));\n            \n                vec2 dir;\n                dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n                dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n            \n                float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) * (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n            \n                float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n                dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n                      max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                            dir * rcpDirMin)) * res;\n                vec4 rgbA = (1.0/2.0) * (\n                texture2D(uRenderTexture, vTextureCoord.xy + dir * (1.0/3.0 - 0.5)) +\n                texture2D(uRenderTexture, vTextureCoord.xy + dir * (2.0/3.0 - 0.5)));\n                vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (\n                texture2D(uRenderTexture, vTextureCoord.xy + dir * (0.0/3.0 - 0.5)) +\n                texture2D(uRenderTexture, vTextureCoord.xy + dir * (3.0/3.0 - 0.5)));\n                float lumaB = dot(rgbB, vec4(luma, 0.0));\n            \n                if ((lumaB < lumaMin) || (lumaB > lumaMax)) {\n                    gl_FragColor = rgbA;\n                } else {\n                    gl_FragColor = rgbB;\n                }\n            }\n        ",uniforms:{resolution:{name:"uResolution",type:"2f",value:[0,0]}},renderOrder:e,depthTest:i,texturesOptions:r,crossOrigin:s,depth:n,clear:a,renderTarget:o}),this.uniforms.resolution.value=[this.renderer._boundingRect.width,this.renderer._boundingRect.height],this._onAfterResizeCallback=()=>{this.uniforms.resolution.value=[this.renderer._boundingRect.width,this.renderer._boundingRect.height],this._onFXAAPassAfterResizeCallback&&this._onFXAAPassAfterResizeCallback()}}onAfterResize(t){return t&&(this._onFXAAPassAfterResizeCallback=t),this}}var zn=i(264),In=i.n(zn);function Nn(){kr.registerPlugin(In()),new(In())(".title-split",{type:"lines",linesClass:"title-c"}),new(In())(".title-split",{type:"chars",linesClass:"title-p"}),new(In())(".split",{type:"lines",linesClass:"split-c"}),new(In())(".split",{type:"lines",linesClass:"split-p"})}var Un,Vn=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(Vn=!0),Os().hooks.once((function(t){!function t(e){document.title=e,setTimeout((function(){t(e.substr(1)+e.substr(0,1))}),350)}("Freelance Creative Developer  Guillaume Colombel  "),setTimeout((function(){console.clear()}),100)})),Os().hooks.leave((function(t){kr.to("main",{opacity:0,duration:.5}),setTimeout((function(){console.clear()}),100)})),Os().hooks.beforeEnter((function(){ga("set","page",window.location.pathname),ga("send","pageview")})),Os().hooks.after((function(t){kr.to("main",{opacity:1,duration:.5})})),Os().init({debug:!1,transitions:[{name:"home",to:{namespace:["home"]},once:function(t){var e=t.next;Nn(),kr.timeline({delay:1}).set("h1 .title-c div",{skewX:25}).to(".loading img",{scale:1,duration:1,ease:"back(6)"}).to(".loading img",{rotate:360,duration:1,ease:"power2.inOut"},1.5).to(".loading img",{scale:0,duration:1,ease:"expo.inOut"},1.75).to(".loading",{opacity:0,duration:.1,ease:"power2.inOut",onComplete:function(){document.querySelector(".loading").remove()}},2.5).to("h1 .title-c div",{y:0,skewX:0,ease:"back(1)",stagger:{from:"left",each:.025}}).to(".header",{opacity:1,duration:1}),Xn(e.container)},beforeEnter:function(t){var e=t.next;Un.destroy(),setTimeout((function(){Xn(e.container)}),100)},enter:function(){},after:function(){kr.to("body",{backgroundColor:"#000",duration:.5,ease:"power2.inOut"}),document.documentElement.classList.add("is-home"),document.documentElement.classList.remove("is-about"),document.documentElement.classList.remove("is-not-found"),document.querySelector(".header").style.opacity=1,Nn(),kr.set("h1 .title-c div",{skewX:25}),kr.to("h1 .title-c div",{delay:.5,y:0,skewX:0,ease:"back(1)",stagger:{from:"left",each:.025,clearProps:"transform"}}),document.querySelector(".loading").remove()},leave:function(t){if(t.current,t.next,t.trigger,!Vn){var e=this.async();setTimeout((function(){e()}),750)}}},{name:"about",to:{namespace:["about"]},once:function(t){var e=t.next;document.documentElement.classList.add("is-about"),Xn(e.container),Nn(),kr.set("h1 .title-c div",{skewX:25}),kr.to("h1 .title-c div",{y:0,skewX:0,ease:"back(1)",stagger:{from:"left",each:.025,clearProps:"transform"}}),document.body.style.backgroundColor="#FDF0EB"},beforeEnter:function(t){var e=t.next;Un.destroy(),setTimeout((function(){Xn(e.container)}),100)},enter:function(){},after:function(){kr.to("body",{backgroundColor:"#FDF0EB",duration:.5,ease:"power2.inOut"}),document.documentElement.classList.add("is-about"),document.documentElement.classList.remove("is-home"),document.documentElement.classList.remove("is-not-found"),Nn(),kr.set("h1 .title-c div",{skewX:25}),kr.to("h1 .title-c div",{delay:.5,y:0,skewX:0,ease:"back(1)",stagger:{from:"left",each:.025,clearProps:"transform"}})},leave:function(t){if(t.current,t.next,t.trigger,!Vn){var e=this.async();setTimeout((function(){e()}),750)}}},{name:"404",to:{namespace:["404"]},once:function(t){var e=t.next;document.querySelector(".header").style.opacity=1,document.documentElement.classList.add("is-not-found"),Xn(e.container)},beforeEnter:function(t){var e=t.next;Un.destroy(),setTimeout((function(){Xn(e.container)}),100)},after:function(){document.querySelector(".header").style.opacity=1,document.documentElement.classList.add("is-not-found"),Xn(next.container)}}]});var jn=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?"0.1":"0.08";function Xn(t){if(Un=new As({el:t.querySelector(".o-scroll"),smooth:!0,lerp:jn,getSpeed:!0,getDirection:!0,passive:!0}),document.querySelector("#canvas")){var e=function(t){var e=c[t];e.onReady((function(){e.textures[0].setScale(new sn(1.5,1.5)),i(e),e.htmlElement.addEventListener("click",(function(t){document.querySelector(".dp-container h3").innerText=t.target.dataset.title,document.querySelector(".dp-container a").setAttribute("href",t.target.dataset.url);var i=t.target.getAttribute("data-description").replace(/\\n/g,"<br>");document.querySelector(".dp-container p").innerHTML=i,Un.stop(),Vn&&(document.documentElement.style.overflow="hidden"),setTimeout((function(){r(t,e)}),600)}))})).onAfterResize((function(){if(e.userData.isFullscreen){var t=e.getBoundingRect(),r=a.getBoundingRect();e.setScale(new sn(r.width/t.width,r.height/t.height)),e.setRelativeTranslation(new nn(-1*t.left/a.pixelRatio,-1*t.top/a.pixelRatio,0))}i(e)})).onRender((function(){e.uniforms.time.value++}))},i=function(t){var e=a.getBoundingRect(),i=t.getBoundingRect(),r=(i.top+i.height/2-e.height/2)/e.height,s=t.textures[0];s.offset.y=.5*(1-s.scale.y)*r},r=function(t,e){if(!g.fullscreenThumb){document.querySelector("#canvas").style.zIndex="100",kr.timeline({delay:1.25}).set(".details-project",{display:"flex"}).to(".details-project_bg",{scaleY:1,duration:1,ease:"expo.inOut"}).to(".details-project .btn-close, .dp-container",{opacity:1,duration:1,ease:"power2.inOut"},1),kr.to(".list-projects",{opacity:0,duration:.5}),g.fullscreenThumb=!0,document.body.classList.add("is-fullscreen"),e.userData.isFullscreen=!0,e.setRenderOrder(1);var r=e.mouseToPlaneCoords(h);e.uniforms.mousePosition.value.copy(r),e.uniforms.time.value=0;var s=e.getBoundingRect(),n=a.getBoundingRect(),o={scaleX:1,scaleY:1,translationX:0,translationY:0,transition:0,textureScale:1.5,mouseX:r.x,mouseY:r.y},l=new sn,u=new nn;g.openTween&&g.openTween.kill(),e.setTransformOrigin(u),g.openTween=kr.to(o,{duration:2,scaleX:n.width/s.width,scaleY:n.height/s.height,translationX:-1*s.left/a.pixelRatio,translationY:-1*s.top/a.pixelRatio,transition:1,textureScale:1,mouseX:0,mouseY:0,ease:"expo.inOut",onStart:function(){kr.to(".cursor",{scale:1,duration:.5,ease:"back(10)"}),kr.to(".cursor",{scale:0,delay:.5,duration:.5,ease:"expo.inOut"})},onUpdate:function(){l.set(o.scaleX,o.scaleY),e.setScale(l),u.set(o.translationX,o.translationY,0),e.setRelativeTranslation(u),l.set(o.textureScale,o.textureScale),e.textures[0].setScale(l),e.uniforms.fullscreenTransition.value=o.transition,i(e),e.uniforms.mousePosition.value.set(o.mouseX,o.mouseY)},onComplete:function(){a.planes.filter((function(t){return t.uuid!==e.uuid&&"PingPongPlane"!==t.type})).forEach((function(t){t.visible=!1})),g.openTween=null}})}},s=function(t){l.copy(h),t.targetTouches?h.set(t.targetTouches[0].clientX,t.targetTouches[0].clientY):h.set(t.clientX,t.clientY),u.set((h.x-l.x)/16,(h.y-l.y)/16),_=!0},n=Un.isMobile,a=new Ws({container:"canvas",watchScroll:n,pixelRatio:Math.min(1.5,window.devicePixelRatio),autoRender:!1}),o=0;a.onRender((function(){n&&(o=a.lerp(o,0,.05))})).onScroll((function(){var t=a.getScrollDeltas();t.y=-t.y,t.y>60?t.y=60:t.y<-60&&(t.y=-60),o=n&&Math.abs(t.y)>Math.abs(o)?a.lerp(o,t.y,.5):a.lerp(o,1.5*t.y,.5),c.forEach((function(t){i(t),t.uniforms.scrollEffect.value=o}))})).onError((function(){document.body.classList.add("no-curtains","planes-loaded")})).onContextLost((function(){a.restoreContext()})),n||(a.disableDrawing(),Un.on("scroll",(function(t){var e;e=t.scroll.y,a.updateScrollValues(0,e),a.needRender()})));var h=new sn,l=h.clone(),u=new sn;kr.ticker.add(a.render.bind(a));for(var c=[],d=document.getElementsByClassName("project-img"),p={vertexShader:"\n      precision mediump float;\n\n      // default mandatory variables\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n\n      uniform mat4 planeTextureMatrix;\n\n      // custom variables\n      varying vec3 vVertexPosition;\n      varying vec2 vTextureCoord;\n      \n      uniform vec2 uMousePosition;\n      uniform float uTime;\n      uniform float uTransition;\n      uniform float uScrollEffect;\n\n      void main() {\n        vec3 vertexPosition = aVertexPosition;\n        \n        // convert uTransition from [0,1] to [0,1,0]\n        float transition = 1.0 - abs((uTransition * 2.0) - 1.0);\n        \n        vertexPosition.y += sin(((vertexPosition.x + 1.0) / 2.0) * 3.141592) * (sin(uScrollEffect / 360.0));\n        \n        // get the distance between our vertex and the mouse position\n        float distanceFromMouse = distance(uMousePosition, vec2(vertexPosition.x, vertexPosition.y));\n\n        // calculate our wave effect\n        float waveSinusoid = cos(4.0 * (distanceFromMouse - (uTime / 50.0)));\n\n        // attenuate the effect based on mouse distance\n        float distanceStrength = (0.4 / (distanceFromMouse + 0.4));\n\n        // calculate our distortion effect\n        float distortionEffect = distanceStrength * waveSinusoid * 0.2;\n\n        // apply it to our vertex position\n        vertexPosition.z +=  distortionEffect * -transition;\n        vertexPosition.x +=  (distortionEffect * transition * (uMousePosition.x - vertexPosition.x));\n        vertexPosition.y +=  distortionEffect * transition * (uMousePosition.y - vertexPosition.y);\n\n        gl_Position = uPMatrix * uMVMatrix * vec4(vertexPosition, 1.0);\n\n        // varyings\n        vVertexPosition = vertexPosition;\n        vTextureCoord = (planeTextureMatrix * vec4(aTextureCoord, 0.0, 1.0)).xy;\n      }\n    ",fragmentShader:"\n      precision mediump float;\n\n      varying vec3 vVertexPosition;\n      varying vec2 vTextureCoord;\n\n      uniform sampler2D planeTexture;\n\n      void main( void ) {\n        // apply our texture\n        vec4 finalColor = texture2D(planeTexture, vTextureCoord);\n        \n        // fake shadows based on vertex position along Z axis\n        finalColor.rgb += clamp(vVertexPosition.z, -1.0, 0.0) * 4.;\n        // fake lights based on vertex position along Z axis\n        finalColor.rgb += clamp(vVertexPosition.z, 0.0, 1.0) * 2.5;\n\n        // just display our texture\n        gl_FragColor = finalColor;\n      }\n    ",widthSegments:10,heightSegments:10,uniforms:{time:{name:"uTime",type:"1f",value:0},fullscreenTransition:{name:"uTransition",type:"1f",value:0},mousePosition:{name:"uMousePosition",type:"2f",value:h},scrollEffect:{name:"uScrollEffect",type:"1f",value:0}}},f=0;f<d.length;f++){var m=new An(a,d[f],p);c.push(m),e(f)}var g={fullscreenThumb:!1,closeButtonEl:document.querySelector(".btn-close"),openTween:null,closeTween:null};g.closeButtonEl.addEventListener("click",(function(){var t=a.planes.find((function(t){return t.userData.isFullscreen}));if(document.querySelector("#canvas").style.zIndex="20",Un.start(),Vn&&document.documentElement.style.removeProperty("overflow"),kr.timeline().to(".details-project_bg",{scaleY:0,duration:1,ease:"expo.inOut"}).to(".details-project .btn-close, .dp-container",{opacity:0,duration:.1,ease:"power2.inOut"},0).set(".details-project",{display:"none"}),kr.to(".list-projects",{delay:1,opacity:1,duration:1}),t&&g.fullscreenThumb){g.fullscreenThumb=!1,document.body.classList.remove("is-fullscreen"),t.userData.isFullscreen=!1,t.uniforms.mousePosition.value.set(0,0),t.uniforms.time.value=0,a.planes.filter((function(e){return e.uuid!==t.uuid&&"PingPongPlane"!==e.type})).forEach((function(t){t.visible=!0}));var e={scaleX:t.scale.x,scaleY:t.scale.y,translationX:t.relativeTranslation.x,translationY:t.relativeTranslation.y,transition:1,textureScale:1},r=new sn,s=new nn;g.closeTween&&g.closeTween.kill(),g.closeTween=kr.to(e,{duration:2,scaleX:1,scaleY:1,translationX:0,translationY:0,transition:0,textureScale:1.5,ease:"power3.inOut",onUpdate:function(){r.set(e.scaleX,e.scaleY),t.setScale(r),s.set(e.translationX,e.translationY,0),t.setRelativeTranslation(s),r.set(e.textureScale,e.textureScale),t.textures[0].setScale(r),t.uniforms.fullscreenTransition.value=e.transition,i(t)},onComplete:function(){t.setRenderOrder(0),g.closeTween=null}})}})),window.addEventListener("mousemove",s),window.addEventListener("touchmove",s,{passive:!0});var _=!1,v=a.getBoundingRect(),D={sampler:"uFlowMap",vertexShader:"\n      #ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      #else\n      precision mediump float;\n      #endif\n\n      // default mandatory variables\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n\n      // custom variables\n      varying vec3 vVertexPosition;\n      varying vec2 vTextureCoord;\n\n      void main() {\n      vec3 vertexPosition = aVertexPosition;\n\n      gl_Position = uPMatrix * uMVMatrix * vec4(vertexPosition, 1.0);\n\n      // varyings\n      vTextureCoord = aTextureCoord;\n      vVertexPosition = vertexPosition;\n      }\n    ",fragmentShader:"\n      #ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      #else\n      precision mediump float;\n      #endif\n\n      varying vec3 vVertexPosition;\n      varying vec2 vTextureCoord;\n\n      uniform sampler2D uFlowMap;\n\n      uniform vec2 uMousePosition;\n      uniform float uFalloff;\n      uniform float uAlpha;\n      uniform float uDissipation;\n\n      uniform vec2 uVelocity;\n      uniform float uAspect;\n\n      void main() {\n        vec2 textCoords = vTextureCoord;    \n        vec4 color = texture2D(uFlowMap, textCoords) * uDissipation;\n        vec2 mouseTexPos = (uMousePosition + 1.0) * 0.5;\n        vec2 cursor = vTextureCoord - mouseTexPos;\n        cursor.x *= uAspect;\n\n        vec3 stamp = vec3(uVelocity * vec2(1.0, -1.0), 1.0 - pow(1.0 - min(1.0, length(uVelocity)), 4.0));\n        float falloff = smoothstep(uFalloff, 0.0, length(cursor)) * uAlpha;\n        color.rgb = mix(color.rgb, stamp, vec3(falloff));\n\n        gl_FragColor = color;\n      }\n    ",watchScroll:!1,texturesOptions:{floatingPoint:"half-float"},uniforms:{mousePosition:{name:"uMousePosition",type:"2f",value:h},fallOff:{name:"uFalloff",type:"1f",value:v.width>v.height?v.width/7500:v.height/7500},alpha:{name:"uAlpha",type:"1f",value:.4},dissipation:{name:"uDissipation",type:"1f",value:.1},velocity:{name:"uVelocity",type:"2f",value:u},aspect:{name:"uAspect",type:"1f",value:v.width/v.height}}},y=new Bn(a,a.container,D);y.onRender((function(){y.uniforms.mousePosition.value=y.mouseToPlaneCoords(h),_||u.set(a.lerp(u.x,0,.5),a.lerp(u.y,0,.5)),_=!1,y.uniforms.velocity.value=new sn(a.lerp(u.x,0,.1),a.lerp(u.y,0,.1))})).onAfterResize((function(){var t=y.getBoundingRect();y.uniforms.aspect.value=t.width/t.height,y.uniforms.fallOff.value=t.width>t.height?t.width/1e4:t.height/1e4})),new On(a,{vertexShader:"\n      #ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      #else\n      precision mediump float;\n      #endif\n\n      // default mandatory variables\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n\n      // custom variables\n      varying vec3 vVertexPosition;\n      varying vec2 vTextureCoord;\n\n      void main() {\n      gl_Position = vec4(aVertexPosition, 1.0);\n      // set the varyings\n      vTextureCoord = aTextureCoord;\n      vVertexPosition = aVertexPosition;\n      }\n    ",fragmentShader:"\n      #ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      #else\n      precision mediump float;\n      #endif\n\n      // get our varyings\n      varying vec3 vVertexPosition;\n      varying vec2 vTextureCoord;\n      // our render texture\n      uniform sampler2D uRenderTexture;\n      uniform sampler2D uFlowTexture;\n\n      void main() {\n      // our flowmap\n      vec4 flowTexture = texture2D(uFlowTexture, vTextureCoord);\n\n      // distort our image texture based on the flowmap values\n      vec2 distortedCoords = vTextureCoord;\n      distortedCoords -= flowTexture.xy * 0.1;\n\n      // get our final texture based on the displaced coords\n      vec4 texture = texture2D(uRenderTexture, distortedCoords);\n      \n      vec4 rTexture = texture2D(uRenderTexture, distortedCoords + flowTexture.xy * 0.2);\n      vec4 gTexture = texture2D(uRenderTexture, distortedCoords + flowTexture.xy * 0.2);\n      vec4 bTexture = texture2D(uRenderTexture, distortedCoords - flowTexture.xy * 0.2);\n\n      // mix the BW image and the colored one based on our flowmap color values\n      float mixValue = clamp((abs(flowTexture.r) + abs(flowTexture.g) + abs(flowTexture.b)) * 1.5, 0.0, 1.0);\n      texture = mix(texture, vec4(rTexture.r, gTexture.g, bTexture.b, texture.a), mixValue);\n\n      gl_FragColor = texture;\n      }\n    ",depth:!1}).createTexture({sampler:"uFlowTexture",floatingPoint:"half-float",fromTexture:y.getTexture()}).onSourceUploaded((function(){new Ln(a)}))}}if(Vn){var Hn=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(Hn,"px"))}else window.addEventListener("resize",(function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))}));navigator.userAgent.includes("Instagram")&&"?r"!==window.location.href.substr(-2)&&(window.location=window.location.href+"?r"),window.netlifyIdentity&&window.netlifyIdentity.on("init",(function(t){t||window.netlifyIdentity.on("login",(function(){document.location.href="/admin/"}))}))})()})();